(window.webpackJsonp=window.webpackJsonp||[]).push([[2],[function(e,t,n){"use strict";n.d(t,"a",function(){return H}),n.d(t,"b",function(){return G}),n.d(t,"c",function(){return K}),n.d(t,"d",function(){return w}),n.d(t,"e",function(){return _}),n.d(t,"f",function(){return E}),n.d(t,"g",function(){return S}),n.d(t,"h",function(){return Y}),n.d(t,"i",function(){return T}),n.d(t,"j",function(){return I}),n.d(t,"k",function(){return B}),n.d(t,"l",function(){return N}),n.d(t,"m",function(){return q}),n.d(t,"n",function(){return R}),n.d(t,"o",function(){return A});var r=n(13),i=n(1),a=n(4),o=n(10),u=n(7),s=n(9),c=n(8),l=n(11),h=n(3);function f(){return(f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var d="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},p=h.useState,v=h.useEffect,y=h.useLayoutEffect,m=h.useDebugValue;function g(e){var t=e.getSnapshot,n=e.value;try{var r=t();return!d(n,r)}catch(i){return!0}}var b=!!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement)?function(e,t,n){return t()}:function(e,t,n){var r=t(),i=p({inst:{value:r,getSnapshot:t}}),a=Object(c.a)(i,2),o=a[0].inst,u=a[1];return y(function(){o.value=r,o.getSnapshot=t,g(o)&&u({inst:o})},[e,r,t]),v(function(){return g(o)&&u({inst:o}),e(function(){g(o)&&u({inst:o})})},[e]),m(r),r},k=("useSyncExternalStore"in h&&h.useSyncExternalStore,h.createContext(null));var w=h.createContext(null);var _=h.createContext(null);var O=h.createContext(null);var E=h.createContext(null);var x=h.createContext(null);var S=h.createContext({outlet:null,matches:[]});var j=h.createContext(null);function T(e,t){var n=(void 0===t?{}:t).relative;C()||Object(l.j)(!1);var r=h.useContext(E),i=r.basename,a=r.navigator,o=A(e,{relative:n}),u=o.hash,s=o.pathname,c=o.search,f=s;return"/"!==i&&(f="/"===s?i:Object(l.l)([i,s])),a.createHref({pathname:f,search:c,hash:u})}function C(){return null!=h.useContext(x)}function I(){return C()||Object(l.j)(!1),h.useContext(x).location}function N(){C()||Object(l.j)(!1);var e=h.useContext(E),t=e.basename,n=e.navigator,r=h.useContext(S).matches,i=I().pathname,a=JSON.stringify(Object(l.d)(r).map(function(e){return e.pathnameBase})),o=h.useRef(!1);return h.useEffect(function(){o.current=!0}),h.useCallback(function(e,r){if(void 0===r&&(r={}),o.current)if("number"!==typeof e){var u=Object(l.p)(e,JSON.parse(a),i,"path"===r.relative);"/"!==t&&(u.pathname="/"===u.pathname?t:Object(l.l)([t,u.pathname])),(r.replace?n.replace:n.push)(u,r.state,r)}else n.go(e)},[t,n,a,i])}function R(){var e=h.useContext(S).matches,t=e[e.length-1];return t?t.params:{}}function A(e,t){var n=(void 0===t?{}:t).relative,r=h.useContext(S).matches,i=I().pathname,a=JSON.stringify(Object(l.d)(r).map(function(e){return e.pathnameBase}));return h.useMemo(function(){return Object(l.p)(e,JSON.parse(a),i,"path"===n)},[e,a,i,n])}function D(){var e=function(){var e,t=h.useContext(j),n=V(P.UseRouteError),r=z(P.UseRouteError);if(t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=Object(l.k)(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},i={padding:"2px 4px",backgroundColor:"rgba(200,200,200, 0.5)"};return h.createElement(h.Fragment,null,h.createElement("h2",null,"Unhandled Thrown Error!"),h.createElement("h3",{style:{fontStyle:"italic"}},t),n?h.createElement("pre",{style:r},n):null,h.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),h.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own\xa0",h.createElement("code",{style:i},"errorElement")," props on\xa0",h.createElement("code",{style:i},"<Route>")))}var L,P,M=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={location:e.location,error:e.error},n}return Object(s.a)(t,e),Object(a.a)(t,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?h.createElement(S.Provider,{value:this.props.routeContext},h.createElement(j.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location?{error:e.error,location:e.location}:{error:e.error||t.error,location:t.location}}}]),t}(h.Component);function F(e){var t=e.routeContext,n=e.match,r=e.children,i=h.useContext(k);return i&&n.route.errorElement&&(i._deepestRenderedBoundaryId=n.route.id),h.createElement(S.Provider,{value:t},r)}function U(e,t,n){if(void 0===t&&(t=[]),null==e){if(null==n||!n.errors)return null;e=n.matches}var r=e,i=null==n?void 0:n.errors;if(null!=i){var a=r.findIndex(function(e){return e.route.id&&(null==i?void 0:i[e.route.id])});a>=0||Object(l.j)(!1),r=r.slice(0,Math.min(r.length,a+1))}return r.reduceRight(function(e,a,o){var u=a.route.id?null==i?void 0:i[a.route.id]:null,s=n?a.route.errorElement||h.createElement(D,null):null,c=t.concat(r.slice(0,o+1)),l=function(){return h.createElement(F,{match:a,routeContext:{outlet:e,matches:c}},u?s:void 0!==a.route.element?a.route.element:e)};return n&&(a.route.errorElement||0===o)?h.createElement(M,{location:n.location,component:s,error:u,children:l(),routeContext:{outlet:null,matches:c}}):l()},null)}function V(e){var t=h.useContext(_);return t||Object(l.j)(!1),t}function z(e){var t=function(e){var t=h.useContext(S);return t||Object(l.j)(!1),t}(),n=t.matches[t.matches.length-1];return n.route.id||Object(l.j)(!1),n.route.id}function q(){return V(P.UseNavigation).navigation}function B(){var e=V(P.UseMatches),t=e.matches,n=e.loaderData;return h.useMemo(function(){return t.map(function(e){var t=e.pathname,r=e.params;return{id:e.route.id,pathname:t,params:r,data:n[e.route.id],handle:e.route.handle}})},[t,n])}!function(e){e.UseRevalidator="useRevalidator"}(L||(L={})),function(e){e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator"}(P||(P={}));var W;function H(e){Object(l.j)(!1)}function G(e){var t=e.basename,n=void 0===t?"/":t,r=e.children,i=void 0===r?null:r,a=e.location,o=e.navigationType,u=void 0===o?l.b.Pop:o,s=e.navigator,c=e.static,f=void 0!==c&&c;C()&&Object(l.j)(!1);var d=n.replace(/^\/*/,"/"),p=h.useMemo(function(){return{basename:d,navigator:s,static:f}},[d,s,f]);"string"===typeof a&&(a=Object(l.o)(a));var v=a,y=v.pathname,m=void 0===y?"/":y,g=v.search,b=void 0===g?"":g,k=v.hash,w=void 0===k?"":k,_=v.state,O=void 0===_?null:_,S=v.key,j=void 0===S?"default":S,T=h.useMemo(function(){var e=Object(l.q)(m,d);return null==e?null:{pathname:e,search:b,hash:w,state:O,key:j}},[d,m,b,w,O,j]);return null==T?null:h.createElement(E.Provider,{value:p},h.createElement(x.Provider,{children:i,value:{location:T,navigationType:u}}))}function K(e){var t=e.children,n=e.location,i=h.useContext(w);return function(e,t){C()||Object(l.j)(!1);var n,r=h.useContext(E).navigator,i=h.useContext(_),a=h.useContext(S).matches,o=a[a.length-1],u=o?o.params:{},s=(o&&o.pathname,o?o.pathnameBase:"/"),c=(o&&o.route,I());if(t){var d,p="string"===typeof t?Object(l.o)(t):t;"/"===s||null!=(d=p.pathname)&&d.startsWith(s)||Object(l.j)(!1),n=p}else n=c;var v=n.pathname||"/",y="/"===s?v:v.slice(s.length)||"/",m=Object(l.n)(e,{pathname:y}),g=U(m&&m.map(function(e){return Object.assign({},e,{params:Object.assign({},u,e.params),pathname:Object(l.l)([s,r.encodeLocation?r.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?s:Object(l.l)([s,r.encodeLocation?r.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})}),a,i||void 0);return t&&g?h.createElement(x.Provider,{value:{location:f({pathname:"/",search:"",hash:"",state:null,key:"default"},n),navigationType:l.b.Pop}},g):g}(i&&!t?i.router.routes:function e(t,n){void 0===n&&(n=[]);var i=[];h.Children.forEach(t,function(t,a){if(h.isValidElement(t))if(t.type!==h.Fragment){t.type!==H&&Object(l.j)(!1),t.props.index&&t.props.children&&Object(l.j)(!1);var o=[].concat(Object(r.a)(n),[a]),u={id:t.props.id||o.join("-"),caseSensitive:t.props.caseSensitive,element:t.props.element,index:t.props.index,path:t.props.path,loader:t.props.loader,action:t.props.action,errorElement:t.props.errorElement,hasErrorBoundary:null!=t.props.errorElement,shouldRevalidate:t.props.shouldRevalidate,handle:t.props.handle};t.props.children&&(u.children=e(t.props.children,o)),i.push(u)}else i.push.apply(i,e(t.props.children,n))});return i}(t),n)}!function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"}(W||(W={}));var Q=new Promise(function(){});h.Component;function Y(e){return e.map(function(e){var t=f({},e);return null==t.hasErrorBoundary&&(t.hasErrorBoundary=null!=t.errorElement),t.children&&(t.children=Y(t.children)),t})}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";function r(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise(function(i,a){var o=e.apply(t,n);function u(e){r(o,i,a,u,s,"next",e)}function s(e){r(o,i,a,u,s,"throw",e)}u(void 0)})}}n.d(t,"a",function(){return i})},function(e,t,n){"use strict";e.exports=n(38)},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.d(t,"a",function(){return i})},function(e,t,n){"use strict";(function(e,r){n.d(t,"a",function(){return F}),n.d(t,"b",function(){return q}),n.d(t,"c",function(){return z}),n.d(t,"d",function(){return ie}),n.d(t,"e",function(){return v}),n.d(t,"f",function(){return y}),n.d(t,"g",function(){return g}),n.d(t,"h",function(){return w}),n.d(t,"i",function(){return b}),n.d(t,"j",function(){return k}),n.d(t,"k",function(){return Y}),n.d(t,"l",function(){return U}),n.d(t,"m",function(){return ae}),n.d(t,"n",function(){return _}),n.d(t,"o",function(){return Z}),n.d(t,"p",function(){return se}),n.d(t,"q",function(){return re}),n.d(t,"r",function(){return P}),n.d(t,"s",function(){return D}),n.d(t,"t",function(){return L}),n.d(t,"u",function(){return M}),n.d(t,"v",function(){return he}),n.d(t,"w",function(){return O}),n.d(t,"x",function(){return Q}),n.d(t,"y",function(){return x}),n.d(t,"z",function(){return X}),n.d(t,"A",function(){return j}),n.d(t,"B",function(){return I}),n.d(t,"C",function(){return E}),n.d(t,"D",function(){return T}),n.d(t,"E",function(){return S}),n.d(t,"F",function(){return C}),n.d(t,"G",function(){return K}),n.d(t,"H",function(){return W}),n.d(t,"I",function(){return J}),n.d(t,"J",function(){return te}),n.d(t,"K",function(){return ne}),n.d(t,"L",function(){return $}),n.d(t,"M",function(){return le}),n.d(t,"N",function(){return ce}),n.d(t,"O",function(){return H}),n.d(t,"P",function(){return N});var i=n(8),a=n(10),o=n(7),u=n(9),s=n(18),c=n(31),l=n(1),h=n(4);function f(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var p={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},v=function(e,t){if(!e)throw y(t)},y=function(e){return new Error("Firebase Database ("+p.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)},m=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},g={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,h=(3&a)<<4|u>>4,f=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(f=64)),r.push(n[l],n[h],n[f],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(m(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var h=u<<6&192|s;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},b=function(e){var t=m(e);return g.encodeByteArray(t,!0)},k=function(e){return b(e).replace(/\./g,"")},w=function(e){try{return g.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function _(e){return function e(t,n){if(!(n instanceof Object))return n;switch(n.constructor){case Date:var r=n;return new Date(r.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return n}for(var i in n)n.hasOwnProperty(i)&&"__proto__"!==i&&(t[i]=e(t[i],n[i]));return t}(void 0,e)}function O(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function E(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(O())}function x(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function S(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function j(){var e=O();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function T(){return!0===p.NODE_CLIENT||!0===p.NODE_ADMIN}function C(){return!function(){try{return"[object process]"===Object.prototype.toString.call(e.process)}catch(t){return!1}}()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function I(){try{return"object"===typeof indexedDB}catch(e){return!1}}function N(){return new Promise(function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})}var R=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof e)return e;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},A=function(){try{return R()||function(){if("undefined"!==typeof r){var e=Object({NODE_ENV:"production",PUBLIC_URL:"/base-management"}).__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&w(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},D=function(e){var t,n;return null===(n=null===(t=A())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},L=function(e){var t=D(e);if(t){var n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));var r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]}},P=function(){var e;return null===(e=A())||void 0===e?void 0:e.config},M=function(e){var t;return null===(t=A())||void 0===t?void 0:t["_".concat(e)]},F=function(){function e(){var t=this;Object(l.a)(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return Object(h.a)(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch(function(){}),1===e.length?e(n):e(n,r))}}}]),e}();function U(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[k(JSON.stringify({alg:"none",type:"JWT"})),k(JSON.stringify(a)),""].join(".")}var V="FirebaseError",z=function(e){function t(e,n,r){var i;return Object(l.a)(this,t),(i=Object(a.a)(this,Object(o.a)(t).call(this,n))).code=e,i.customData=r,i.name=V,Object.setPrototypeOf(Object(s.a)(Object(s.a)(i)),t.prototype),Error.captureStackTrace&&Error.captureStackTrace(Object(s.a)(Object(s.a)(i)),q.prototype.create),i}return Object(u.a)(t,e),t}(Object(c.a)(Error)),q=function(){function e(t,n,r){Object(l.a)(this,e),this.service=t,this.serviceName=n,this.errors=r}return Object(h.a)(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(B,function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new z(n,a,t)}}]),e}();var B=/\{\$([^}]+)}/g;function W(e){return JSON.parse(e)}function H(e){return JSON.stringify(e)}var G=function(e){var t={},n={},r={},i="";try{var a=e.split(".");t=W(w(a[0])||""),n=W(w(a[1])||""),i=a[2],r=n.d||{},delete n.d}catch(o){}return{header:t,claims:n,data:r,signature:i}},K=function(e){var t=G(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")},Q=function(e){var t=G(e).claims;return"object"===typeof t&&!0===t.admin};function Y(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function $(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function X(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function J(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function Z(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(ee(u)&&ee(s)){if(!Z(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var h=l[c];if(!n.includes(h))return!1}return!0}function ee(e){return null!==e&&"object"===typeof e}function te(e){for(var t=[],n=function(){var e=Object(i.a)(a[r],2),n=e[0],o=e[1];Array.isArray(o)?o.forEach(function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(o))},r=0,a=Object.entries(e);r<a.length;r++)n();return t.length?"&"+t.join("&"):""}function ne(e){var t={};return e.replace(/^\?/,"").split("&").forEach(function(e){if(e){var n=e.split("="),r=Object(i.a)(n,2),a=r[0],o=r[1];t[decodeURIComponent(a)]=decodeURIComponent(o)}}),t}function re(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}var ie=function(){function e(){Object(l.a)(this,e),this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return Object(h.a)(e,[{key:"reset",value:function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}},{key:"compress_",value:function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(var i=0;i<16;i++)n[i]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(var a=16;a<80;a++){var o=n[a-3]^n[a-8]^n[a-14]^n[a-16];n[a]=4294967295&(o<<1|o>>>31)}for(var u,s,c=this.chain_[0],l=this.chain_[1],h=this.chain_[2],f=this.chain_[3],d=this.chain_[4],p=0;p<80;p++){p<40?p<20?(u=f^l&(h^f),s=1518500249):(u=l^h^f,s=1859775393):p<60?(u=l&h|f&(l|h),s=2400959708):(u=l^h^f,s=3395469782);var v=(c<<5|c>>>27)+u+d+s+n[p]&4294967295;d=f,f=h,h=4294967295&(l<<30|l>>>2),l=c,c=v}this.chain_[0]=this.chain_[0]+c&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+h&4294967295,this.chain_[3]=this.chain_[3]+f&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295}},{key:"update",value:function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,a=this.inbuf_;r<t;){if(0===a)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[a]=e.charCodeAt(r),++r,++a===this.blockSize){this.compress_(i),a=0;break}}else for(;r<t;)if(i[a]=e[r],++r,++a===this.blockSize){this.compress_(i),a=0;break}}this.inbuf_=a,this.total_+=t}}},{key:"digest",value:function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);for(var r=0,i=0;i<5;i++)for(var a=24;a>=0;a-=8)e[r]=this.chain_[i]>>a&255,++r;return e}}]),e}();function ae(e,t){var n=new oe(e,t);return n.subscribe.bind(n)}var oe=function(){function e(t,n){var r=this;Object(l.a)(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(function(){t(r)}).catch(function(e){r.error(e)})}return Object(h.a)(e,[{key:"next",value:function(e){this.forEachObserver(function(t){t.next(e)})}},{key:"error",value:function(e){this.forEachObserver(function(t){t.error(e)}),this.close(e)}},{key:"complete",value:function(){this.forEachObserver(function(e){e.complete()}),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=f(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=ue),void 0===r.error&&(r.error=ue),void 0===r.complete&&(r.complete=ue);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}}),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}})}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(function(){t.observers=void 0,t.onNoObservers=void 0}))}}]),e}();function ue(){}function se(e,t){return"".concat(e," failed: ").concat(t," argument ")}var ce=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;v(++r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},le=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function he(e){return e&&e._delegate?e._delegate:e}}).call(this,n(24),n(25))},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";var r=n(26);var i=n(27);function a(e,t){return Object(r.a)(e)||function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(s){i=!0,a=s}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}return n}(e,t)||Object(i.a)()}n.d(t,"a",function(){return a})},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(23);function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Object(r.a)(e,t)}},function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return(i="function"===typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}var a=n(18);function o(e,t){return!t||"object"!==i(t)&&"function"!==typeof t?Object(a.a)(e):t}n.d(t,"a",function(){return o})},function(e,t,n){"use strict";var r=n(2),i=n(6),a=n(4),o=n(1),u=n(10),s=n(7),c=n(9),l=n(31),h=n(8),f=n(26),d=n(28),p=n(27);var v,y=n(13);function m(){m=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(C){s=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var a=t&&t.prototype instanceof f?t:f,o=Object.create(a.prototype),u=new S(i||[]);return r(o,"_invoke",{value:_(e,n,u)}),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=c;var h={};function f(){}function d(){}function p(){}var v={};s(v,a,function(){return this});var y=Object.getPrototypeOf,g=y&&y(y(j([])));g&&g!==t&&n.call(g,a)&&(v=g);var b=p.prototype=f.prototype=Object.create(v);function k(e){["next","throw","return"].forEach(function(t){s(e,t,function(e){return this._invoke(t,e)})})}function w(e,t){var i;r(this,"_invoke",{value:function(r,a){function o(){return new t(function(i,o){!function r(i,a,o,u){var s=l(e[i],e,a);if("throw"!==s.type){var c=s.arg,h=c.value;return h&&"object"==typeof h&&n.call(h,"__await")?t.resolve(h.__await).then(function(e){r("next",e,o,u)},function(e){r("throw",e,o,u)}):t.resolve(h).then(function(e){c.value=e,o(c)},function(e){return r("throw",e,o,u)})}u(s.arg)}(r,a,i,o)})}return i=i?i.then(o,o):o()}})}function _(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return T()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=O(o,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===h)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function O(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=l(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,h;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function j(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:T}}function T(){return{value:void 0,done:!0}}return d.prototype=p,r(b,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:d,configurable:!0}),d.displayName=s(p,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,u,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},k(w.prototype),s(w.prototype,o,function(){return this}),e.AsyncIterator=w,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new w(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then(function(e){return e.done?e.value:o.next()})},k(b),s(b,u,"Generator"),s(b,a,function(){return this}),s(b,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=j,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:j(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},e}function g(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function k(){return(k=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}n.d(t,"a",function(){return ne}),n.d(t,"b",function(){return v}),n.d(t,"c",function(){return ie}),n.d(t,"d",function(){return $}),n.d(t,"e",function(){return E}),n.d(t,"f",function(){return x}),n.d(t,"g",function(){return O}),n.d(t,"h",function(){return I}),n.d(t,"i",function(){return ve}),n.d(t,"j",function(){return S}),n.d(t,"k",function(){return ae}),n.d(t,"l",function(){return J}),n.d(t,"m",function(){return H}),n.d(t,"n",function(){return L}),n.d(t,"o",function(){return N}),n.d(t,"p",function(){return X}),n.d(t,"q",function(){return K}),function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(v||(v={}));var w,_="popstate";function O(e){void 0===e&&(e={});var t,n=e,r=n.initialEntries,i=void 0===r?["/"]:r,a=n.initialIndex,o=n.v5Compat,u=void 0!==o&&o;t=i.map(function(e,t){return d(e,"string"===typeof e?null:e.state,0===t?"default":void 0)});var s=h(null==a?t.length-1:a),c=v.Pop,l=null;function h(e){return Math.min(Math.max(e,0),t.length-1)}function f(){return t[s]}function d(e,n,r){void 0===n&&(n=null);var i=C(t?f().pathname:"/",e,n,r);return j("/"===i.pathname.charAt(0),"relative pathnames are not supported in memory history: "+JSON.stringify(e)),i}return{get index(){return s},get action(){return c},get location(){return f()},createHref:function(e){return"string"===typeof e?e:I(e)},encodeLocation:function(e){var t="string"===typeof e?N(e):e;return{pathname:t.pathname||"",search:t.search||"",hash:t.hash||""}},push:function(e,n){c=v.Push;var r=d(e,n);s+=1,t.splice(s,t.length,r),u&&l&&l({action:c,location:r})},replace:function(e,n){c=v.Replace;var r=d(e,n);t[s]=r,u&&l&&l({action:c,location:r})},go:function(e){c=v.Pop,s=h(s+e),l&&l({action:c,location:f()})},listen:function(e){return l=e,function(){l=null}}}}function E(e){return void 0===e&&(e={}),A(function(e,t){var n=e.location;return C("",{pathname:n.pathname,search:n.search,hash:n.hash},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:I(t)},null,e)}function x(e){return void 0===e&&(e={}),A(function(e,t){var n=N(e.location.hash.substr(1)),r=n.pathname,i=void 0===r?"/":r,a=n.search,o=void 0===a?"":a,u=n.hash;return C("",{pathname:i,search:o,hash:void 0===u?"":u},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){var n=e.document.querySelector("base"),r="";if(n&&n.getAttribute("href")){var i=e.location.href,a=i.indexOf("#");r=-1===a?i:i.slice(0,a)}return r+"#"+("string"===typeof t?t:I(t))},function(e,t){j("/"===e.pathname.charAt(0),"relative pathnames are not supported in hash history.push("+JSON.stringify(t)+")")},e)}function S(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function j(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function T(e){return{usr:e.state,key:e.key}}function C(e,t,n,r){return void 0===n&&(n=null),k({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?N(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function I(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function N(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function R(e){var t="undefined"!==typeof window&&"undefined"!==typeof window.location&&"null"!==window.location.origin?window.location.origin:window.location.href,n="string"===typeof e?e:I(e);return S(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}function A(e,t,n,r){void 0===r&&(r={});var i=r,a=i.window,o=void 0===a?document.defaultView:a,u=i.v5Compat,s=void 0!==u&&u,c=o.history,l=v.Pop,h=null;function f(){l=v.Pop,h&&h({action:l,location:d.location})}var d={get action(){return l},get location(){return e(o,c)},listen:function(e){if(h)throw new Error("A history only accepts one active listener");return o.addEventListener(_,f),h=e,function(){o.removeEventListener(_,f),h=null}},createHref:function(e){return t(o,e)},encodeLocation:function(e){var t=R("string"===typeof e?e:I(e));return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l=v.Push;var r=C(d.location,e,t);n&&n(r,e);var i=T(r),a=d.createHref(r);try{c.pushState(i,"",a)}catch(u){o.location.assign(a)}s&&h&&h({action:l,location:d.location})},replace:function(e,t){l=v.Replace;var r=C(d.location,e,t);n&&n(r,e);var i=T(r),a=d.createHref(r);c.replaceState(i,"",a),s&&h&&h({action:l,location:d.location})},go:function(e){return c.go(e)}};return d}function D(e,t,n){return void 0===t&&(t=[]),void 0===n&&(n=new Set),e.map(function(e,r){var i=[].concat(Object(y.a)(t),[r]),a="string"===typeof e.id?e.id:i.join("-");return S(!0!==e.index||!e.children,"Cannot specify children on an index route"),S(!n.has(a),'Found a route id collision on id "'+a+"\".  Route id's must be globally unique within Data Router usages"),n.add(a),function(e){return!0===e.index}(e)?k({},e,{id:a}):k({},e,{id:a,children:e.children?D(e.children,i,n):void 0})})}function L(e,t,n){void 0===n&&(n="/");var r=K(("string"===typeof t?N(t):t).pathname||"/",n);if(null==r)return null;var i=function e(t,n,r,i){void 0===n&&(n=[]);void 0===r&&(r=[]);void 0===i&&(i="");var a=function(t,a,o){var u={relativePath:void 0===o?t.path||"":o,caseSensitive:!0===t.caseSensitive,childrenIndex:a,route:t};u.relativePath.startsWith("/")&&(S(u.relativePath.startsWith(i),'Absolute route path "'+u.relativePath+'" nested under path "'+i+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),u.relativePath=u.relativePath.slice(i.length));var s=J([i,u.relativePath]),c=r.concat(u);t.children&&t.children.length>0&&(S(!0!==t.index,'Index routes must not have child routes. Please remove all child routes from route path "'+s+'".'),e(t.children,n,c,s)),(null!=t.path||t.index)&&n.push({path:s,score:B(s,t.index),routesMeta:c})};t.forEach(function(e,t){var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?")){var r,i=g(function e(t){var n=t.split("/");if(0===n.length)return[];var r=(o=n,Object(f.a)(o)||Object(d.a)(o)||Object(p.a)()),i=r[0],a=r.slice(1);var o;var u=i.endsWith("?");var s=i.replace(/\?$/,"");if(0===a.length)return u?[s,""]:[s];var c=e(a.join("/"));var l=[];l.push.apply(l,Object(y.a)(c.map(function(e){return""===e?s:[s,e].join("/")})));u&&l.push.apply(l,Object(y.a)(c));return l.map(function(e){return t.startsWith("/")&&""===e?"/":e})}(e.path));try{for(i.s();!(r=i.n()).done;){var o=r.value;a(e,t,o)}}catch(u){i.e(u)}finally{i.f()}}else a(e,t)});return n}(e);!function(e){e.sort(function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){return e.length===t.length&&e.slice(0,-1).every(function(e,n){return e===t[n]})?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(function(e){return e.childrenIndex}),t.routesMeta.map(function(e){return e.childrenIndex}))})}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=W(i[o],G(r));return a}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(w||(w={}));var P=/^:\w+$/,M=3,F=2,U=1,V=10,z=-2,q=function(e){return"*"===e};function B(e,t){var n=e.split("/"),r=n.length;return n.some(q)&&(r+=z),t&&(r+=F),n.filter(function(e){return!q(e)}).reduce(function(e,t){return e+(P.test(t)?M:""===t?U:V)},r)}function W(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var u=n[o],s=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=H({path:u.relativePath,caseSensitive:u.caseSensitive,end:s},c);if(!l)return null;Object.assign(r,l.params);var h=u.route;a.push({params:r,pathname:J([i,l.pathname]),pathnameBase:Z(J([i,l.pathnameBase])),route:h}),"/"!==l.pathnameBase&&(i=J([i,l.pathnameBase]))}return a}function H(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);Q("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,function(e,t){return r.push(t),"/([^\\/]+)"});e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");return[new RegExp(i,t?void 0:"i"),r]}(e.path,e.caseSensitive,e.end),r=Object(h.a)(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var u=o[0],s=u.replace(/(.)\/+$/,"$1"),c=o.slice(1);return{params:a.reduce(function(e,t,n){if("*"===t){var r=c[n]||"";s=u.slice(0,u.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return Q(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),e}}(c[n]||"",t),e},{}),pathname:u,pathnameBase:s,pattern:e}}function G(e){try{return decodeURI(e)}catch(t){return Q(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function K(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function Q(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function Y(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function $(e){return e.filter(function(e,t){return 0===t||e.route.path&&e.route.path.length>0})}function X(e,t,n,r){var i;void 0===r&&(r=!1),"string"===typeof e?i=N(e):(S(!(i=k({},e)).pathname||!i.pathname.includes("?"),Y("?","pathname","search",i)),S(!i.pathname||!i.pathname.includes("#"),Y("#","pathname","hash",i)),S(!i.search||!i.search.includes("#"),Y("#","search","hash",i)));var a,o=""===e||""===i.pathname,u=o?"/":i.pathname;if(r||null==u)a=n;else{var s=t.length-1;if(u.startsWith("..")){for(var c=u.split("/");".."===c[0];)c.shift(),s-=1;i.pathname=c.join("/")}a=s>=0?t[s]:"/"}var l=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?N(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,u=void 0===o?"":o;return{pathname:r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(r,t):t,search:ee(a),hash:te(u)}}(i,a),h=u&&"/"!==u&&u.endsWith("/"),f=(o||"."===u)&&n.endsWith("/");return l.pathname.endsWith("/")||!h&&!f||(l.pathname+="/"),l}var J=function(e){return e.join("/").replace(/\/\/+/g,"/")},Z=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},ee=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},te=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},ne=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),t}(Object(l.a)(Error)),re=function(){function e(t){var n,r=this;Object(o.a)(this,e),this.pendingKeys=new Set,this.subscriber=void 0,S(t&&"object"===typeof t&&!Array.isArray(t),"defer() only accepts plain objects"),this.abortPromise=new Promise(function(e,t){return n=t}),this.controller=new AbortController;var a=function(){return n(new ne("Deferred data aborted"))};this.unlistenAbortSignal=function(){return r.controller.signal.removeEventListener("abort",a)},this.controller.signal.addEventListener("abort",a),this.data=Object.entries(t).reduce(function(e,t){var n=Object(h.a)(t,2),a=n[0],o=n[1];return Object.assign(e,Object(i.a)({},a,r.trackPromise(a,o)))},{})}return Object(a.a)(e,[{key:"trackPromise",value:function(e,t){var n=this;if(!(t instanceof Promise))return t;this.pendingKeys.add(e);var r=Promise.race([t,this.abortPromise]).then(function(t){return n.onSettle(r,e,null,t)},function(t){return n.onSettle(r,e,t)});return r.catch(function(){}),Object.defineProperty(r,"_tracked",{get:function(){return!0}}),r}},{key:"onSettle",value:function(e,t,n,r){if(this.controller.signal.aborted&&n instanceof ne)return this.unlistenAbortSignal(),Object.defineProperty(e,"_error",{get:function(){return n}}),Promise.reject(n);this.pendingKeys.delete(t),this.done&&this.unlistenAbortSignal();var i=this.subscriber;return n?(Object.defineProperty(e,"_error",{get:function(){return n}}),i&&i(!1),Promise.reject(n)):(Object.defineProperty(e,"_data",{get:function(){return r}}),i&&i(!1),r)}},{key:"subscribe",value:function(e){this.subscriber=e}},{key:"cancel",value:function(){var e=this;this.controller.abort(),this.pendingKeys.forEach(function(t,n){return e.pendingKeys.delete(n)});var t=this.subscriber;t&&t(!0)}},{key:"resolveData",value:function(){var e=Object(r.a)(m().mark(function e(t){var n,r,i=this;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=!1,this.done){e.next=7;break}return r=function(){return i.cancel()},t.addEventListener("abort",r),e.next=6,new Promise(function(e){i.subscribe(function(n){t.removeEventListener("abort",r),(n||i.done)&&e(n)})});case 6:n=e.sent;case 7:return e.abrupt("return",n);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"done",get:function(){return 0===this.pendingKeys.size}},{key:"unwrappedData",get:function(){return S(null!==this.data&&this.done,"Can only unwrap data on initialized and settled deferreds"),Object.entries(this.data).reduce(function(e,t){var n=Object(h.a)(t,2),r=n[0],a=n[1];return Object.assign(e,Object(i.a)({},r,function(e){if(!function(e){return e instanceof Promise&&!0===e._tracked}(e))return e;if(e._error)throw e._error;return e._data}(a)))},{})}}]),e}();var ie=function e(t,n,r,i){Object(o.a)(this,e),void 0===i&&(i=!1),this.status=t,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r};function ae(e){return e instanceof ie}var oe=["post","put","patch","delete"],ue=new Set(oe),se=["get"].concat(oe),ce=new Set(se),le=new Set([301,302,303,307,308]),he=new Set([307,308]),fe={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},de={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},pe=!("undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement);function ve(e){S(e.routes.length>0,"You must provide a non-empty routes array to createRouter");var t=D(e.routes),n=null,a=new Set,o=null,u=null,s=null,c=null!=e.hydrationData,l=L(t,e.history.location,e.basename),f=null;if(null==l){var d=Ie(404,{pathname:e.history.location.pathname}),p=Ce(t),b=p.matches,_=p.route;l=b,f=Object(i.a)({},_.id,d)}var O,E,x=!l.some(function(e){return e.route.loader})||null!=e.hydrationData,j={historyAction:e.history.action,location:e.history.location,matches:l,initialized:x,navigation:fe,restoreScrollPosition:null==e.hydrationData&&null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||f,fetchers:new Map},T=v.Pop,I=!1,N=!1,A=!1,P=[],M=[],F=new Map,U=0,V=-1,z=new Map,q=new Set,B=new Map,W=new Map;function H(e){j=k({},j,e),a.forEach(function(e){return e(j)})}function G(t,n){var r,i=null!=j.actionData&&null!=j.navigation.formMethod&&"loading"===j.navigation.state&&(null==(r=j.navigation.formAction)?void 0:r.split("?")[0])===t.pathname;H(k({},n,{actionData:n.actionData?Object.keys(n.actionData).length>0?n.actionData:null:i?j.actionData:null,loaderData:n.loaderData?je(j.loaderData,n.loaderData,n.matches||[],n.errors):j.loaderData,historyAction:T,location:t,initialized:!0,navigation:fe,revalidation:"idle",restoreScrollPosition:!j.navigation.formData&&Ee(t,n.matches||j.matches),preventScrollReset:I})),N||T===v.Pop||(T===v.Push?e.history.push(t,t.state):T===v.Replace&&e.history.replace(t,t.state)),T=v.Pop,I=!1,N=!1,A=!1,P=[],M=[]}function K(){return(K=Object(r.a)(m().mark(function t(n,r){var i,a,o,u,s,c,l,h;return m().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("number"!==typeof n){t.next=3;break}return e.history.go(n),t.abrupt("return");case 3:return i=ye(n,r),a=i.path,o=i.submission,u=i.error,s=k({},s=C(j.location,a,r&&r.state),e.history.encodeLocation(s)),c=r&&null!=r.replace?r.replace:void 0,l=v.Push,!0===c?l=v.Replace:!1===c||null!=o&&Fe(o.formMethod)&&o.formAction===j.location.pathname+j.location.search&&(l=v.Replace),h=r&&"preventScrollReset"in r?!0===r.preventScrollReset:void 0,t.next=12,Q(l,s,{submission:o,pendingError:u,preventScrollReset:h,replace:r&&r.replace});case 12:return t.abrupt("return",t.sent);case 13:case"end":return t.stop()}},t)}))).apply(this,arguments)}function Q(e,t,n){return Y.apply(this,arguments)}function Y(){return(Y=Object(r.a)(m().mark(function n(r,a,o){var u,s,c,l,h,f,d,p,v,y,g,b,w,_,O;return m().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(E&&E.abort(),E=null,T=r,N=!0===(o&&o.startUninterruptedRevalidation),_e(j.location,j.matches),I=!0===(o&&o.preventScrollReset),u=o&&o.overrideNavigation,s=L(t,a,e.basename)){n.next=14;break}return c=Ie(404,{pathname:a.pathname}),l=Ce(t),h=l.matches,f=l.route,ke(),G(a,{matches:h,loaderData:{},errors:Object(i.a)({},f.id,c)}),n.abrupt("return");case 14:if(m=j.location,x=a,m.pathname!==x.pathname||m.search!==x.search||m.hash===x.hash){n.next=17;break}return G(a,{matches:s}),n.abrupt("return");case 17:if(E=new AbortController,d=Oe(a,E.signal,o&&o.submission),!o||!o.pendingError){n.next=23;break}v=Object(i.a)({},Te(s).route.id,o.pendingError),n.next=34;break;case 23:if(!(o&&o.submission&&Fe(o.submission.formMethod))){n.next=34;break}return n.next=26,$(d,a,o.submission,s,{replace:o.replace});case 26:if(!(y=n.sent).shortCircuited){n.next=29;break}return n.abrupt("return");case 29:p=y.pendingActionData,v=y.pendingActionError,g=k({state:"loading",location:a},o.submission),u=g,d=new Request(d.url,{signal:d.signal});case 34:return n.next=36,J(d,a,s,u,o&&o.submission,o&&o.replace,p,v);case 36:if(b=n.sent,w=b.shortCircuited,_=b.loaderData,O=b.errors,!w){n.next=42;break}return n.abrupt("return");case 42:E=null,G(a,k({matches:s},p?{actionData:p}:{},{loaderData:_,errors:O}));case 44:case"end":return n.stop()}var m,x},n)}))).apply(this,arguments)}function $(e,t,n,r,i){return X.apply(this,arguments)}function X(){return(X=Object(r.a)(m().mark(function e(t,n,r,a,o){var u,s,c,l;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(ue(),H({navigation:k({state:"submitting",location:n},r)}),(s=He(a,n)).route.action){e.next=8;break}u={type:w.error,error:Ie(405,{method:t.method,pathname:n.pathname,routeId:s.route.id})},e.next=13;break;case 8:return e.next=10,we("action",t,s,a,O.basename);case 10:if(u=e.sent,!t.signal.aborted){e.next=13;break}return e.abrupt("return",{shortCircuited:!0});case 13:if(!Le(u)){e.next=18;break}return c=o&&null!=o.replace?o.replace:u.location===j.location.pathname+j.location.search,e.next=17,re(j,u,c);case 17:return e.abrupt("return",{shortCircuited:!0});case 18:if(!De(u)){e.next=22;break}return l=Te(a,s.route.id),!0!==(o&&o.replace)&&(T=v.Push),e.abrupt("return",{pendingActionData:{},pendingActionError:Object(i.a)({},l.route.id,u.error)});case 22:if(!Ae(u)){e.next=24;break}throw new Error("defer() is not supported in actions");case 24:return e.abrupt("return",{pendingActionData:Object(i.a)({},s.route.id,u.data)});case 25:case"end":return e.stop()}},e)}))).apply(this,arguments)}function J(e,t,n,r,i,a,o,u){return Z.apply(this,arguments)}function Z(){return(Z=Object(r.a)(m().mark(function e(t,n,r,i,a,o,u,s){var c,l,f,d,p,v,y,g,b,w,_,O,x,S,T,C;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((c=i)||(l=k({state:"loading",location:n,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},a),c=l),f=ge(j,r,a,n,A,P,M,u,s,B),d=Object(h.a)(f,2),p=d[0],v=d[1],ke(function(e){return!(r&&r.some(function(t){return t.route.id===e}))||p&&p.some(function(t){return t.route.id===e})}),0!==p.length||0!==v.length){e.next=7;break}return G(n,k({matches:r,loaderData:{},errors:s||null},u?{actionData:u}:{})),e.abrupt("return",{shortCircuited:!0});case 7:return N||(v.forEach(function(e){var t=Object(h.a)(e,1)[0],n=j.fetchers.get(t),r={state:"loading",data:n&&n.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};j.fetchers.set(t,r)}),y=u||j.actionData,H(k({navigation:c},y?0===Object.keys(y).length?{actionData:null}:{actionData:y}:{},v.length>0?{fetchers:new Map(j.fetchers)}:{}))),V=++U,v.forEach(function(e){var t=Object(h.a)(e,1)[0];return F.set(t,E)}),e.next=12,ae(j.matches,r,p,v,t);case 12:if(g=e.sent,b=g.results,w=g.loaderResults,_=g.fetcherResults,!t.signal.aborted){e.next=18;break}return e.abrupt("return",{shortCircuited:!0});case 18:if(v.forEach(function(e){var t=Object(h.a)(e,1)[0];return F.delete(t)}),!(O=Ne(b))){e.next=24;break}return e.next=23,re(j,O,o);case 23:return e.abrupt("return",{shortCircuited:!0});case 24:return x=Se(j,r,p,w,s,v,_,W),S=x.loaderData,T=x.errors,W.forEach(function(e,t){e.subscribe(function(n){(n||e.done)&&W.delete(t)})}),me(),C=be(V),e.abrupt("return",k({loaderData:S,errors:T},C||v.length>0?{fetchers:new Map(j.fetchers)}:{}));case 29:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ee(e){return j.fetchers.get(e)||de}function te(){return(te=Object(r.a)(m().mark(function n(r,a,o,u,s,c){var l,f,d,p,v,y,g,b,w,_,x,C,I,N,R,D,K,Q,Y,$,X,J,Z,ee,te,ne;return m().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(ue(),B.delete(r),u.route.action){n.next=6;break}return l=Ie(405,{method:c.formMethod,pathname:o,routeId:a}),se(r,a,l),n.abrupt("return");case 6:return f=j.fetchers.get(r),d=k({state:"submitting"},c,{data:f&&f.data," _hasFetcherDoneAnything ":!0}),j.fetchers.set(r,d),H({fetchers:new Map(j.fetchers)}),p=new AbortController,v=Oe(o,p.signal,c),F.set(r,p),n.next=15,we("action",v,u,s,O.basename);case 15:if(y=n.sent,!v.signal.aborted){n.next=19;break}return F.get(r)===p&&F.delete(r),n.abrupt("return");case 19:if(!Le(y)){n.next=26;break}return F.delete(r),q.add(r),g=k({state:"loading"},c,{data:void 0," _hasFetcherDoneAnything ":!0}),j.fetchers.set(r,g),H({fetchers:new Map(j.fetchers)}),n.abrupt("return",re(j,y,!1,!0));case 26:if(!De(y)){n.next=29;break}return se(r,a,y.error),n.abrupt("return");case 29:return Ae(y)&&S(!1,"defer() is not supported in actions"),b=j.navigation.location||j.location,w=Oe(b,p.signal),S(_="idle"!==j.navigation.state?L(t,j.navigation.location,e.basename):j.matches,"Didn't find any matches after fetcher action"),x=++U,z.set(r,x),C=k({state:"loading",data:y.data},c,{" _hasFetcherDoneAnything ":!0}),j.fetchers.set(r,C),I=ge(j,_,c,b,A,P,M,Object(i.a)({},u.route.id,y.data),void 0,B),N=Object(h.a)(I,2),R=N[0],(D=N[1]).filter(function(e){return Object(h.a)(e,1)[0]!==r}).forEach(function(e){var t=Object(h.a)(e,1)[0],n=j.fetchers.get(t),r={state:"loading",data:n&&n.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};j.fetchers.set(t,r),F.set(t,p)}),H({fetchers:new Map(j.fetchers)}),n.next=43,ae(j.matches,_,R,D,w);case 43:if(K=n.sent,Q=K.results,Y=K.loaderResults,$=K.fetcherResults,!p.signal.aborted){n.next=49;break}return n.abrupt("return");case 49:if(z.delete(r),F.delete(r),D.forEach(function(e){var t=Object(h.a)(e,1)[0];return F.delete(t)}),!(X=Ne(Q))){n.next=55;break}return n.abrupt("return",re(j,X));case 55:J=Se(j,j.matches,R,Y,void 0,D,$,W),Z=J.loaderData,ee=J.errors,te={state:"idle",data:y.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0},j.fetchers.set(r,te),ne=be(x),"loading"===j.navigation.state&&x>V?(S(T,"Expected pending action"),E&&E.abort(),G(j.navigation.location,{matches:_,loaderData:Z,errors:ee,fetchers:new Map(j.fetchers)})):(H(k({errors:ee,loaderData:je(j.loaderData,Z,_,ee)},ne?{fetchers:new Map(j.fetchers)}:{})),A=!1);case 60:case"end":return n.stop()}},n)}))).apply(this,arguments)}function ne(){return(ne=Object(r.a)(m().mark(function e(t,n,r,a,o,u){var s,c,l,h,f,d,p;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=j.fetchers.get(t),c=k({state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},u,{data:s&&s.data," _hasFetcherDoneAnything ":!0}),j.fetchers.set(t,c),H({fetchers:new Map(j.fetchers)}),l=new AbortController,h=Oe(r,l.signal),F.set(t,l),e.next=9,we("loader",h,a,o,O.basename);case 9:if(!Ae(f=e.sent)){e.next=17;break}return e.next=13,ze(f,h.signal,!0);case 13:if(e.t0=e.sent,e.t0){e.next=16;break}e.t0=f;case 16:f=e.t0;case 17:if(F.get(t)===l&&F.delete(t),!h.signal.aborted){e.next=20;break}return e.abrupt("return");case 20:if(!Le(f)){e.next=24;break}return e.next=23,re(j,f);case 23:return e.abrupt("return");case 24:if(!De(f)){e.next=29;break}return d=Te(j.matches,n),j.fetchers.delete(t),H({fetchers:new Map(j.fetchers),errors:Object(i.a)({},d.route.id,f.error)}),e.abrupt("return");case 29:S(!Ae(f),"Unhandled fetcher deferred data"),p={state:"idle",data:f.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0},j.fetchers.set(t,p),H({fetchers:new Map(j.fetchers)});case 33:case"end":return e.stop()}},e)}))).apply(this,arguments)}function re(e,t,n,r){return ie.apply(this,arguments)}function ie(){return(ie=Object(r.a)(m().mark(function e(t,n,r,i){var a,o,u,s,c,l,h,f,d;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.revalidate&&(A=!0),S(o=C(t.location,n.location,k({_isRedirect:!0},i?{_isFetchActionRedirect:!0}:{})),"Expected a location on the redirect navigation"),"undefined"===typeof(null==(a=window)?void 0:a.location)){e.next=8;break}if(u=R(n.location).origin,window.location.origin===u){e.next=8;break}return r?window.location.replace(n.location):window.location.assign(n.location),e.abrupt("return");case 8:if(E=null,s=!0===r?v.Replace:v.Push,c=t.navigation,l=c.formMethod,h=c.formAction,f=c.formEncType,d=c.formData,!(he.has(n.status)&&l&&Fe(l)&&f&&d)){e.next=16;break}return e.next=14,Q(s,o,{submission:{formMethod:l,formAction:n.location,formEncType:f,formData:d}});case 14:e.next=18;break;case 16:return e.next=18,Q(s,o,{overrideNavigation:{state:"loading",location:o,formMethod:l||void 0,formAction:h||void 0,formEncType:f||void 0,formData:d||void 0}});case 18:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ae(e,t,n,r,i){return oe.apply(this,arguments)}function oe(){return(oe=Object(r.a)(m().mark(function e(t,n,r,i,a){var o,u,s;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([].concat(Object(y.a)(r.map(function(e){return we("loader",a,e,n,O.basename)})),Object(y.a)(i.map(function(e){var t=Object(h.a)(e,4),n=t[1],r=t[2],i=t[3];return we("loader",Oe(n,a.signal),r,i,O.basename)}))));case 2:return o=e.sent,u=o.slice(0,r.length),s=o.slice(r.length),e.next=7,Promise.all([Ue(t,r,u,a.signal,!1,j.loaderData),Ue(t,i.map(function(e){return Object(h.a)(e,3)[2]}),s,a.signal,!0)]);case 7:return e.abrupt("return",{results:o,loaderResults:u,fetcherResults:s});case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ue(){var e;A=!0,(e=P).push.apply(e,Object(y.a)(ke())),B.forEach(function(e,t){F.has(t)&&(M.push(t),le(t))})}function se(e,t,n){var r=Te(j.matches,t);ce(e),H({errors:Object(i.a)({},r.route.id,n),fetchers:new Map(j.fetchers)})}function ce(e){F.has(e)&&le(e),B.delete(e),z.delete(e),q.delete(e),j.fetchers.delete(e)}function le(e){var t=F.get(e);S(t,"Expected fetch controller: "+e),t.abort(),F.delete(e)}function ve(e){var t,n=g(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i={state:"idle",data:ee(r).data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};j.fetchers.set(r,i)}}catch(a){n.e(a)}finally{n.f()}}function me(){var e,t=[],n=g(q);try{for(n.s();!(e=n.n()).done;){var r=e.value,i=j.fetchers.get(r);S(i,"Expected fetcher: "+r),"loading"===i.state&&(q.delete(r),t.push(r))}}catch(a){n.e(a)}finally{n.f()}ve(t)}function be(e){var t,n=[],r=g(z);try{for(r.s();!(t=r.n()).done;){var i=Object(h.a)(t.value,2),a=i[0];if(i[1]<e){var o=j.fetchers.get(a);S(o,"Expected fetcher: "+a),"loading"===o.state&&(le(a),z.delete(a),n.push(a))}}}catch(u){r.e(u)}finally{r.f()}return ve(n),n.length>0}function ke(e){var t=[];return W.forEach(function(n,r){e&&!e(r)||(n.cancel(),t.push(r),W.delete(r))}),t}function _e(e,t){if(o&&u&&s){var n=t.map(function(e){return We(e,j.loaderData)}),r=u(e,n)||e.key;o[r]=s()}}function Ee(e,t){if(o&&u&&s){var n=t.map(function(e){return We(e,j.loaderData)}),r=u(e,n)||e.key,i=o[r];if("number"===typeof i)return i}return null}return O={get basename(){return e.basename},get state(){return j},get routes(){return t},initialize:function(){return n=e.history.listen(function(e){return Q(e.action,e.location)}),j.initialized||Q(v.Pop,j.location),O},subscribe:function(e){return a.add(e),function(){return a.delete(e)}},enableScrollRestoration:function(e,t,n){if(o=e,s=t,u=n||function(e){return e.key},!c&&j.navigation===fe){c=!0;var r=Ee(j.location,j.matches);null!=r&&H({restoreScrollPosition:r})}return function(){o=null,s=null,u=null}},navigate:function(e,t){return K.apply(this,arguments)},fetch:function(n,r,i,a){if(pe)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");F.has(n)&&le(n);var o=L(t,i,e.basename);if(o){var u=ye(i,a,!0),s=u.path,c=u.submission,l=He(o,s);c&&Fe(c.formMethod)?function(e,t,n,r,i,a){te.apply(this,arguments)}(n,r,s,l,o,c):(B.set(n,[s,l,o]),function(e,t,n,r,i,a){ne.apply(this,arguments)}(n,r,s,l,o,c))}else se(n,r,Ie(404,{pathname:i}))},revalidate:function(){ue(),H({revalidation:"loading"}),"submitting"!==j.navigation.state&&("idle"!==j.navigation.state?Q(T||j.historyAction,j.navigation.location,{overrideNavigation:j.navigation}):Q(j.historyAction,j.location,{startUninterruptedRevalidation:!0}))},createHref:function(t){return e.history.createHref(t)},encodeLocation:function(t){return e.history.encodeLocation(t)},getFetcher:ee,deleteFetcher:ce,dispose:function(){n&&n(),a.clear(),E&&E.abort(),j.fetchers.forEach(function(e,t){return ce(t)})},_internalFetchControllers:F,_internalActiveDeferreds:W}}function ye(e,t,n){void 0===n&&(n=!1);var r,i="string"===typeof e?e:I(e);if(!t||!function(e){return null!=e&&"formData"in e}(t))return{path:i};if(t.formMethod&&!Me(t.formMethod))return{path:i,error:Ie(405,{method:t.formMethod})};if(t.formData&&Fe((r={formMethod:t.formMethod||"get",formAction:Re(i),formEncType:t&&t.formEncType||"application/x-www-form-urlencoded",formData:t.formData}).formMethod))return{path:i,submission:r};var a=N(i);try{var o=Ee(t.formData);n&&a.search&&Be(a.search)&&o.append("index",""),a.search="?"+o}catch(u){return{path:i,error:Ie(400)}}return{path:I(a),submission:r}}function me(e,t){var n=e;if(t){var r=e.findIndex(function(e){return e.route.id===t});r>=0&&(n=e.slice(0,r))}return n}function ge(e,t,n,r,i,a,o,u,s,c){var l=s?Object.values(s)[0]:u?Object.values(u)[0]:void 0,f=me(t,s?Object.keys(s)[0]:void 0).filter(function(t,o){return null!=t.route.loader&&(function(e,t,n){var r=!t||n.route.id!==t.route.id,i=void 0===e[n.route.id];return r||i}(e.loaderData,e.matches[o],t)||a.some(function(e){return e===t.route.id})||ke(e.location,e.matches[o],n,r,t,i,l))}),d=[];return c&&c.forEach(function(e,t){var r=Object(h.a)(e,3),a=r[0],u=r[1],s=r[2];if(o.includes(t))d.push([t,a,u,s]);else if(i){ke(a,u,n,a,u,i,l)&&d.push([t,a,u,s])}}),[f,d]}function be(e,t){var n=e.route.path;return e.pathname!==t.pathname||n&&n.endsWith("*")&&e.params["*"]!==t.params["*"]}function ke(e,t,n,r,i,a,o){var u=R(e),s=t.params,c=R(r),l=i.params,h=be(t,i)||u.toString()===c.toString()||u.search!==c.search||a;if(i.route.shouldRevalidate){var f=i.route.shouldRevalidate(k({currentUrl:u,currentParams:s,nextUrl:c,nextParams:l},n,{actionResult:o,defaultShouldRevalidate:h}));if("boolean"===typeof f)return f}return h}function we(e,t,n,r,i,a,o,u){return _e.apply(this,arguments)}function _e(){return(_e=Object(r.a)(m().mark(function e(t,n,r,i,a,o,u,s){var c,l,h,f,d,p,v,y,g,b,k,_,O,E;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===a&&(a="/"),void 0===o&&(o=!1),void 0===u&&(u=!1),f=new Promise(function(e,t){return h=t}),d=function(){return h()},n.signal.addEventListener("abort",d),e.prev=6,S(p=r.route[t],"Could not find the "+t+' to run on the "'+r.route.id+'" route'),e.next=11,Promise.race([p({request:n,params:r.params,context:s}),f]);case 11:S(void 0!==(l=e.sent),"You defined "+("action"===t?"an action":"a loader")+' for route "'+r.route.id+"\" but didn't return anything from your `"+t+"` function. Please return a value or `null`."),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(6),c=w.error,l=e.t0;case 19:return e.prev=19,n.signal.removeEventListener("abort",d),e.finish(19);case 22:if(!Pe(l)){e.next=48;break}if(v=l.status,!le.has(v)){e.next=33;break}if(S(y=l.headers.get("Location"),"Redirects returned/thrown from loaders/actions must have a Location header"),/^[a-z+]+:\/\//i.test(y)||y.startsWith("//")||(g=i.slice(0,i.indexOf(r)+1),b=$(g).map(function(e){return e.pathnameBase}),S(I(k=X(y,b,new URL(n.url).pathname)),"Unable to resolve redirect location: "+y),a&&(_=k.pathname,k.pathname="/"===_?a:J([a,_])),y=I(k)),!o){e.next=32;break}throw l.headers.set("Location",y),l;case 32:return e.abrupt("return",{type:w.redirect,status:v,location:y,revalidate:null!==l.headers.get("X-Remix-Revalidate")});case 33:if(!u){e.next=35;break}throw{type:c||w.data,response:l};case 35:if(!(E=l.headers.get("Content-Type"))||!/\bapplication\/json\b/.test(E)){e.next=42;break}return e.next=39,l.json();case 39:O=e.sent,e.next=45;break;case 42:return e.next=44,l.text();case 44:O=e.sent;case 45:if(c!==w.error){e.next=47;break}return e.abrupt("return",{type:c,error:new ie(v,l.statusText,O),headers:l.headers});case 47:return e.abrupt("return",{type:w.data,data:O,statusCode:l.status,headers:l.headers});case 48:if(c!==w.error){e.next=50;break}return e.abrupt("return",{type:c,error:l});case 50:if(!(l instanceof re)){e.next=52;break}return e.abrupt("return",{type:w.deferred,deferredData:l});case 52:return e.abrupt("return",{type:w.data,data:l});case 53:case"end":return e.stop()}},e,null,[[6,15,19,22]])}))).apply(this,arguments)}function Oe(e,t,n){var r=R(Re(e)).toString(),i={signal:t};if(n&&Fe(n.formMethod)){var a=n.formMethod,o=n.formEncType,u=n.formData;i.method=a.toUpperCase(),i.body="application/x-www-form-urlencoded"===o?Ee(u):u}return new Request(r,i)}function Ee(e){var t,n=new URLSearchParams,r=g(e.entries());try{for(r.s();!(t=r.n()).done;){var i=Object(h.a)(t.value,2),a=i[0],o=i[1];S("string"===typeof o,'File inputs are not supported with encType "application/x-www-form-urlencoded", please use "multipart/form-data" instead.'),n.append(a,o)}}catch(u){r.e(u)}finally{r.f()}return n}function xe(e,t,n,r,i){var a,o={},u=null,s=!1,c={};return n.forEach(function(n,l){var h=t[l].route.id;if(S(!Le(n),"Cannot handle redirect results in processLoaderData"),De(n)){var f=Te(e,h),d=n.error;r&&(d=Object.values(r)[0],r=void 0),null==(u=u||{})[f.route.id]&&(u[f.route.id]=d),o[h]=void 0,s||(s=!0,a=ae(n.error)?n.error.status:500),n.headers&&(c[h]=n.headers)}else Ae(n)?(i&&i.set(h,n.deferredData),o[h]=n.deferredData.data):(o[h]=n.data,null==n.statusCode||200===n.statusCode||s||(a=n.statusCode),n.headers&&(c[h]=n.headers))}),r&&(u=r,o[Object.keys(r)[0]]=void 0),{loaderData:o,errors:u,statusCode:a||200,loaderHeaders:c}}function Se(e,t,n,r,a,o,u,s){for(var c=xe(t,n,r,a,s),l=c.loaderData,f=c.errors,d=0;d<o.length;d++){var p=Object(h.a)(o[d],3),v=p[0],y=p[2];S(void 0!==u&&void 0!==u[d],"Did not find corresponding fetcher result");var m=u[d];if(De(m)){var g=Te(e.matches,y.route.id);f&&f[g.route.id]||(f=k({},f,Object(i.a)({},g.route.id,m.error))),e.fetchers.delete(v)}else{if(Le(m))throw new Error("Unhandled fetcher revalidation redirect");if(Ae(m))throw new Error("Unhandled fetcher deferred data");var b={state:"idle",data:m.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};e.fetchers.set(v,b)}}return{loaderData:l,errors:f}}function je(e,t,n,r){var i,a=k({},t),o=g(n);try{for(o.s();!(i=o.n()).done;){var u=i.value.route.id;if(t.hasOwnProperty(u)?void 0!==t[u]&&(a[u]=t[u]):void 0!==e[u]&&(a[u]=e[u]),r&&r.hasOwnProperty(u))break}}catch(s){o.e(s)}finally{o.f()}return a}function Te(e,t){return(t?e.slice(0,e.findIndex(function(e){return e.route.id===t})+1):Object(y.a)(e)).reverse().find(function(e){return!0===e.route.hasErrorBoundary})||e[0]}function Ce(e){var t=e.find(function(e){return e.index||!e.path||"/"===e.path})||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function Ie(e,t){var n=void 0===t?{}:t,r=n.pathname,i=n.routeId,a=n.method,o="Unknown Server Error",u="Unknown @remix-run/router error";return 400===e?(o="Bad Request",u=a&&r&&i?"You made a "+a+' request to "'+r+'" but did not provide a `loader` for route "'+i+'", so there is no way to handle the request.':"Cannot submit binary form data using GET"):403===e?(o="Forbidden",u='Route "'+i+'" does not match URL "'+r+'"'):404===e?(o="Not Found",u='No route matches URL "'+r+'"'):405===e&&(o="Method Not Allowed",a&&r&&i?u="You made a "+a.toUpperCase()+' request to "'+r+'" but did not provide an `action` for route "'+i+'", so there is no way to handle the request.':a&&(u='Invalid request method "'+a.toUpperCase()+'"')),new ie(e||500,o,new Error(u),!0)}function Ne(e){for(var t=e.length-1;t>=0;t--){var n=e[t];if(Le(n))return n}}function Re(e){return I(k({},"string"===typeof e?N(e):e,{hash:""}))}function Ae(e){return e.type===w.deferred}function De(e){return e.type===w.error}function Le(e){return(e&&e.type)===w.redirect}function Pe(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"object"===typeof e.headers&&"undefined"!==typeof e.body}function Me(e){return ce.has(e)}function Fe(e){return ue.has(e)}function Ue(e,t,n,r,i,a){return Ve.apply(this,arguments)}function Ve(){return(Ve=Object(r.a)(m().mark(function e(t,n,r,i,a,o){var u,s;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:u=m().mark(function e(u){var s,c,l,h;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s=r[u],c=n[u],l=t.find(function(e){return e.route.id===c.route.id}),h=null!=l&&!be(l,c)&&void 0!==(o&&o[c.route.id]),!Ae(s)||!a&&!h){e.next=7;break}return e.next=7,ze(s,i,a).then(function(e){e&&(r[u]=e||r[u])});case 7:case"end":return e.stop()}},e)}),s=0;case 2:if(!(s<r.length)){e.next=7;break}return e.delegateYield(u(s),"t0",4);case 4:s++,e.next=2;break;case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ze(e,t,n){return qe.apply(this,arguments)}function qe(){return(qe=Object(r.a)(m().mark(function e(t,n,r){return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===r&&(r=!1),e.next=3,t.deferredData.resolveData(n);case 3:if(!e.sent){e.next=6;break}return e.abrupt("return");case 6:if(!r){e.next=14;break}return e.prev=7,e.abrupt("return",{type:w.data,data:t.deferredData.unwrappedData});case 11:return e.prev=11,e.t0=e.catch(7),e.abrupt("return",{type:w.error,error:e.t0});case 14:return e.abrupt("return",{type:w.data,data:t.deferredData.data});case 15:case"end":return e.stop()}},e,null,[[7,11]])}))).apply(this,arguments)}function Be(e){return new URLSearchParams(e).getAll("index").some(function(e){return""===e})}function We(e,t){var n=e.route,r=e.pathname,i=e.params;return{id:n.id,pathname:r,params:i,data:t[n.id],handle:n.handle}}function He(e,t){var n="string"===typeof t?N(t).search:t.search;if(e[e.length-1].route.index&&Be(n||""))return e[e.length-1];var r=$(e);return r[r.length-1]}},function(e,t,n){"use strict";var r=n(32);n.d(t,"a",function(){return r.a}),n.d(t,"b",function(){return r.b}),n.d(t,"c",function(){return r.c}),n.d(t,"d",function(){return r.d}),n.d(t,"e",function(){return r.e}),n.d(t,"f",function(){return r.f}),n.d(t,"g",function(){return r.g}),n.d(t,"h",function(){return r.h})},function(e,t,n){"use strict";var r=n(28);function i(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||Object(r.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}n.d(t,"a",function(){return i})},function(e,t,n){"use strict";var r=n(13),i=n(2),a=n(6),o=n(1),u=n(4),s=n(22),c=n(16),l=n(5);var h,f,d=function(e,t){return t.some(function(t){return e instanceof t})};var p=new WeakMap,v=new WeakMap,y=new WeakMap,m=new WeakMap,g=new WeakMap;var b={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return v.get(e);if("objectStoreNames"===t)return e.objectStoreNames||y.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return _(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function k(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(f||(f=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(O(this),n),_(p.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return _(e.apply(O(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[O(this),t].concat(r));return y.set(a,t.sort?t.sort():[t]),_(a)}}function w(e){return"function"===typeof e?k(e):(e instanceof IDBTransaction&&function(e){if(!v.has(e)){var t=new Promise(function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)});v.set(e,t)}}(e),d(e,h||(h=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,b):e)}function _(e){if(e instanceof IDBRequest)return function(e){var t=new Promise(function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(_(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)});return t.then(function(t){t instanceof IDBCursor&&p.set(t,e)}).catch(function(){}),g.set(t,e),t}(e);if(m.has(e))return m.get(e);var t=w(e);return t!==e&&(m.set(e,t),g.set(t,e)),t}var O=function(e){return g.get(e)};function E(){E=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(C){s=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var a=t&&t.prototype instanceof f?t:f,o=Object.create(a.prototype),u=new S(i||[]);return r(o,"_invoke",{value:w(e,n,u)}),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=c;var h={};function f(){}function d(){}function p(){}var v={};s(v,a,function(){return this});var y=Object.getPrototypeOf,m=y&&y(y(j([])));m&&m!==t&&n.call(m,a)&&(v=m);var g=p.prototype=f.prototype=Object.create(v);function b(e){["next","throw","return"].forEach(function(t){s(e,t,function(e){return this._invoke(t,e)})})}function k(e,t){var i;r(this,"_invoke",{value:function(r,a){function o(){return new t(function(i,o){!function r(i,a,o,u){var s=l(e[i],e,a);if("throw"!==s.type){var c=s.arg,h=c.value;return h&&"object"==typeof h&&n.call(h,"__await")?t.resolve(h.__await).then(function(e){r("next",e,o,u)},function(e){r("throw",e,o,u)}):t.resolve(h).then(function(e){c.value=e,o(c)},function(e){return r("throw",e,o,u)})}u(s.arg)}(r,a,i,o)})}return i=i?i.then(o,o):o()}})}function w(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return T()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=_(o,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===h)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function _(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=l(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,h;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function j(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:T}}function T(){return{value:void 0,done:!0}}return d.prototype=p,r(g,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:d,configurable:!0}),d.displayName=s(p,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,u,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(k.prototype),s(k.prototype,o,function(){return this}),e.AsyncIterator=k,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new k(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then(function(e){return e.done?e.value:o.next()})},b(g),s(g,u,"Generator"),s(g,a,function(){return this}),s(g,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=j,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:j(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},e}var x,S,j=["get","getKey","getAll","getAllKeys","count"],T=["put","add","delete","clear"],C=new Map;function I(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(C.get(t))return C.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,a=T.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(a||j.includes(n))){var o=function(){var e=Object(i.a)(E().mark(function e(t){var i,o,u,s,c,l,h=arguments;return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,a?"readwrite":"readonly"),u=o.store,s=h.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=h[l];return r&&(u=u.index(c.shift())),e.next=6,Promise.all([(i=u)[n].apply(i,c),a&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}();return C.set(t,o),o}}}function N(){N=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(T){s=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var a=t&&t.prototype instanceof f?t:f,o=Object.create(a.prototype),u=new x(i||[]);return r(o,"_invoke",{value:w(e,n,u)}),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(T){return{type:"throw",arg:T}}}e.wrap=c;var h={};function f(){}function d(){}function p(){}var v={};s(v,a,function(){return this});var y=Object.getPrototypeOf,m=y&&y(y(S([])));m&&m!==t&&n.call(m,a)&&(v=m);var g=p.prototype=f.prototype=Object.create(v);function b(e){["next","throw","return"].forEach(function(t){s(e,t,function(e){return this._invoke(t,e)})})}function k(e,t){var i;r(this,"_invoke",{value:function(r,a){function o(){return new t(function(i,o){!function r(i,a,o,u){var s=l(e[i],e,a);if("throw"!==s.type){var c=s.arg,h=c.value;return h&&"object"==typeof h&&n.call(h,"__await")?t.resolve(h.__await).then(function(e){r("next",e,o,u)},function(e){r("throw",e,o,u)}):t.resolve(h).then(function(e){c.value=e,o(c)},function(e){return r("throw",e,o,u)})}u(s.arg)}(r,a,i,o)})}return i=i?i.then(o,o):o()}})}function w(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return j()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=_(o,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===h)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function _(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=l(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,h;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function S(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=p,r(g,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:d,configurable:!0}),d.displayName=s(p,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,u,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(k.prototype),s(k.prototype,o,function(){return this}),e.AsyncIterator=k,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new k(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then(function(e){return e.done?e.value:o.next()})},b(g),s(g,u,"Generator"),s(g,a,function(){return this}),s(g,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=S,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;E(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:S(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},e}function R(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return A(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return A(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}b=function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Object(a.a)(e,t,n[t])})}return e}({},e,{get:function(t,n,r){return I(t,n)||e.get(t,n,r)},has:function(t,n){return!!I(t,n)||e.has(t,n)}})}(b),n.d(t,"a",function(){return Y}),n.d(t,"b",function(){return W}),n.d(t,"c",function(){return B}),n.d(t,"d",function(){return H}),n.d(t,"e",function(){return X}),n.d(t,"f",function(){return $}),n.d(t,"g",function(){return J});var D=function(){function e(t){Object(o.a)(this,e),this.container=t}return Object(u.a)(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map(function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(function(e){return e}).join(" ")}}]),e}();var L="@firebase/app",P="0.9.0",M=new c.b("@firebase/app"),F="[DEFAULT]",U=(x={},Object(a.a)(x,L,"fire-core"),Object(a.a)(x,"@firebase/app-compat","fire-core-compat"),Object(a.a)(x,"@firebase/analytics","fire-analytics"),Object(a.a)(x,"@firebase/analytics-compat","fire-analytics-compat"),Object(a.a)(x,"@firebase/app-check","fire-app-check"),Object(a.a)(x,"@firebase/app-check-compat","fire-app-check-compat"),Object(a.a)(x,"@firebase/auth","fire-auth"),Object(a.a)(x,"@firebase/auth-compat","fire-auth-compat"),Object(a.a)(x,"@firebase/database","fire-rtdb"),Object(a.a)(x,"@firebase/database-compat","fire-rtdb-compat"),Object(a.a)(x,"@firebase/functions","fire-fn"),Object(a.a)(x,"@firebase/functions-compat","fire-fn-compat"),Object(a.a)(x,"@firebase/installations","fire-iid"),Object(a.a)(x,"@firebase/installations-compat","fire-iid-compat"),Object(a.a)(x,"@firebase/messaging","fire-fcm"),Object(a.a)(x,"@firebase/messaging-compat","fire-fcm-compat"),Object(a.a)(x,"@firebase/performance","fire-perf"),Object(a.a)(x,"@firebase/performance-compat","fire-perf-compat"),Object(a.a)(x,"@firebase/remote-config","fire-rc"),Object(a.a)(x,"@firebase/remote-config-compat","fire-rc-compat"),Object(a.a)(x,"@firebase/storage","fire-gcs"),Object(a.a)(x,"@firebase/storage-compat","fire-gcs-compat"),Object(a.a)(x,"@firebase/firestore","fire-fst"),Object(a.a)(x,"@firebase/firestore-compat","fire-fst-compat"),Object(a.a)(x,"fire-js","fire-js"),Object(a.a)(x,"firebase","fire-js-all"),x),V=new Map,z=new Map;function q(e,t){try{e.container.addComponent(t)}catch(n){M.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function B(e){var t=e.name;if(z.has(t))return M.debug("There were multiple attempts to register component ".concat(t,".")),!1;z.set(t,e);var n,r=R(V.values());try{for(r.s();!(n=r.n()).done;){q(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function W(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function H(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:F;W(e,t).clearInstance(n)}var G=(S={},Object(a.a)(S,"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),Object(a.a)(S,"bad-app-name","Illegal App name: '{$appName}"),Object(a.a)(S,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),Object(a.a)(S,"app-deleted","Firebase App named '{$appName}' already deleted"),Object(a.a)(S,"no-options","Need to provide options, when not being deployed to hosting via source."),Object(a.a)(S,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Object(a.a)(S,"invalid-log-argument","First argument to `onLog` must be null or a function."),Object(a.a)(S,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),Object(a.a)(S,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),Object(a.a)(S,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),Object(a.a)(S,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),S),K=new l.b("app","Firebase",G),Q=function(){function e(t,n,r){var i=this;Object(o.a)(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new s.a("app",function(){return i},"PUBLIC"))}return Object(u.a)(e,[{key:"checkDestroyed",value:function(){if(this.isDeleted)throw K.create("app-deleted",{appName:this._name})}},{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}}]),e}(),Y="9.15.0";function $(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;"object"!==typeof t&&(t={name:t});var r=Object.assign({name:F,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw K.create("bad-app-name",{appName:String(i)});if(n||(n=Object(l.r)()),!n)throw K.create("no-options");var a=V.get(i);if(a){if(Object(l.o)(n,a.options)&&Object(l.o)(r,a.config))return a;throw K.create("duplicate-app",{appName:i})}var o,u=new s.b(i),c=R(z.values());try{for(c.s();!(o=c.n()).done;){var h=o.value;u.addComponent(h)}}catch(d){c.e(d)}finally{c.f()}var f=new Q(n,r,u);return V.set(i,f),f}function X(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=V.get(e);if(!t&&e===F)return $();if(!t)throw K.create("no-app",{appName:e});return t}function J(e,t,n){var r,i=null!==(r=U[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void M.warn(u.join(" "))}B(new s.a("".concat(i,"-version"),function(){return{library:i,version:t}},"VERSION"))}var Z="firebase-heartbeat-database",ee=1,te="firebase-heartbeat-store",ne=null;function re(){return ne||(ne=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=_(u);return i&&u.addEventListener("upgradeneeded",function(e){i(_(u.result),e.oldVersion,e.newVersion,_(u.transaction))}),r&&u.addEventListener("blocked",function(){return r()}),s.then(function(e){o&&e.addEventListener("close",function(){return o()}),a&&e.addEventListener("versionchange",function(){return a()})}).catch(function(){}),s}(Z,ee,{upgrade:function(e,t){switch(t){case 0:e.createObjectStore(te)}}}).catch(function(e){throw K.create("idb-open",{originalErrorMessage:e.message})})),ne}function ie(e){return ae.apply(this,arguments)}function ae(){return(ae=Object(i.a)(N().mark(function e(t){var n,r;return N().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,re();case 3:return n=e.sent,e.abrupt("return",n.transaction(te).objectStore(te).get(se(t)));case 7:e.prev=7,e.t0=e.catch(0),e.t0 instanceof l.c?M.warn(e.t0.message):(r=K.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),M.warn(r.message));case 10:case"end":return e.stop()}},e,null,[[0,7]])}))).apply(this,arguments)}function oe(e,t){return ue.apply(this,arguments)}function ue(){return(ue=Object(i.a)(N().mark(function e(t,n){var r,i,a,o;return N().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,re();case 3:return r=e.sent,i=r.transaction(te,"readwrite"),a=i.objectStore(te),e.next=8,a.put(n,se(t));case 8:return e.abrupt("return",i.done);case 11:e.prev=11,e.t0=e.catch(0),e.t0 instanceof l.c?M.warn(e.t0.message):(o=K.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),M.warn(o.message));case 14:case"end":return e.stop()}},e,null,[[0,11]])}))).apply(this,arguments)}function se(e){return"".concat(e.name,"!").concat(e.options.appId)}var ce=1024,le=function(){function e(t){var n=this;Object(o.a)(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new pe(r),this._heartbeatsCachePromise=this._storage.read().then(function(e){return n._heartbeatsCache=e,e})}return Object(u.a)(e,[{key:"triggerHeartbeat",value:function(){var e=Object(i.a)(N().mark(function e(){var t,n,r;return N().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=he(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some(function(e){return e.date===r})){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6}),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=Object(i.a)(N().mark(function e(){var t,n,r,i,a;return N().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=he(),n=fe(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=Object(l.j)(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),e}();function he(){return(new Date).toISOString().substring(0,10)}function fe(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ce,r=[],i=e.slice(),a=R(e);try{var o=function(){var e=t.value,a=r.find(function(t){return t.agent===e.agent});if(a){if(a.dates.push(e.date),ve(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),ve(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){if("break"===o())break}}catch(u){a.e(u)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var de,pe=function(){function e(t){Object(o.a)(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return Object(u.a)(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=Object(i.a)(N().mark(function e(){return N().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(l.B)()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",Object(l.P)().then(function(){return!0}).catch(function(){return!1}));case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=Object(i.a)(N().mark(function e(){var t;return N().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,ie(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=Object(i.a)(N().mark(function e(t){var n,r;return N().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",oe(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=Object(i.a)(N().mark(function e(t){var n,i;return N().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return i=e.sent,e.abrupt("return",oe(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:i.lastSentHeartbeatDate,heartbeats:[].concat(Object(r.a)(i.heartbeats),Object(r.a)(t.heartbeats))}));case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}();function ve(e){return Object(l.j)(JSON.stringify({version:2,heartbeats:e})).length}de="",B(new s.a("platform-logger",function(e){return new D(e)},"PRIVATE")),B(new s.a("heartbeat",function(e){return new le(e)},"PRIVATE")),J(L,P,de),J(L,P,"esm2017"),J("fire-js","")},function(e,t,n){"use strict";var r=n(19),i=n(18),a=n(10),o=n(7),u=n(9),s=n(8),c=n(2),l=n(1),h=n(4),f=n(13),d=n(6),p=n(5),v=n(14),y=n(16);function m(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;var g,b=n(22);function k(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _(){_=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(C){s=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var a=t&&t.prototype instanceof f?t:f,o=Object.create(a.prototype),u=new S(i||[]);return r(o,"_invoke",{value:w(e,n,u)}),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=c;var h={};function f(){}function d(){}function p(){}var v={};s(v,a,function(){return this});var y=Object.getPrototypeOf,m=y&&y(y(j([])));m&&m!==t&&n.call(m,a)&&(v=m);var g=p.prototype=f.prototype=Object.create(v);function b(e){["next","throw","return"].forEach(function(t){s(e,t,function(e){return this._invoke(t,e)})})}function k(e,t){var i;r(this,"_invoke",{value:function(r,a){function o(){return new t(function(i,o){!function r(i,a,o,u){var s=l(e[i],e,a);if("throw"!==s.type){var c=s.arg,h=c.value;return h&&"object"==typeof h&&n.call(h,"__await")?t.resolve(h.__await).then(function(e){r("next",e,o,u)},function(e){r("throw",e,o,u)}):t.resolve(h).then(function(e){c.value=e,o(c)},function(e){return r("throw",e,o,u)})}u(s.arg)}(r,a,i,o)})}return i=i?i.then(o,o):o()}})}function w(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return T()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=O(o,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===h)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function O(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=l(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,h;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function j(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:T}}function T(){return{value:void 0,done:!0}}return d.prototype=p,r(g,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:d,configurable:!0}),d.displayName=s(p,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,u,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(k.prototype),s(k.prototype,o,function(){return this}),e.AsyncIterator=k,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new k(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then(function(e){return e.done?e.value:o.next()})},b(g),s(g,u,"Generator"),s(g,a,function(){return this}),s(g,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=j,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:j(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},e}function O(){return Object(d.a)({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var E=O,x=new p.b("auth","Firebase",O()),S=new y.b("@firebase/auth");function j(e){if(S.logLevel<=y.a.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];S.error.apply(S,["Auth (".concat(v.a,"): ").concat(e)].concat(n))}}function T(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw R.apply(void 0,[e].concat(n))}function C(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return R.apply(void 0,[e].concat(n))}function I(e,t,n){var r=Object.assign(Object.assign({},E()),Object(d.a)({},t,n));return new p.b("auth","Firebase",r).create(t,{appName:e.name})}function N(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&T(e,"argument-error"),I(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function R(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=Object(f.a)(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(Object(f.a)(o)))}return x.create.apply(x,[e].concat(n))}function A(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw R.apply(void 0,[t].concat(r))}}function D(e){var t="INTERNAL ASSERTION FAILED: "+e;throw j(t),new Error(t)}function L(e,t){e||D(t)}var P=new Map;function M(e){L(e instanceof Function,"Expected a class definition");var t=P.get(e);return t?(L(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,P.set(e,t),t)}function F(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function U(){return"http:"===V()||"https:"===V()}function V(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var z=function(){function e(t,n){Object(l.a)(this,e),this.shortDelay=t,this.longDelay=n,L(n>t,"Short delay should be less than long delay!"),this.isMobile=Object(p.C)()||Object(p.E)()}return Object(h.a)(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(U()||Object(p.y)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function q(e,t){L(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var B=function(){function e(){Object(l.a)(this,e)}return Object(h.a)(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void D("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void D("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void D("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),W=(g={},Object(d.a)(g,"CREDENTIAL_MISMATCH","custom-token-mismatch"),Object(d.a)(g,"MISSING_CUSTOM_TOKEN","internal-error"),Object(d.a)(g,"INVALID_IDENTIFIER","invalid-email"),Object(d.a)(g,"MISSING_CONTINUE_URI","internal-error"),Object(d.a)(g,"INVALID_PASSWORD","wrong-password"),Object(d.a)(g,"MISSING_PASSWORD","internal-error"),Object(d.a)(g,"EMAIL_EXISTS","email-already-in-use"),Object(d.a)(g,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),Object(d.a)(g,"INVALID_IDP_RESPONSE","invalid-credential"),Object(d.a)(g,"INVALID_PENDING_TOKEN","invalid-credential"),Object(d.a)(g,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),Object(d.a)(g,"MISSING_REQ_TYPE","internal-error"),Object(d.a)(g,"EMAIL_NOT_FOUND","user-not-found"),Object(d.a)(g,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),Object(d.a)(g,"EXPIRED_OOB_CODE","expired-action-code"),Object(d.a)(g,"INVALID_OOB_CODE","invalid-action-code"),Object(d.a)(g,"MISSING_OOB_CODE","internal-error"),Object(d.a)(g,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),Object(d.a)(g,"INVALID_ID_TOKEN","invalid-user-token"),Object(d.a)(g,"TOKEN_EXPIRED","user-token-expired"),Object(d.a)(g,"USER_NOT_FOUND","user-token-expired"),Object(d.a)(g,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),Object(d.a)(g,"INVALID_CODE","invalid-verification-code"),Object(d.a)(g,"INVALID_SESSION_INFO","invalid-verification-id"),Object(d.a)(g,"INVALID_TEMPORARY_PROOF","invalid-credential"),Object(d.a)(g,"MISSING_SESSION_INFO","missing-verification-id"),Object(d.a)(g,"SESSION_EXPIRED","code-expired"),Object(d.a)(g,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),Object(d.a)(g,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),Object(d.a)(g,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),Object(d.a)(g,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),Object(d.a)(g,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),Object(d.a)(g,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),Object(d.a)(g,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),Object(d.a)(g,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),Object(d.a)(g,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),Object(d.a)(g,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),Object(d.a)(g,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),g),H=new z(3e4,6e4);function G(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function K(e,t,n,r){return Q.apply(this,arguments)}function Q(){return(Q=Object(c.a)(_().mark(function e(t,n,r,i){var a,o=arguments;return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",Y(t,a,Object(c.a)(_().mark(function e(){var a,o,u,s;return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=Object(p.J)(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",B.fetch()(Z(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}},e)}))));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Y(e,t,n){return $.apply(this,arguments)}function $(){return($=Object(c.a)(_().mark(function e(t,n,r){var i,a,o,u,c,l,h,f,d,v;return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},W),n),e.prev=2,a=new ee(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw te(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(c=o.ok?u.errorMessage:u.error.message,l=c.split(" : "),h=Object(s.a)(l,2),f=h[0],d=h[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==f){e.next=23;break}throw te(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==f){e.next=27;break}throw te(t,"email-already-in-use",u);case 27:if("USER_DISABLED"!==f){e.next=29;break}throw te(t,"user-disabled",u);case 29:if(v=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-"),!d){e.next=34;break}throw I(t,v,d);case 34:T(t,v);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof p.c)){e.next=41;break}throw e.t0;case 41:T(t,"network-request-failed");case 42:case"end":return e.stop()}},e,null,[[2,37]])}))).apply(this,arguments)}function X(e,t,n,r){return J.apply(this,arguments)}function J(){return(J=Object(c.a)(_().mark(function e(t,n,r,i){var a,o,u=arguments;return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,K(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&T(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Z(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?q(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var ee=function(){function e(t){var n=this;Object(l.a)(this,e),this.auth=t,this.timer=null,this.promise=new Promise(function(e,t){n.timer=setTimeout(function(){return t(C(n.auth,"network-request-failed"))},H.get())})}return Object(h.a)(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function te(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=C(e,t,r);return i.customData._tokenResponse=n,i}function ne(e,t){return re.apply(this,arguments)}function re(){return(re=Object(c.a)(_().mark(function e(t,n){return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",K(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ie(e,t){return ae.apply(this,arguments)}function ae(){return(ae=Object(c.a)(_().mark(function e(t,n){return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",K(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function oe(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function ue(){return(ue=Object(c.a)(_().mark(function e(t){var n,r,i,a,o,u,s=arguments;return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=Object(p.v)(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,A((a=ce(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:oe(se(a.auth_time)),issuedAtTime:oe(se(a.iat)),expirationTime:oe(se(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}function se(e){return 1e3*Number(e)}function ce(e){var t=e.split("."),n=Object(s.a)(t,3),r=n[0],i=n[1],a=n[2];if(void 0===r||void 0===i||void 0===a)return j("JWT malformed, contained fewer than 3 sections"),null;try{var o=Object(p.h)(i);return o?JSON.parse(o):(j("Failed to decode base64 JWT payload"),null)}catch(u){return j("Caught error parsing JWT payload as JSON",null===u||void 0===u?void 0:u.toString()),null}}function le(e,t){return he.apply(this,arguments)}function he(){return(he=Object(c.a)(_().mark(function e(t,n){var r=arguments;return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof p.c&&fe(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}},e,null,[[3,9]])}))).apply(this,arguments)}function fe(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var de=function(){function e(t){Object(l.a)(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return Object(h.a)(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(Object(c.a)(_().mark(function t(){return _().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}},t)})),n)}}},{key:"iteration",value:function(){var e=Object(c.a)(_().mark(function e(){return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}},e,this,[[0,5]])}));return function(){return e.apply(this,arguments)}}()}]),e}(),pe=function(){function e(t,n){Object(l.a)(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return Object(h.a)(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=oe(this.lastLoginAt),this.creationTime=oe(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function ve(e){return ye.apply(this,arguments)}function ye(){return(ye=Object(c.a)(_().mark(function e(t){var n,r,i,a,o,u,s,c,l,h,f;return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,le(t,ie(r,{idToken:i}));case 6:A(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?o.providerUserInfo.map(function(e){var t=e.providerId,n=m(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}):[],s=ge(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),h=!!c&&l,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new pe(o.createdAt,o.lastLoginAt),isAnonymous:h},Object.assign(t,f);case 17:case"end":return e.stop()}},e)}))).apply(this,arguments)}function me(){return(me=Object(c.a)(_().mark(function e(t){var n;return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(p.v)(t),e.next=3,ve(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ge(e,t){var n=e.filter(function(e){return!t.some(function(t){return t.providerId===e.providerId})});return[].concat(Object(f.a)(n),Object(f.a)(t))}function be(e,t){return ke.apply(this,arguments)}function ke(){return(ke=Object(c.a)(_().mark(function e(t,n){var r;return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y(t,{},Object(c.a)(_().mark(function e(){var r,i,a,o,u,s;return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(p.J)({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=Z(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",B.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}},e)})));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}var we=function(){function e(){Object(l.a)(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return Object(h.a)(e,[{key:"updateFromServerResponse",value:function(e){A(e.idToken,"internal-error"),A("undefined"!==typeof e.idToken,"internal-error"),A("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=ce(e);return A(t,"internal-error"),A("undefined"!==typeof t.exp,"internal-error"),A("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=Object(c.a)(_().mark(function e(t){var n,r=arguments;return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],A(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=Object(c.a)(_().mark(function e(t,n){var r,i,a,o;return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return D("not implemented")}},{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(A("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(A("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(A("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function _e(e,t){A("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var Oe=function(){function e(t){Object(l.a)(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=m(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new de(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?Object(f.a)(a.providerData):[],this.metadata=new pe(a.createdAt||void 0,a.lastLoginAt||void 0)}return Object(h.a)(e,[{key:"getIdToken",value:function(){var e=Object(c.a)(_().mark(function e(t){var n;return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(A(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return ue.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return me.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(A(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(function(e){return Object.assign({},e)}),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){A(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=Object(c.a)(_().mark(function e(t){var n,r,i=arguments;return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,ve(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(c.a)(_().mark(function e(){var t;return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,le(this,ne(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(function(e){return Object.assign({},e)}),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,h=null!==(r=n.displayName)&&void 0!==r?r:void 0,f=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,y=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,m=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,b=n.uid,k=n.emailVerified,w=n.isAnonymous,_=n.providerData,O=n.stsTokenManager;A(b&&O,t,"internal-error");var E=we.fromJSON(this.name,O);A("string"===typeof b,t,"internal-error"),_e(h,t.name),_e(f,t.name),A("boolean"===typeof k,t,"internal-error"),A("boolean"===typeof w,t,"internal-error"),_e(d,t.name),_e(p,t.name),_e(v,t.name),_e(y,t.name),_e(m,t.name),_e(g,t.name);var x=new e({uid:b,auth:t,email:f,emailVerified:k,displayName:h,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:E,createdAt:m,lastLoginAt:g});return _&&Array.isArray(_)&&(x.providerData=_.map(function(e){return Object.assign({},e)})),y&&(x._redirectEventId=y),x}},{key:"_fromIdTokenResponse",value:function(){var t=Object(c.a)(_().mark(function t(n,r){var i,a,o,u=arguments;return _().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new we).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,ve(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),Ee=function(){function e(){Object(l.a)(this,e),this.type="NONE",this.storage={}}return Object(h.a)(e,[{key:"_isAvailable",value:function(){var e=Object(c.a)(_().mark(function e(){return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Object(c.a)(_().mark(function e(t,n){return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Object(c.a)(_().mark(function e(t){var n;return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Object(c.a)(_().mark(function e(t){return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();Ee.type="NONE";var xe=Ee;function Se(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var je=function(){function e(t,n,r){Object(l.a)(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=Se(this.userKey,a.apiKey,o),this.fullPersistenceKey=Se("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return Object(h.a)(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=Object(c.a)(_().mark(function e(){var t;return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?Oe._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=Object(c.a)(_().mark(function e(t){var n;return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=Object(c.a)(_().mark(function t(n,r){var i,a,o,u,s,l,h,f,d,p,v,y=arguments;return _().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(i=y.length>2&&void 0!==y[2]?y[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(M(xe),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=Object(c.a)(_().mark(function e(t){return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter(function(e){return e}),o=a[0]||M(xe),u=Se(i,n.config.apiKey,n.name),s=null,l=k(r),t.prev=10,l.s();case 12:if((h=l.n()).done){t.next=29;break}return f=h.value,t.prev=14,t.next=17,f._get(u);case 17:if(!(d=t.sent)){t.next=23;break}return p=Oe._fromJSON(n,d),f!==o&&(s=p),o=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),l.e(t.t1);case 34:return t.prev=34,l.f(),t.finish(34);case 37:if(v=a.filter(function(e){return e._shouldAllowMigration}),o._shouldAllowMigration&&v.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=v[0],!s){t.next=44;break}return t.next=44,o._set(u,s.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=Object(c.a)(_().mark(function e(t){return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}},e,null,[[1,6]])}));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}},t,null,[[10,31,34,37],[14,25]])}));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function Te(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Re(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Ce(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(De(t))return"Blackberry";if(Le(t))return"Webos";if(Ie(t))return"Safari";if((t.includes("chrome/")||Ne(t))&&!t.includes("edge/"))return"Chrome";if(Ae(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function Ce(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(p.w)();return/firefox\//i.test(e)}function Ie(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(p.w)()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ne(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(p.w)();return/crios\//i.test(e)}function Re(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(p.w)();return/iemobile/i.test(e)}function Ae(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(p.w)();return/android/i.test(e)}function De(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(p.w)();return/blackberry/i.test(e)}function Le(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(p.w)();return/webos/i.test(e)}function Pe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(p.w)();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Me(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(p.w)();return Pe(e)||Ae(e)||Le(e)||De(e)||/windows phone/i.test(e)||Re(e)}function Fe(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Te(Object(p.w)());break;case"Worker":t="".concat(Te(Object(p.w)()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(v.a,"/").concat(r)}var Ue=function(){function e(t){Object(l.a)(this,e),this.auth=t,this.queue=[]}return Object(h.a)(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise(function(n,r){try{n(e(t))}catch(i){r(i)}})};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=Object(c.a)(_().mark(function e(t){var n,r,i,a,o,u,s;return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:n=[],e.prev=3,r=k(this.queue),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=14;break}return a=i.value,e.next=11,a(t);case 11:a.onAbort&&n.push(a.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),n.reverse(),o=k(n);try{for(o.s();!(u=o.n()).done;){s=u.value;try{s()}catch(c){}}}catch(l){o.e(l)}finally{o.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===e.t1||void 0===e.t1?void 0:e.t1.message});case 30:case"end":return e.stop()}},e,this,[[3,24],[5,16,19,22]])}));return function(t){return e.apply(this,arguments)}}()}]),e}(),Ve=function(){function e(t,n,r){Object(l.a)(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new qe(this),this.idTokenSubscription=new qe(this),this.beforeStateQueue=new Ue(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=x,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return Object(h.a)(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=M(t)),this._initializationPromise=this.queue(Object(c.a)(_().mark(function r(){var i,a;return _().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,je.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}},r,null,[[8,13]])}))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=Object(c.a)(_().mark(function e(){var t;return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=Object(c.a)(_().mark(function e(t){var n,r,i,a,o,u,s;return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,u=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:s=e.sent,o&&o!==u||null===s||void 0===s||!s.user||(i=s.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,function(){return Promise.reject(e.t0)});case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return A(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}},e,this,[[18,23]])}));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=Object(c.a)(_().mark(function e(t){var n;return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}},e,this,[[1,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=Object(c.a)(_().mark(function e(t){return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ve(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}},e,this,[[0,5]])}));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=Object(c.a)(_().mark(function e(){return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=Object(c.a)(_().mark(function e(t){var n;return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?Object(p.v)(t):null)&&A(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=Object(c.a)(_().mark(function e(t){var n,r=this,i=arguments;return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&A(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(Object(c.a)(_().mark(function e(){return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}},e)}))));case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=Object(c.a)(_().mark(function e(){return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(Object(c.a)(_().mark(function n(){return _().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(M(e));case 2:case"end":return n.stop()}},n)})))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new p.b("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=Object(c.a)(_().mark(function e(t,n){var r;return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=Object(c.a)(_().mark(function e(t){var n;return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return A(n=t&&M(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,je.create(this,[M(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=Object(c.a)(_().mark(function e(t){var n,r;return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(Object(c.a)(_().mark(function e(){return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)})));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=Object(c.a)(_().mark(function e(t){var n=this;return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(Object(c.a)(_().mark(function e(){return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}},e)}))));case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return A(o,this,"internal-error"),o.then(function(){return a(i.currentUser)}),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=Object(c.a)(_().mark(function e(t){return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,!t){e.next=8;break}return e.next=6,this.assertedPersistence.setCurrentUser(t);case 6:e.next=10;break;case 8:return e.next=10,this.assertedPersistence.removeCurrentUser();case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Fe(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=Object(c.a)(_().mark(function e(){var t,n,r;return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(d.a)({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"_currentUser",get:function(){return this.currentUser}},{key:"assertedPersistence",get:function(){return A(this.persistenceManager,this,"internal-error"),this.persistenceManager}}]),e}();function ze(e){return Object(p.v)(e)}var qe=function(){function e(t){var n=this;Object(l.a)(this,e),this.auth=t,this.observer=null,this.addObserver=Object(p.m)(function(e){return n.observer=e})}return Object(h.a)(e,[{key:"next",get:function(){return A(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function Be(e,t,n){var r=ze(e);A(r._canInitEmulator,r,"emulator-config-failed"),A(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=We(t),o=function(e){var t=We(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:He(r.substr(a.length+1))}}var o=r.split(":"),u=Object(s.a)(o,2),c=u[0],l=u[1];return{host:c,port:He(l)}}(t),u=o.host,c=o.port,l=null===c?"":":".concat(c);r.config.emulator={url:"".concat(a,"//").concat(u).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function We(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function He(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var Ge=function(){function e(t,n){Object(l.a)(this,e),this.providerId=t,this.signInMethod=n}return Object(h.a)(e,[{key:"toJSON",value:function(){return D("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return D("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return D("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return D("not implemented")}}]),e}();function Ke(e,t){return Qe.apply(this,arguments)}function Qe(){return(Qe=Object(c.a)(_().mark(function e(t,n){return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",K(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ye(e,t){return $e.apply(this,arguments)}function $e(){return($e=Object(c.a)(_().mark(function e(t,n){return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",X(t,"POST","/v1/accounts:signInWithPassword",G(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Xe(e,t){return Je.apply(this,arguments)}function Je(){return(Je=Object(c.a)(_().mark(function e(t,n){return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",K(t,"POST","/v1/accounts:sendOobCode",G(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ze(e,t){return et.apply(this,arguments)}function et(){return(et=Object(c.a)(_().mark(function e(t,n){return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xe(t,n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function tt(e,t){return nt.apply(this,arguments)}function nt(){return(nt=Object(c.a)(_().mark(function e(t,n){return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xe(t,n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function rt(e,t){return it.apply(this,arguments)}function it(){return(it=Object(c.a)(_().mark(function e(t,n){return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xe(t,n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function at(e,t){return ot.apply(this,arguments)}function ot(){return(ot=Object(c.a)(_().mark(function e(t,n){return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xe(t,n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ut(e,t){return st.apply(this,arguments)}function st(){return(st=Object(c.a)(_().mark(function e(t,n){return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",X(t,"POST","/v1/accounts:signInWithEmailLink",G(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ct(e,t){return lt.apply(this,arguments)}function lt(){return(lt=Object(c.a)(_().mark(function e(t,n){return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",X(t,"POST","/v1/accounts:signInWithEmailLink",G(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}var ht=function(e){function t(e,n,r){var i,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return Object(l.a)(this,t),(i=Object(a.a)(this,Object(o.a)(t).call(this,"password",r)))._email=e,i._password=n,i._tenantId=u,i}return Object(u.a)(t,e),Object(h.a)(t,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=Object(c.a)(_().mark(function e(t){return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Ye(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",ut(t,{email:this._email,oobCode:this._password}));case 5:T(t,"internal-error");case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=Object(c.a)(_().mark(function e(t,n){return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Ke(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",ct(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:T(t,"internal-error");case 6:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,n){return new t(e,n,"password")}},{key:"_fromEmailAndCode",value:function(e,n){return new t(e,n,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),t}(Ge);function ft(e,t){return dt.apply(this,arguments)}function dt(){return(dt=Object(c.a)(_().mark(function e(t,n){return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",X(t,"POST","/v1/accounts:signInWithIdp",G(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}var pt=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(a.a)(this,Object(o.a)(t).apply(this,arguments))).pendingToken=null,e}return Object(u.a)(t,e),Object(h.a)(t,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return ft(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,ft(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,ft(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Object(p.J)(t)}return e}}],[{key:"_fromParams",value:function(e){var n=new t(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):T("argument-error"),n}},{key:"fromJSON",value:function(e){var n="string"===typeof e?JSON.parse(e):e,r=n.providerId,i=n.signInMethod,a=m(n,["providerId","signInMethod"]);if(!r||!i)return null;var o=new t(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),t}(Ge);function vt(e,t){return yt.apply(this,arguments)}function yt(){return(yt=Object(c.a)(_().mark(function e(t,n){return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",K(t,"POST","/v1/accounts:sendVerificationCode",G(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function mt(){return(mt=Object(c.a)(_().mark(function e(t,n){return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",X(t,"POST","/v1/accounts:signInWithPhoneNumber",G(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function gt(){return(gt=Object(c.a)(_().mark(function e(t,n){var r;return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X(t,"POST","/v1/accounts:signInWithPhoneNumber",G(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw te(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}var bt=Object(d.a)({},"USER_NOT_FOUND","user-not-found");function kt(){return(kt=Object(c.a)(_().mark(function e(t,n){var r;return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",X(t,"POST","/v1/accounts:signInWithPhoneNumber",G(t,r),bt));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}var wt=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(a.a)(this,Object(o.a)(t).call(this,"phone","phone"))).params=e,n}return Object(u.a)(t,e),Object(h.a)(t,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return mt.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return gt.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return kt.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,n){return new t({verificationId:e,verificationCode:n})}},{key:"_fromTokenResponse",value:function(e,n){return new t({phoneNumber:e,temporaryProof:n})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var n=e,r=n.verificationId,i=n.verificationCode,a=n.phoneNumber,o=n.temporaryProof;return i||r||a||o?new t({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),t}(Ge);var _t=function(){function e(t){var n,r,i,a,o,u;Object(l.a)(this,e);var s=Object(p.K)(Object(p.q)(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,h=null!==(r=s.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);A(c&&h&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=h,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return Object(h.a)(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=Object(p.K)(Object(p.q)(e)).link,n=t?Object(p.K)(Object(p.q)(t)).deep_link_id:null,r=Object(p.K)(Object(p.q)(e)).deep_link_id;return(r?Object(p.K)(Object(p.q)(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(r){return null}}}]),e}();var Ot=function(){function e(){Object(l.a)(this,e),this.providerId=e.PROVIDER_ID}return Object(h.a)(e,null,[{key:"credential",value:function(e,t){return ht._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=_t.parseLink(t);return A(n,"argument-error"),ht._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();Ot.PROVIDER_ID="password",Ot.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Ot.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var Et=function(){function e(t){Object(l.a)(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return Object(h.a)(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),xt=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(a.a)(this,Object(o.a)(t).apply(this,arguments))).scopes=[],e}return Object(u.a)(t,e),Object(h.a)(t,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return Object(f.a)(this.scopes)}}]),t}(Et),St=function(e){function t(){return Object(l.a)(this,t),Object(a.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(h.a)(t,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return A(e.idToken||e.accessToken,"argument-error"),pt._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return A("providerId"in t&&"signInMethod"in t,"argument-error"),pt._fromParams(t)}},{key:"credentialFromResult",value:function(e){return t.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return t.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var n=e._tokenResponse;if(!n)return null;var r=n.oauthIdToken,i=n.oauthAccessToken,a=n.oauthTokenSecret,o=n.pendingToken,u=n.nonce,s=n.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new t(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(c){return null}}}]),t}(xt),jt=function(e){function t(){return Object(l.a)(this,t),Object(a.a)(this,Object(o.a)(t).call(this,"facebook.com"))}return Object(u.a)(t,e),Object(h.a)(t,null,[{key:"credential",value:function(e){return pt._fromParams({providerId:t.PROVIDER_ID,signInMethod:t.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return t.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return t.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var n=e._tokenResponse;if(!n||!("oauthAccessToken"in n))return null;if(!n.oauthAccessToken)return null;try{return t.credential(n.oauthAccessToken)}catch(r){return null}}}]),t}(xt);jt.FACEBOOK_SIGN_IN_METHOD="facebook.com",jt.PROVIDER_ID="facebook.com";var Tt=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(a.a)(this,Object(o.a)(t).call(this,"google.com"))).addScope("profile"),e}return Object(u.a)(t,e),Object(h.a)(t,null,[{key:"credential",value:function(e,n){return pt._fromParams({providerId:t.PROVIDER_ID,signInMethod:t.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}},{key:"credentialFromResult",value:function(e){return t.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return t.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var n=e._tokenResponse;if(!n)return null;var r=n.oauthIdToken,i=n.oauthAccessToken;if(!r&&!i)return null;try{return t.credential(r,i)}catch(a){return null}}}]),t}(xt);Tt.GOOGLE_SIGN_IN_METHOD="google.com",Tt.PROVIDER_ID="google.com";var Ct=function(e){function t(){return Object(l.a)(this,t),Object(a.a)(this,Object(o.a)(t).call(this,"github.com"))}return Object(u.a)(t,e),Object(h.a)(t,null,[{key:"credential",value:function(e){return pt._fromParams({providerId:t.PROVIDER_ID,signInMethod:t.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return t.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return t.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var n=e._tokenResponse;if(!n||!("oauthAccessToken"in n))return null;if(!n.oauthAccessToken)return null;try{return t.credential(n.oauthAccessToken)}catch(r){return null}}}]),t}(xt);Ct.GITHUB_SIGN_IN_METHOD="github.com",Ct.PROVIDER_ID="github.com";var It=function(e){function t(){return Object(l.a)(this,t),Object(a.a)(this,Object(o.a)(t).call(this,"twitter.com"))}return Object(u.a)(t,e),Object(h.a)(t,null,[{key:"credential",value:function(e,n){return pt._fromParams({providerId:t.PROVIDER_ID,signInMethod:t.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}},{key:"credentialFromResult",value:function(e){return t.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return t.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var n=e._tokenResponse;if(!n)return null;var r=n.oauthAccessToken,i=n.oauthTokenSecret;if(!r||!i)return null;try{return t.credential(r,i)}catch(a){return null}}}]),t}(xt);function Nt(e,t){return Rt.apply(this,arguments)}function Rt(){return(Rt=Object(c.a)(_().mark(function e(t,n){return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",X(t,"POST","/v1/accounts:signUp",G(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}It.TWITTER_SIGN_IN_METHOD="twitter.com",It.PROVIDER_ID="twitter.com";var At=function(){function e(t){Object(l.a)(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return Object(h.a)(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=Object(c.a)(_().mark(function t(n,r,i){var a,o,u,s,c=arguments;return _().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,Oe._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=Dt(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}},t)}));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=Object(c.a)(_().mark(function t(n,r,i){var a;return _().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=Dt(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}},t)}));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function Dt(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function Lt(e){return Pt.apply(this,arguments)}function Pt(){return(Pt=Object(c.a)(_().mark(function e(t){var n,r,i,a;return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=ze(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new At({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,Nt(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,At._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Mt=function(e){function t(e,n,r,u){var s,c;return Object(l.a)(this,t),(s=Object(a.a)(this,Object(o.a)(t).call(this,n.code,n.message))).operationType=r,s.user=u,Object.setPrototypeOf(Object(i.a)(Object(i.a)(s)),t.prototype),s.customData={appName:e.name,tenantId:null!==(c=e.tenantId)&&void 0!==c?c:void 0,_serverResponse:n.customData._serverResponse,operationType:r},s}return Object(u.a)(t,e),Object(h.a)(t,null,[{key:"_fromErrorAndOperation",value:function(e,n,r,i){return new t(e,n,r,i)}}]),t}(p.c);function Ft(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw Mt._fromErrorAndOperation(e,n,t,r);throw n})}function Ut(e,t){return Vt.apply(this,arguments)}function Vt(){return(Vt=Object(c.a)(_().mark(function e(t,n){var r,i,a=arguments;return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=le,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",At._forOperation(t,"link",i));case 14:case"end":return e.stop()}},e)}))).apply(this,arguments)}function zt(e,t){return qt.apply(this,arguments)}function qt(){return(qt=Object(c.a)(_().mark(function e(t,n){var r,i,a,o,u,s,c=arguments;return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,le(t,Ft(i,a,n,t),r);case 6:return A((o=e.sent).idToken,i,"internal-error"),A(u=ce(o.idToken),i,"internal-error"),s=u.sub,A(t.uid===s,i,"user-mismatch"),e.abrupt("return",At._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&T(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}},e,null,[[3,15]])}))).apply(this,arguments)}function Bt(e,t){return Wt.apply(this,arguments)}function Wt(){return(Wt=Object(c.a)(_().mark(function e(t,n){var r,i,a,o,u=arguments;return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,Ft(t,i,n);case 4:return a=e.sent,e.next=7,At._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ht(e,t){return Gt.apply(this,arguments)}function Gt(){return(Gt=Object(c.a)(_().mark(function e(t,n){return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Bt(ze(t),n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Kt(e,t,n){var r;A((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),A("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(A(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(A(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function Qt(e,t,n){return Yt.apply(this,arguments)}function Yt(){return(Yt=Object(c.a)(_().mark(function e(t,n,r){var i,a;return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=Object(p.v)(t),a={requestType:"PASSWORD_RESET",email:n},r&&Kt(i,a,r),e.next=5,tt(i,a);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function $t(e,t,n){return Xt.apply(this,arguments)}function Xt(){return(Xt=Object(c.a)(_().mark(function e(t,n,r){var i,a,o;return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=ze(t),e.next=3,Nt(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,At._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Jt(e,t,n){return Ht(Object(p.v)(e),Ot.credential(t,n))}function Zt(e,t,n){return en.apply(this,arguments)}function en(){return(en=Object(c.a)(_().mark(function e(t,n,r){var i,a;return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=Object(p.v)(t),a={requestType:"EMAIL_SIGNIN",email:n},A(r.handleCodeInApp,i,"argument-error"),r&&Kt(i,a,r),e.next=6,rt(i,a);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function tn(e,t,n){return nn.apply(this,arguments)}function nn(){return(nn=Object(c.a)(_().mark(function e(t,n,r){var i,a;return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=Object(p.v)(t),A((a=Ot.credentialWithLink(n,r||F()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",Ht(i,a));case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function rn(e,t){return an.apply(this,arguments)}function an(){return(an=Object(c.a)(_().mark(function e(t,n){var r,i,a,o;return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(p.v)(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&Kt(r.auth,a,n),e.next=8,Ze(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}},e)}))).apply(this,arguments)}function on(e,t,n){return un.apply(this,arguments)}function un(){return(un=Object(c.a)(_().mark(function e(t,n,r){var i,a,o,u;return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=Object(p.v)(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&Kt(i.auth,o,r),e.next=8,at(i.auth,o);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}},e)}))).apply(this,arguments)}function sn(e,t){return cn.apply(this,arguments)}function cn(){return(cn=Object(c.a)(_().mark(function e(t,n){return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",K(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ln(e,t){return hn.apply(this,arguments)}function hn(){return(hn=Object(c.a)(_().mark(function e(t,n){var r,i,a,o,u,s,c;return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=Object(p.v)(t),e.next=6,a.getIdToken();case 6:return o=e.sent,u={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,le(a,sn(a.auth,u));case 10:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(c=a.providerData.find(function(e){return"password"===e.providerId}))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(s);case 17:case"end":return e.stop()}},e)}))).apply(this,arguments)}function fn(e,t){return pn(Object(p.v)(e),t,null)}function dn(e,t){return pn(Object(p.v)(e),null,t)}function pn(e,t,n){return vn.apply(this,arguments)}function vn(){return(vn=Object(c.a)(_().mark(function e(t,n,r){var i,a,o,u;return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,le(t,Ke(i,o));case 9:return u=e.sent,e.next=12,t._updateTokensIfNecessary(u,!0);case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}function yn(e,t,n,r){return Object(p.v)(e).onIdTokenChanged(t,n,r)}function mn(e,t,n,r){return Object(p.v)(e).onAuthStateChanged(t,n,r)}function gn(e){return Object(p.v)(e).signOut()}function bn(e,t){return K(e,"POST","/v2/accounts/mfaEnrollment:start",G(e,t))}new WeakMap;var kn=function(){function e(t,n){Object(l.a)(this,e),this.storageRetriever=t,this.type=n}return Object(h.a)(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem("__sak","1"),this.storage.removeItem("__sak"),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var wn=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(a.a)(this,Object(o.a)(t).call(this,function(){return window.localStorage},"LOCAL"))).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=Object(p.w)();return Ie(e)||Pe(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=Me(),e._shouldAllowMigration=!0,e}return Object(u.a)(t,e),Object(h.a)(t,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);Object(p.A)()&&10===document.documentMode&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys(function(e,n,r){t.notifyListeners(e,r)})}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(function(){e.forAllChangedKeys(function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=Object(c.a)(_().mark(function e(n,i){return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(r.a)(Object(o.a)(t.prototype),"_set",this).call(this,n,i);case 2:this.localCache[n]=JSON.stringify(i);case 3:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Object(c.a)(_().mark(function e(n){var i;return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(r.a)(Object(o.a)(t.prototype),"_get",this).call(this,n);case 2:return i=e.sent,this.localCache[n]=JSON.stringify(i),e.abrupt("return",i);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Object(c.a)(_().mark(function e(n){return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(r.a)(Object(o.a)(t.prototype),"_remove",this).call(this,n);case 2:delete this.localCache[n];case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),t}(kn);wn.type="LOCAL";var _n=wn,On=function(e){function t(){return Object(l.a)(this,t),Object(a.a)(this,Object(o.a)(t).call(this,function(){return window.sessionStorage},"SESSION"))}return Object(u.a)(t,e),Object(h.a)(t,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),t}(kn);On.type="SESSION";var En=On;function xn(e){return Promise.all(e.map(function(){var e=Object(c.a)(_().mark(function e(t){var n;return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()))}var Sn=function(){function e(t){Object(l.a)(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return Object(h.a)(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=Object(c.a)(_().mark(function e(t){var n,r,i,a,o,u,s,l;return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=Object(c.a)(_().mark(function e(t){return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),e.next=9,xn(s);case 9:l=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:l});case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find(function(e){return e.isListeningto(t)});if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function jn(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Sn.receivers=[];var Tn=function(){function e(t){Object(l.a)(this,e),this.target=t,this.handlers=new Set}return Object(h.a)(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=Object(c.a)(_().mark(function e(t,n){var r,i,a,o,u=this,s=arguments;return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise(function(e,s){var c=jn("",20);i.port1.start();var l=setTimeout(function(){s(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout(function(){s(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])}).finally(function(){o&&u.removeMessageHandler(o)}));case 5:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function Cn(){return window}function In(){return"undefined"!==typeof Cn().WorkerGlobalScope&&"function"===typeof Cn().importScripts}function Nn(){return Rn.apply(this,arguments)}function Rn(){return(Rn=Object(c.a)(_().mark(function e(){var t;return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}},e,null,[[2,9]])}))).apply(this,arguments)}function An(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var Dn="firebaseLocalStorageDb",Ln=1,Pn="firebaseLocalStorage",Mn="fbase_key",Fn=function(){function e(t){Object(l.a)(this,e),this.request=t}return Object(h.a)(e,[{key:"toPromise",value:function(){var e=this;return new Promise(function(t,n){e.request.addEventListener("success",function(){t(e.request.result)}),e.request.addEventListener("error",function(){n(e.request.error)})})}}]),e}();function Un(e,t){return e.transaction([Pn],t?"readwrite":"readonly").objectStore(Pn)}function Vn(){var e=indexedDB.deleteDatabase(Dn);return new Fn(e).toPromise()}function zn(){var e=indexedDB.open(Dn,Ln);return new Promise(function(t,n){e.addEventListener("error",function(){n(e.error)}),e.addEventListener("upgradeneeded",function(){var t=e.result;try{t.createObjectStore(Pn,{keyPath:Mn})}catch(r){n(r)}}),e.addEventListener("success",Object(c.a)(_().mark(function n(){var r;return _().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(Pn)){n.next=12;break}return r.close(),n.next=5,Vn();case 5:return n.t0=t,n.next=8,zn();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}},n)})))})}function qn(e,t,n){return Bn.apply(this,arguments)}function Bn(){return(Bn=Object(c.a)(_().mark(function e(t,n,r){var i,a;return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=Un(t,!0).put((i={},Object(d.a)(i,Mn,n),Object(d.a)(i,"value",r),i)),e.abrupt("return",new Fn(a).toPromise());case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Wn(e,t){return Hn.apply(this,arguments)}function Hn(){return(Hn=Object(c.a)(_().mark(function e(t,n){var r,i;return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Un(t,!1).get(n),e.next=3,new Fn(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Gn(e,t){var n=Un(e,!0).delete(t);return new Fn(n).toPromise()}var Kn=function(){function e(){Object(l.a)(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(function(){},function(){})}return Object(h.a)(e,[{key:"_openDb",value:function(){var e=Object(c.a)(_().mark(function e(){return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,zn();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=Object(c.a)(_().mark(function e(t){var n,r;return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}},e,this,[[2,11]])}));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=Object(c.a)(_().mark(function e(){return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",In()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=Object(c.a)(_().mark(function e(){var t=this;return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=Sn._getInstance(In()?self:null),this.receiver._subscribe("keyChanged",function(){var e=Object(c.a)(_().mark(function e(n,r){var i;return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=Object(c.a)(_().mark(function e(t,n){return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=Object(c.a)(_().mark(function e(){var t,n,r;return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nn();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new Tn(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=Object(c.a)(_().mark(function e(t){return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&An()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}},e,this,[[2,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=Object(c.a)(_().mark(function e(){var t;return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,zn();case 5:return t=e.sent,e.next=8,qn(t,"__sak","1");case 8:return e.next=10,Gn(t,"__sak");case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}},e,null,[[0,13]])}));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=Object(c.a)(_().mark(function e(t){return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}},e,this,[[1,,4,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Object(c.a)(_().mark(function e(t,n){var r=this;return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Object(c.a)(_().mark(function e(){return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries(function(e){return qn(e,t,n)});case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}},e)}))));case 1:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Object(c.a)(_().mark(function e(t){var n;return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries(function(e){return Wn(e,t)});case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Object(c.a)(_().mark(function e(t){var n=this;return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Object(c.a)(_().mark(function e(){return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries(function(e){return Gn(e,t)});case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}},e)}))));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=Object(c.a)(_().mark(function e(){var t,n,r,i,a,o,u,s,c,l,h;return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries(function(e){var t=Un(e,!1).getAll();return new Fn(t).toPromise()});case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=k(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(f){i.e(f)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)h=l[c],this.localCache[h]&&!r.has(h)&&(this.notifyListeners(h,null),n.push(h));return e.abrupt("return",n);case 13:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(Object(c.a)(_().mark(function t(){return _().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}},t)})),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();Kn.type="LOCAL";var Qn=Kn;function Yn(e,t){return K(e,"POST","/v2/accounts/mfaSignIn:start",G(e,t))}function $n(e){return new Promise(function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=C("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})}function Xn(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}Xn("rcb"),new z(3e4,6e4);var Jn="recaptcha";function Zn(e,t,n){return er.apply(this,arguments)}function er(){return(er=Object(c.a)(_().mark(function e(t,n,r){var i,a,o,u,s,c,l,h,f;return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,A("string"===typeof a,t,"argument-error"),A(r.type===Jn,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return A("enroll"===u.type,t,"internal-error"),e.next=13,bn(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return A("signin"===u.type,t,"internal-error"),A(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,Yn(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,vt(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return h=e.sent,f=h.sessionInfo,e.abrupt("return",f);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}},e,null,[[3,,31,34]])}))).apply(this,arguments)}var tr=function(){function e(t){Object(l.a)(this,e),this.providerId=e.PROVIDER_ID,this.auth=ze(t)}return Object(h.a)(e,[{key:"verifyPhoneNumber",value:function(e,t){return Zn(this.auth,e,Object(p.v)(t))}}],[{key:"credential",value:function(e,t){return wt._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?wt._fromTokenResponse(n,r):null}}]),e}();function nr(e,t){return t?M(t):(A(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}tr.PROVIDER_ID="phone",tr.PHONE_SIGN_IN_METHOD="phone";var rr=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(a.a)(this,Object(o.a)(t).call(this,"custom","custom"))).params=e,n}return Object(u.a)(t,e),Object(h.a)(t,[{key:"_getIdTokenResponse",value:function(e){return ft(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return ft(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return ft(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),t}(Ge);function ir(e){return Bt(e.auth,new rr(e),e.bypassAuthState)}function ar(e){var t=e.auth,n=e.user;return A(n,t,"internal-error"),zt(n,new rr(e),e.bypassAuthState)}function or(e){return ur.apply(this,arguments)}function ur(){return(ur=Object(c.a)(_().mark(function e(t){var n,r;return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,A(r=t.user,n,"internal-error"),e.abrupt("return",Ut(r,new rr(t),t.bypassAuthState));case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}var sr=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];Object(l.a)(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return Object(h.a)(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=Object(c.a)(_().mark(function t(n,r){return _().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}},t,null,[[1,10]])}));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=Object(c.a)(_().mark(function e(t){var n,r,i,a,o,u,s;return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}},e,this,[[5,13]])}));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ir;case"linkViaPopup":case"linkViaRedirect":return or;case"reauthViaPopup":case"reauthViaRedirect":return ar;default:T(this.auth,"internal-error")}}},{key:"resolve",value:function(e){L(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){L(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),cr=new z(2e3,1e4);function lr(e,t,n){return hr.apply(this,arguments)}function hr(){return(hr=Object(c.a)(_().mark(function e(t,n,r){var i,a,o;return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=ze(t),N(t,n,Et),a=nr(i,r),o=new fr(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}var fr=function(e){function t(e,n,r,u,s){var c;return Object(l.a)(this,t),(c=Object(a.a)(this,Object(o.a)(t).call(this,e,n,u,s))).provider=r,c.authWindow=null,c.pollId=null,t.currentPopupAction&&t.currentPopupAction.cancel(),t.currentPopupAction=Object(i.a)(Object(i.a)(c)),c}return Object(u.a)(t,e),Object(h.a)(t,[{key:"executeNotNull",value:function(){var e=Object(c.a)(_().mark(function e(){var t;return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return A(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Object(c.a)(_().mark(function e(){var t,n=this;return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return L(1===this.filter.length,"Popup operations only handle one event"),t=jn(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(function(e){n.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,function(e){e||n.reject(C(n.auth,"web-storage-unsupported"))}),this.pollUserCancellation();case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"cancel",value:function(){this.reject(C(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,t.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;null!==(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)&&void 0!==r&&r.closed?e.pollId=window.setTimeout(function(){e.pollId=null,e.reject(C(e.auth,"popup-closed-by-user"))},2e3):e.pollId=window.setTimeout(t,cr.get())}()}},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}}]),t}(sr);fr.currentPopupAction=null;var dr="pendingRedirect",pr=new Map,vr=function(e){function t(e,n){var r,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object(l.a)(this,t),(r=Object(a.a)(this,Object(o.a)(t).call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i))).eventId=null,r}return Object(u.a)(t,e),Object(h.a)(t,[{key:"execute",value:function(){var e=Object(c.a)(_().mark(function e(){var n,i;return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=pr.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,yr(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,Object(r.a)(Object(o.a)(t.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:i=e.t0,n=function(){return Promise.resolve(i)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),n=function(){return Promise.reject(e.t1)};case 20:pr.set(this.auth._key(),n);case 21:return this.bypassAuthState||pr.set(this.auth._key(),function(){return Promise.resolve(null)}),e.abrupt("return",n());case 23:case"end":return e.stop()}},e,this,[[2,17]])}));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=Object(c.a)(_().mark(function e(n){var i;return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==n.type){e.next=4;break}return e.abrupt("return",Object(r.a)(Object(o.a)(t.prototype),"onAuthEvent",this).call(this,n));case 4:if("unknown"!==n.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!n.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(n.eventId);case 10:if(!(i=e.sent)){e.next=16;break}return this.user=i,e.abrupt("return",Object(r.a)(Object(o.a)(t.prototype),"onAuthEvent",this).call(this,n));case 16:this.resolve(null);case 17:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Object(c.a)(_().mark(function e(){return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),t}(sr);function yr(e,t){return mr.apply(this,arguments)}function mr(){return(mr=Object(c.a)(_().mark(function e(t,n){var r,i,a;return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=kr(n),i=br(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}},e)}))).apply(this,arguments)}function gr(e,t){pr.set(e._key(),t)}function br(e){return M(e._redirectPersistence)}function kr(e){return Se(dr,e.config.apiKey,e.name)}function wr(e,t){return _r.apply(this,arguments)}function _r(){return(_r=Object(c.a)(_().mark(function e(t,n){var r,i,a,o,u,s=arguments;return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=ze(t),a=nr(i,n),o=new vr(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Or=function(){function e(t){Object(l.a)(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return Object(h.a)(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach(function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return xr(e);default:return!1}}(e)?n:(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0),n)}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!xr(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(C(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Er(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(Er(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function Er(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(function(e){return e}).join("-")}function xr(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function Sr(e){return jr.apply(this,arguments)}function jr(){return(jr=Object(c.a)(_().mark(function e(t){var n,r=arguments;return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",K(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Tr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Cr=/^https?/;function Ir(){return(Ir=Object(c.a)(_().mark(function e(t){var n,r,i,a,o;return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Sr(t);case 4:n=e.sent,r=n.authorizedDomains,i=k(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!Nr(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:T(t,"unauthorized-domain");case 29:case"end":return e.stop()}},e,null,[[7,22,25,28],[11,16]])}))).apply(this,arguments)}function Nr(e){var t=F(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!Cr.test(r))return!1;if(Tr.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var Rr=new z(3e4,6e4);function Ar(){var e=Cn().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=Object(f.a)(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var Dr=null;function Lr(e){return Dr=Dr||function(e){return new Promise(function(t,n){var r,i,a;function o(){Ar(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){Ar(),n(C(e,"network-request-failed"))},timeout:Rr.get()})}if(null===(i=null===(r=Cn().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(null===(a=Cn().gapi)||void 0===a||!a.load){var u=Xn("iframefcb");return Cn()[u]=function(){gapi.load?o():n(C(e,"network-request-failed"))},$n("https://apis.google.com/js/api.js?onload=".concat(u)).catch(function(e){return n(e)})}o()}}).catch(function(e){throw Dr=null,e})}(e)}var Pr=new z(5e3,15e3),Mr="__/auth/iframe",Fr="emulator/auth/iframe",Ur={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Vr=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function zr(e){var t=e.config;A(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?q(t,Fr):"https://".concat(e.config.authDomain,"/").concat(Mr),r={apiKey:t.apiKey,appName:e.name,v:v.a},i=Vr.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(Object(p.J)(r).slice(1))}function qr(e){return Br.apply(this,arguments)}function Br(){return(Br=Object(c.a)(_().mark(function e(t){var n,r;return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Lr(t);case 2:return n=e.sent,A(r=Cn().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:zr(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ur,dontclear:!0},function(e){return new Promise(function(){var n=Object(c.a)(_().mark(function n(r,i){var a,o,u;return _().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){Cn().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=C(t,"network-request-failed"),o=Cn().setTimeout(function(){i(a)},Pr.get()),e.ping(u).then(u,function(){i(a)});case 6:case"end":return n.stop()}},n)}));return function(e,t){return n.apply(this,arguments)}}())}));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Wr={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Hr=500,Gr=600,Kr="_blank",Qr="http://localhost",Yr=function(){function e(t){Object(l.a)(this,e),this.window=t,this.associatedEvent=null}return Object(h.a)(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function $r(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Hr,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Gr,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",c=Object.assign(Object.assign({},Wr),{width:r.toString(),height:i.toString(),top:a,left:o}),l=Object(p.w)().toLowerCase();n&&(u=Ne(l)?Kr:n),Ce(l)&&(t=t||Qr,c.scrollbars="yes");var h=Object.entries(c).reduce(function(e,t){var n=Object(s.a)(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")},"");if(function(){var e;return Pe(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(p.w)())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(l)&&"_self"!==u)return function(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",u),new Yr(null);var f=window.open(t||"",u,h);A(f,e,"popup-blocked");try{f.focus()}catch(d){}return new Yr(f)}var Xr="__/auth/handler",Jr="emulator/auth/handler";function Zr(e,t,n,r,i,a){A(e.config.authDomain,e,"auth-domain-config-required"),A(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:v.a,eventId:i};if(t instanceof Et){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",Object(p.z)(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var u=0,c=Object.entries(a||{});u<c.length;u++){var l=Object(s.a)(c[u],2),h=l[0],f=l[1];o[h]=f}}if(t instanceof xt){var d=t.getScopes().filter(function(e){return""!==e});d.length>0&&(o.scopes=d.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var y=o,m=0,g=Object.keys(y);m<g.length;m++){var b=g[m];void 0===y[b]&&delete y[b]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Xr);return q(t,Jr)}(e),"?").concat(Object(p.J)(y).slice(1))}var ei=function(){function e(){Object(l.a)(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=En,this._completeRedirectFn=wr,this._overrideRedirectResult=gr}return Object(h.a)(e,[{key:"_openPopup",value:function(){var e=Object(c.a)(_().mark(function e(t,n,r,i){var a,o;return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return L(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=Zr(t,n,r,F(),i),e.abrupt("return",$r(t,o,jn()));case 3:case"end":return e.stop()}},e,this)}));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=Object(c.a)(_().mark(function e(t,n,r,i){return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=Zr(t,n,r,F(),i),Cn().location.href=a,e.abrupt("return",new Promise(function(){}));case 4:case"end":return e.stop()}var a},e,this)}));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(L(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch(function(){delete t.eventManagers[n]}),o}},{key:"initAndGetManager",value:function(){var e=Object(c.a)(_().mark(function e(t){var n,r;return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qr(t);case 2:return n=e.sent,r=new Or(t),n.register("authEvent",function(e){return A(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send("webStorageSupport",{type:"webStorageSupport"},function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),T(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Ir.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return Me()||Ie()||Pe()}}]),e}(),ti=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(a.a)(this,Object(o.a)(t).call(this,"phone"))).credential=e,n}return Object(u.a)(t,e),Object(h.a)(t,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return K(e,"POST","/v2/accounts/mfaEnrollment:finalize",G(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return K(e,"POST","/v2/accounts/mfaSignIn:finalize",G(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new t(e)}}]),t}(function(){function e(t){Object(l.a)(this,e),this.factorId=t}return Object(h.a)(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return D("unexpected MultiFactorSessionType")}}}]),e}());(function(){function e(){Object(l.a)(this,e)}return Object(h.a)(e,null,[{key:"assertion",value:function(e){return ti._fromCredential(e)}}]),e}()).FACTOR_ID="phone";var ni="@firebase/auth",ri="0.21.0",ii=function(){function e(t){Object(l.a)(this,e),this.auth=t,this.internalListeners=new Map}return Object(h.a)(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=Object(c.a)(_().mark(function e(t){var n;return _().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged(function(t){e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){A(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();var ai,oi=Object(p.u)("authIdTokenMaxAge")||300,ui=null,si=function(e){return function(){var t=Object(c.a)(_().mark(function t(n){var r,i,a;return _().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=n,!t.t0){t.next=5;break}return t.next=4,n.getIdTokenResult();case 4:t.t0=t.sent;case 5:if(r=t.t0,!((i=r&&((new Date).getTime()-Date.parse(r.issuedAtTime))/1e3)&&i>oi)){t.next=9;break}return t.abrupt("return");case 9:if(a=null===r||void 0===r?void 0:r.token,ui!==a){t.next=12;break}return t.abrupt("return");case 12:return ui=a,t.next=15,fetch(e,{method:a?"POST":"DELETE",headers:a?{Authorization:"Bearer ".concat(a)}:{}});case 15:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()};function ci(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(v.e)(),t=Object(v.b)(e,"auth");if(t.isInitialized())return t.getImmediate();var n=function(e,t){var n=Object(v.b)(e,"auth");if(n.isInitialized()){var r=n.getImmediate(),i=n.getOptions();if(Object(p.o)(i,null!==t&&void 0!==t?t:{}))return r;T(r,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:ei,persistence:[Qn,_n,En]}),r=Object(p.u)("authTokenSyncURL");if(r){var i=si(r);!function(e,t,n){Object(p.v)(e).beforeAuthStateChanged(t,n)}(n,i,function(){return i(n.currentUser)}),yn(n,function(e){return i(e)})}var a=Object(p.s)("auth");return a&&Be(n,"http://".concat(a)),n}ai="Browser",Object(v.c)(new b.a("auth",function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,u=a.authDomain;return function(e,t){A(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),A(!(null===u||void 0===u?void 0:u.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:u,clientPlatform:ai,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Fe(ai)},i=new Ve(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(M);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(function(e,t,n){e.getProvider("auth-internal").initialize()})),Object(v.c)(new b.a("auth-internal",function(e){return function(e){return new ii(e)}(ze(e.getProvider("auth").getImmediate()))},"PRIVATE").setInstantiationMode("EXPLICIT")),Object(v.g)(ni,ri,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(ai)),Object(v.g)(ni,ri,"esm2017"),n.d(t,"a",function(){return jt}),n.d(t,"b",function(){return Ct}),n.d(t,"c",function(){return Tt}),n.d(t,"d",function(){return St}),n.d(t,"e",function(){return It}),n.d(t,"f",function(){return $t}),n.d(t,"g",function(){return ci}),n.d(t,"h",function(){return mn}),n.d(t,"i",function(){return yn}),n.d(t,"j",function(){return rn}),n.d(t,"k",function(){return Qt}),n.d(t,"l",function(){return Zt}),n.d(t,"m",function(){return Lt}),n.d(t,"n",function(){return Jt}),n.d(t,"o",function(){return tn}),n.d(t,"p",function(){return lr}),n.d(t,"q",function(){return gn}),n.d(t,"r",function(){return fn}),n.d(t,"s",function(){return dn}),n.d(t,"t",function(){return ln}),n.d(t,"u",function(){return on})},function(e,t,n){"use strict";n.d(t,"a",function(){return c}),n.d(t,"b",function(){return v}),n.d(t,"c",function(){return y}),n.d(t,"d",function(){return m});var r,i=n(1),a=n(4),o=n(6);function u(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var c,l=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(c||(c={}));var h={debug:c.DEBUG,verbose:c.VERBOSE,info:c.INFO,warn:c.WARN,error:c.ERROR,silent:c.SILENT},f=c.INFO,d=(r={},Object(o.a)(r,c.DEBUG,"log"),Object(o.a)(r,c.VERBOSE,"log"),Object(o.a)(r,c.INFO,"info"),Object(o.a)(r,c.WARN,"warn"),Object(o.a)(r,c.ERROR,"error"),r),p=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=d[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},v=function(){function e(t){Object(i.a)(this,e),this.name=t,this._logLevel=f,this._logHandler=p,this._userLogHandler=null,l.push(this)}return Object(a.a)(e,[{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?h[e]:e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,c.DEBUG].concat(t)),this._logHandler.apply(this,[this,c.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,c.VERBOSE].concat(t)),this._logHandler.apply(this,[this,c.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,c.INFO].concat(t)),this._logHandler.apply(this,[this,c.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,c.WARN].concat(t)),this._logHandler.apply(this,[this,c.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,c.ERROR].concat(t)),this._logHandler.apply(this,[this,c.ERROR].concat(t))}},{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in c))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}}]),e}();function y(e){l.forEach(function(t){t.setLogLevel(e)})}function m(e,t){var n,r=u(l);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=h[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map(function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}}).filter(function(e){return e}).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:c[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n(15),i=n(3);function a(e,t,n,r){return new(n||(n=Promise))(function(i,a){function o(e){try{s(r.next(e))}catch(t){a(t)}}function u(e){try{s(r.throw(e))}catch(t){a(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,u)}s((r=r.apply(e,t||[])).next())})}function o(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(u){a=[6,u],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}var u=function(){return(u=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},s=function(e){return{loading:void 0===e||null===e,value:e}},c=function(e){var t=e?e():void 0,n=Object(i.useReducer)(function(e,t){switch(t.type){case"error":return u(u({},e),{error:t.error,loading:!1,value:void 0});case"reset":return s(t.defaultValue);case"value":return u(u({},e),{error:void 0,loading:!1,value:t.value});default:return e}},s(t)),r=n[0],a=n[1],o=Object(i.useCallback)(function(){var t=e?e():void 0;a({type:"reset",defaultValue:t})},[e]),c=Object(i.useCallback)(function(e){a({type:"error",error:e})},[]),l=Object(i.useCallback)(function(e){a({type:"value",value:e})},[]);return Object(i.useMemo)(function(){return{error:r.error,loading:r.loading,reset:o,setError:c,setValue:l,value:r.value}},[r.error,r.loading,o,c,l,r.value])},l=function(e,t){var n=c(function(){return e.currentUser}),u=n.error,s=n.loading,l=n.setError,h=n.setValue,f=n.value;return Object(i.useEffect)(function(){var n=Object(r.h)(e,function(e){return a(void 0,void 0,void 0,function(){var n;return o(this,function(r){switch(r.label){case 0:if(!(null===t||void 0===t?void 0:t.onUserChanged))return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,t.onUserChanged(e)];case 2:return r.sent(),[3,4];case 3:return n=r.sent(),l(n),[3,4];case 4:return h(e),[2]}})})},l);return function(){n()}},[e]),[f,s,u]}},function(e,t,n){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";var r=n(7);function i(e,t,n){return(i="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Object(r.a)(e)););return e}(e,t);if(i){var a=Object.getOwnPropertyDescriptor(i,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}n.d(t,"a",function(){return i})},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return ur}),n.d(t,"b",function(){return cr}),n.d(t,"c",function(){return sr}),n.d(t,"d",function(){return hr}),n.d(t,"e",function(){return lr}),n.d(t,"f",function(){return fr}),n.d(t,"g",function(){return dr}),n.d(t,"h",function(){return ar}),n.d(t,"i",function(){return or});var r=n(8),i=n(10),a=n(19),o=n(7),u=n(9),s=n(1),c=n(4);function l(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var f,d="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof e?e:"undefined"!==typeof self?self:{},p={},v=v||{},y=d||self;function m(){}function g(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function b(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var k="closure_uid_"+(1e9*Math.random()>>>0),w=0;function _(e,t,n){return e.call.apply(e.bind,arguments)}function O(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function E(e,t,n){return(E=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?_:O).apply(null,arguments)}function x(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function S(e,t){function n(){}n.prototype=t.prototype,e.X=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Wb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function j(){this.s=this.s,this.o=this.o}j.prototype.s=!1,j.prototype.na=function(){var e;!this.s&&(this.s=!0,this.M(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,k)&&e[k]||(e[k]=++w))},j.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var T=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function C(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function I(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(g(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function N(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}N.prototype.h=function(){this.defaultPrevented=!0};var R=function(){if(!y.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{y.addEventListener("test",m,t),y.removeEventListener("test",m,t)}catch(n){}return e}();function A(e){return/^[\s\xa0]*$/.test(e)}var D=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function L(e,t){return e<t?-1:e>t?1:0}function P(){var e=y.navigator;return e&&(e=e.userAgent)?e:""}function M(e){return-1!=P().indexOf(e)}function F(e){return F[" "](e),e}F[" "]=m;var U,V=M("Opera"),z=M("Trident")||M("MSIE"),q=M("Edge"),B=q||z,W=M("Gecko")&&!(-1!=P().toLowerCase().indexOf("webkit")&&!M("Edge"))&&!(M("Trident")||M("MSIE"))&&!M("Edge"),H=-1!=P().toLowerCase().indexOf("webkit")&&!M("Edge");function G(){var e=y.document;return e?e.documentMode:void 0}e:{var K="",Q=function(){var e=P();return W?/rv:([^\);]+)(\)|;)/.exec(e):q?/Edge\/([\d\.]+)/.exec(e):z?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):H?/WebKit\/(\S+)/.exec(e):V?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Q&&(K=Q?Q[1]:""),z){var Y=G();if(null!=Y&&Y>parseFloat(K)){U=String(Y);break e}}U=K}var $,X={};function J(){return function(e){var t=X;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}(function(){for(var e=0,t=D(String(U)).split("."),n=D("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=L(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||L(0==a[2].length,0==o[2].length)||L(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e})}if(y.document&&z){var Z=G();$=Z||(parseInt(U,10)||void 0)}else $=void 0;var ee=$;function te(e,t){if(N.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(W){e:{try{F(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:ne[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&te.X.h.call(this)}}S(te,N);var ne={2:"touch",3:"pen",4:"mouse"};te.prototype.h=function(){te.X.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var re="closure_listenable_"+(1e6*Math.random()|0),ie=0;function ae(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++ie,this.ba=this.ea=!1}function oe(e){e.ba=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function ue(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function se(e){var t={};for(var n in e)t[n]=e[n];return t}var ce="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function le(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<ce.length;a++)n=ce[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function he(e){this.src=e,this.g={},this.h=0}function fe(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=T(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(oe(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function de(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ba&&a.listener==t&&a.capture==!!n&&a.ha==r)return i}return-1}he.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=de(e,t,r,i);return-1<o?(t=e[o],n||(t.ea=!1)):((t=new ae(t,this.src,a,!!r,i)).ea=n,e.push(t)),t};var pe="closure_lm_"+(1e6*Math.random()|0),ve={};function ye(e,t,n,r,i){if(r&&r.once)return function e(t,n,r,i,a){if(Array.isArray(n)){for(var o=0;o<n.length;o++)e(t,n[o],r,i,a);return null}r=Oe(r);return t&&t[re]?t.O(n,r,b(i)?!!i.capture:!!i,a):me(t,n,r,!0,i,a)}(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)ye(e,t[a],n,r,i);return null}return n=Oe(n),e&&e[re]?e.N(t,n,b(r)?!!r.capture:!!r,i):me(e,t,n,!1,r,i)}function me(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=b(i)?!!i.capture:!!i,u=we(e);if(u||(e[pe]=u=new he(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){var e=ke;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)R||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(be(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function ge(e){if("number"!==typeof e&&e&&!e.ba){var t=e.src;if(t&&t[re])fe(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(be(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=we(t))?(fe(n,e),0==n.h&&(n.src=null,t[pe]=null)):oe(e)}}}function be(e){return e in ve?ve[e]:ve[e]="on"+e}function ke(e,t){if(e.ba)e=!0;else{t=new te(t,this);var n=e.listener,r=e.ha||e.src;e.ea&&ge(e),e=n.call(r,t)}return e}function we(e){return(e=e[pe])instanceof he?e:null}var _e="__closure_events_fn_"+(1e9*Math.random()>>>0);function Oe(e){return"function"===typeof e?e:(e[_e]||(e[_e]=function(t){return e.handleEvent(t)}),e[_e])}function Ee(){j.call(this),this.i=new he(this),this.P=this,this.I=null}function xe(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new N(t,e);else if(t instanceof N)t.target=t.target||e;else{var i=t;le(t=new N(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=Se(o,r,!0,t)&&i}if(i=Se(o=t.g=e,r,!0,t)&&i,i=Se(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=Se(o=t.g=n[a],r,!1,t)&&i}function Se(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ba&&o.capture==n){var u=o.listener,s=o.ha||o.src;o.ea&&fe(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}S(Ee,j),Ee.prototype[re]=!0,Ee.prototype.removeEventListener=function(e,t,n,r){!function e(t,n,r,i,a){if(Array.isArray(n))for(var o=0;o<n.length;o++)e(t,n[o],r,i,a);else i=b(i)?!!i.capture:!!i,r=Oe(r),t&&t[re]?(t=t.i,(n=String(n).toString())in t.g&&-1<(r=de(o=t.g[n],r,i,a))&&(oe(o[r]),Array.prototype.splice.call(o,r,1),0==o.length&&(delete t.g[n],t.h--))):t&&(t=we(t))&&(n=t.g[n.toString()],t=-1,n&&(t=de(n,r,i,a)),(r=-1<t?n[t]:null)&&ge(r))}(this,e,t,n,r)},Ee.prototype.M=function(){if(Ee.X.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)oe(n[r]);delete t.g[e],t.h--}}this.I=null},Ee.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Ee.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var je=y.JSON.stringify;function Te(){var e=Pe,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Ce,Ie=function(){function e(){Object(s.a)(this,e),this.h=this.g=null}return Object(c.a)(e,[{key:"add",value:function(e,t){var n=Ne.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),Ne=new(function(){function e(t,n){Object(s.a)(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return Object(c.a)(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())(function(){return new Re},function(e){return e.reset()}),Re=function(){function e(){Object(s.a)(this,e),this.next=this.g=this.h=null}return Object(c.a)(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function Ae(e){y.setTimeout(function(){throw e},0)}function De(e,t){Ce||function(){var e=y.Promise.resolve(void 0);Ce=function(){e.then(Me)}}(),Le||(Ce(),Le=!0),Pe.add(e,t)}var Le=!1,Pe=new Ie;function Me(){for(var e;e=Te();){try{e.h.call(e.g)}catch(n){Ae(n)}var t=Ne;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Le=!1}function Fe(e,t){Ee.call(this),this.h=e||1,this.g=t||y,this.j=E(this.lb,this),this.l=Date.now()}function Ue(e){e.ca=!1,e.R&&(e.g.clearTimeout(e.R),e.R=null)}function Ve(e,t,n){if("function"===typeof e)n&&(e=E(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=E(e.handleEvent,e)}return 2147483647<Number(t)?-1:y.setTimeout(e,t||0)}S(Fe,Ee),(f=Fe.prototype).ca=!1,f.R=null,f.lb=function(){if(this.ca){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-e):(this.R&&(this.g.clearTimeout(this.R),this.R=null),xe(this,"tick"),this.ca&&(Ue(this),this.start()))}},f.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},f.M=function(){Fe.X.M.call(this),Ue(this),delete this.g};var ze=function(e){function t(e,n){var r;return Object(s.a)(this,t),(r=Object(i.a)(this,Object(o.a)(t).call(this))).m=e,r.j=n,r.h=null,r.i=!1,r.g=null,r}return Object(u.a)(t,e),Object(c.a)(t,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:function e(t){t.g=Ve(function(){t.g=null,t.i&&(t.i=!1,e(t))},t.j);var n=t.h;t.h=null,t.m.apply(null,n)}(this)}},{key:"M",value:function(){Object(a.a)(Object(o.a)(t.prototype),"M",this).call(this),this.g&&(y.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),t}(j);function qe(e){j.call(this),this.h=e,this.g={}}S(qe,j);var Be=[];function We(e,t,n,r){Array.isArray(n)||(n&&(Be[0]=n.toString()),n=Be);for(var i=0;i<n.length;i++){var a=ye(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function He(e){ue(e.g,function(e,t){this.g.hasOwnProperty(t)&&ge(e)},e),e.g={}}function Ge(){this.g=!0}function Ke(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return je(n)}catch(u){return t}}(e,n)+(r?" "+r:"")})}qe.prototype.M=function(){qe.X.M.call(this),He(this)},qe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ge.prototype.Aa=function(){this.g=!1},Ge.prototype.info=function(){};var Qe={},Ye=null;function $e(){return Ye=Ye||new Ee}function Xe(e){N.call(this,Qe.Pa,e)}function Je(e){var t=$e();xe(t,new Xe(t))}function Ze(e,t){N.call(this,Qe.STAT_EVENT,e),this.stat=t}function et(e){var t=$e();xe(t,new Ze(t,e))}function tt(e,t){N.call(this,Qe.Qa,e),this.size=t}function nt(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return y.setTimeout(function(){e()},t)}Qe.Pa="serverreachability",S(Xe,N),Qe.STAT_EVENT="statevent",S(Ze,N),Qe.Qa="timingevent",S(tt,N);var rt={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},it={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function at(){}function ot(e){return e.h||(e.h=e.i())}function ut(){}at.prototype.h=null;var st,ct={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function lt(){N.call(this,"d")}function ht(){N.call(this,"c")}function ft(){}function dt(e,t,n,r){this.l=e,this.j=t,this.m=n,this.U=r||1,this.S=new qe(this),this.O=vt,e=B?125:void 0,this.T=new Fe(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new pt}function pt(){this.i=null,this.g="",this.h=!1}S(lt,N),S(ht,N),S(ft,at),ft.prototype.g=function(){return new XMLHttpRequest},ft.prototype.i=function(){return{}},st=new ft;var vt=45e3,yt={},mt={};function gt(e,t,n){e.K=1,e.v=Mt(Rt(t)),e.s=n,e.P=!0,bt(e,null)}function bt(e,t){e.F=Date.now(),Ot(e),e.A=Rt(e.v);var n=e.A,r=e.U;Array.isArray(r)||(r=[String(r)]),$t(n.i,"t",r),e.C=0,n=e.l.H,e.h=new pt,e.g=Jn(e.l,n?t:null,!e.s),0<e.N&&(e.L=new ze(E(e.La,e,e.g),e.N)),We(e.S,e.g,"readystatechange",e.ib),t=e.H?se(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.da(e.A,e.u,e.s,t)):(e.u="GET",e.g.da(e.A,e.u,null,t)),Je(),function(e,t,n,r,i,a){e.info(function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");o=2<=h.length&&"type"==h[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o})}(e.j,e.u,e.A,e.m,e.U,e.s)}function kt(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Da)}function wt(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=_t(e,n))==mt){4==t&&(e.o=4,et(14),i=!1),Ke(e.j,e.m,null,"[Incomplete Response]");break}if(r==yt){e.o=4,et(15),Ke(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Ke(e.j,e.m,r,null),Tt(e,r)}kt(e)&&r!=mt&&r!=yt&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,et(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.$&&(e.$=!0,(t=e.l).g==e&&t.$&&!t.K&&(t.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),Wn(t),t.K=!0,et(11))):(Ke(e.j,e.m,n,"[Invalid Chunked Response]"),jt(e),St(e))}function _t(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?mt:(n=Number(t.substring(n,r)),isNaN(n)?yt:(r+=1)+n>t.length?mt:(t=t.substr(r,n),e.C=r+n,t))}function Ot(e){e.V=Date.now()+e.O,Et(e,e.O)}function Et(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=nt(E(e.gb,e),t)}function xt(e){e.B&&(y.clearTimeout(e.B),e.B=null)}function St(e){0==e.l.G||e.I||Kn(e.l,e)}function jt(e){xt(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,Ue(e.T),He(e.S),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function Tt(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||an(n.h,e)))if(!e.J&&an(n.h,e)&&3==n.G){try{var r=n.Fa.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;Gn(n),Pn(n)}Bn(n),et(18)}}else n.Ba=i[1],0<n.Ba-n.T&&37500>i[2]&&n.L&&0==n.A&&!n.v&&(n.v=nt(E(n.cb,n),6e3));if(1>=rn(n.h)&&n.ja){try{n.ja()}catch(a){}n.ja=void 0}}else Yn(n,11)}else if((e.J||n.g==e)&&Gn(n),!A(t))for(i=n.Fa.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.T=a[0],a=a[1],2==n.G)if("c"==a[0]){n.I=a[1],n.ka=a[2];var o=a[3];null!=o&&(n.ma=o,n.j.info("VER="+n.ma));var u=a[4];null!=u&&(n.Ca=u,n.j.info("SVER="+n.Ca));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.J=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.h;h.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(h.j=h.l,h.g=new Set,h.h&&(on(h,h.h),h.h=null))}if(r.D){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.za=f,Pt(r.F,r.D,f))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-e.F,n.j.info("Handshake RTT: "+n.P+"ms"));var d=e;if((r=n).sa=Xn(r,r.H?r.ka:null,r.V),d.J){un(r.h,d);var p=d,v=r.J;v&&p.setTimeout(v),p.B&&(xt(p),Ot(p)),r.g=d}else qn(r);0<n.i.length&&Fn(n)}else"stop"!=a[0]&&"close"!=a[0]||Yn(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Yn(n,7):Ln(n):"noop"!=a[0]&&n.l&&n.l.wa(a),n.A=0)}Je()}catch(a){}}function Ct(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(g(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.oa&&"function"==typeof e.oa)return e.oa();if(!e.W||"function"!=typeof e.W){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(g(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.W&&"function"==typeof e.W)return e.W();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(g(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(f=dt.prototype).setTimeout=function(e){this.O=e},f.ib=function(e){e=e.target;var t=this.L;t&&3==Cn(e)?t.l():this.La(e)},f.La=function(e){try{if(e==this.g)e:{var t=Cn(this.g),n=this.g.Ea();this.g.aa();if(!(3>t)&&(3!=t||B||this.g&&(this.h.h||this.g.fa()||In(this.g)))){this.I||4!=t||7==n||Je(),xt(this);var r=this.g.aa();this.Y=r;t:if(kt(this)){var i=In(this.g);e="";var a=i.length,o=4==Cn(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){jt(this),St(this);var u="";break t}this.h.i=new y.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.splice(0,a),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.fa();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o})}(this.j,this.u,this.A,this.m,this.U,t,r),this.i){if(this.Z&&!this.J){t:{if(this.g){var s,c=this.g;if((s=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(s)){var l=s;break t}}l=null}if(!(r=l)){this.i=!1,this.o=3,et(12),jt(this),St(this);break e}Ke(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Tt(this,r)}this.P?(wt(this,t,u),B&&this.i&&3==t&&(We(this.S,this.T,"tick",this.hb),this.T.start())):(Ke(this.j,this.m,u,null),Tt(this,u)),4==t&&jt(this),this.i&&!this.I&&(4==t?Kn(this.l,this):(this.i=!1,Ot(this)))}else 400==r&&0<u.indexOf("Unknown SID")?(this.o=3,et(12)):(this.o=0,et(13)),jt(this),St(this)}}}catch(t){}},f.hb=function(){if(this.g){var e=Cn(this.g),t=this.g.fa();this.C<t.length&&(xt(this),wt(this,e,t),this.i&&4!=e&&Ot(this))}},f.cancel=function(){this.I=!0,jt(this)},f.gb=function(){this.B=null;var e=Date.now();0<=e-this.V?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.K&&(Je(),et(17)),jt(this),this.o=2,St(this)):Et(this,this.V-e)};var It=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Nt(e,t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Nt){this.h=void 0!==t?t:e.h,At(this,e.j),this.s=e.s,this.g=e.g,Dt(this,e.m),this.l=e.l,t=e.i;var n=new Gt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Lt(this,n),this.o=e.o}else e&&(n=String(e).match(It))?(this.h=!!t,At(this,n[1]||"",!0),this.s=Ft(n[2]||""),this.g=Ft(n[3]||"",!0),Dt(this,n[4]),this.l=Ft(n[5]||"",!0),Lt(this,n[6]||"",!0),this.o=Ft(n[7]||"")):(this.h=!!t,this.i=new Gt(null,this.h))}function Rt(e){return new Nt(e)}function At(e,t,n){e.j=n?Ft(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Dt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Lt(e,t,n){t instanceof Gt?(e.i=t,function(e,t){t&&!e.j&&(Kt(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(Qt(this,t),$t(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=Ut(t,Wt)),e.i=new Gt(t,e.h))}function Pt(e,t,n){e.i.set(t,n)}function Mt(e){return Pt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Ft(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Ut(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Vt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Vt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Nt.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Ut(t,zt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Ut(t,zt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Ut(n,"/"==n.charAt(0)?Bt:qt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Ut(n,Ht)),e.join("")};var zt=/[#\/\?@]/g,qt=/[#\?:]/g,Bt=/[#\?]/g,Wt=/[#\?@]/g,Ht=/#/g;function Gt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Kt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function Qt(e,t){Kt(e),t=Xt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Yt(e,t){return Kt(e),t=Xt(e,t),e.g.has(t)}function $t(e,t,n){Qt(e,t),0<n.length&&(e.i=null,e.g.set(Xt(e,t),C(n)),e.h+=n.length)}function Xt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(f=Gt.prototype).add=function(e,t){Kt(this),this.i=null,e=Xt(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},f.forEach=function(e,t){Kt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},f.oa=function(){Kt(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},f.W=function(e){Kt(this);var t=[];if("string"===typeof e)Yt(this,e)&&(t=t.concat(this.g.get(Xt(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},f.set=function(e,t){return Kt(this),this.i=null,Yt(this,e=Xt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},f.get=function(e,t){return e&&0<(e=this.W(e)).length?String(e[0]):t},f.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.W(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var Jt=function e(t,n){Object(s.a)(this,e),this.h=t,this.g=n};function Zt(e){this.l=e||tn,y.PerformanceNavigationTiming?e=0<(e=y.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(y.g&&y.g.Ga&&y.g.Ga()&&y.g.Ga().$b),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var en,tn=10;function nn(e){return!!e.h||!!e.g&&e.g.size>=e.j}function rn(e){return e.h?1:e.g?e.g.size:0}function an(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function on(e,t){e.g?e.g.add(t):e.h=t}function un(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function sn(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=l(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return C(e.i)}function cn(){}function ln(){this.g=new cn}function hn(e,t,n){var r=n||"";try{Ct(e,function(e,n){var i=e;b(e)&&(i=je(e)),t.push(r+n+"="+encodeURIComponent(i))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function fn(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function dn(e){this.l=e.ac||null,this.j=e.jb||!1}function pn(e,t){Ee.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=vn,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Zt.prototype.cancel=function(){if(this.i=sn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=l(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},cn.prototype.stringify=function(e){return y.JSON.stringify(e,void 0)},cn.prototype.parse=function(e){return y.JSON.parse(e,void 0)},S(dn,at),dn.prototype.g=function(){return new pn(this.l,this.j)},dn.prototype.i=(en={},function(){return en}),S(pn,Ee);var vn=0;function yn(e){e.j.read().then(e.Ta.bind(e)).catch(e.ga.bind(e))}function mn(e){e.readyState=4,e.l=null,e.j=null,e.A=null,gn(e)}function gn(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(f=pn.prototype).open=function(e,t){if(this.readyState!=vn)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,gn(this)},f.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||y).fetch(new Request(this.B,t)).then(this.Wa.bind(this),this.ga.bind(this))},f.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(function(){}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,mn(this)),this.readyState=vn},f.Wa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,gn(this)),this.g&&(this.readyState=3,gn(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if("undefined"!==typeof y.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;yn(this)}else e.text().then(this.Va.bind(this),this.ga.bind(this))},f.Ta=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?mn(this):gn(this),3==this.readyState&&yn(this)}},f.Va=function(e){this.g&&(this.response=this.responseText=e,mn(this))},f.Ua=function(e){this.g&&(this.response=e,mn(this))},f.ga=function(){this.g&&mn(this)},f.setRequestHeader=function(e,t){this.v.append(e,t)},f.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},f.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(pn.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var bn=y.JSON.parse;function kn(e){Ee.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=wn,this.K=this.L=!1}S(kn,Ee);var wn="",_n=/^https?$/i,On=["POST","PUT"];function En(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,xn(e),jn(e)}function xn(e){e.D||(e.D=!0,xe(e,"complete"),xe(e,"error"))}function Sn(e){if(e.h&&"undefined"!=typeof v&&(!e.C[1]||4!=Cn(e)||2!=e.aa()))if(e.v&&4==Cn(e))Ve(e.Ha,0,e);else if(xe(e,"readystatechange"),4==Cn(e)){e.h=!1;try{var t,n=e.aa();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(It)[1]||null;if(!a&&y.self&&y.self.location){var o=y.self.location.protocol;a=o.substr(0,o.length-1)}i=!_n.test(a?a.toLowerCase():"")}t=i}if(t)xe(e,"complete"),xe(e,"success");else{e.m=6;try{var u=2<Cn(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.aa()+"]",xn(e)}}finally{jn(e)}}}function jn(e,t){if(e.g){Tn(e);var n=e.g,r=e.C[0]?m:null;e.g=null,e.C=null,t||xe(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function Tn(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(y.clearTimeout(e.A),e.A=null)}function Cn(e){return e.g?e.g.readyState:0}function In(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case wn:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Nn(e){var t="";return ue(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Rn(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Nn(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Pt(e,t,n))}function An(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Dn(e){this.Ca=0,this.i=[],this.j=new Ge,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=An("failFast",!1,e),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=An("baseRetryDelayMs",5e3,e),this.bb=An("retryDelaySeedMs",1e4,e),this.$a=An("forwardChannelMaxRetries",2,e),this.ta=An("forwardChannelRequestTimeoutMs",2e4,e),this.ra=e&&e.xmlHttpFactory||void 0,this.Da=e&&e.Zb||!1,this.J=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.I="",this.h=new Zt(e&&e.concurrentRequestLimit),this.Fa=new ln,this.O=e&&e.fastHandshake||!1,this.N=e&&e.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=e&&e.Xb||!1,e&&e.Aa&&this.j.Aa(),e&&e.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&e&&e.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function Ln(e){if(Mn(e),3==e.G){var t=e.U++,n=Rt(e.F);Pt(n,"SID",e.I),Pt(n,"RID",t),Pt(n,"TYPE","terminate"),Vn(e,n),(t=new dt(e,e.j,t,void 0)).K=2,t.v=Mt(Rt(n)),n=!1,y.navigator&&y.navigator.sendBeacon&&(n=y.navigator.sendBeacon(t.v.toString(),"")),!n&&y.Image&&((new Image).src=t.v,n=!0),n||(t.g=Jn(t.l,null),t.g.da(t.v)),t.F=Date.now(),Ot(t)}$n(e)}function Pn(e){e.g&&(Wn(e),e.g.cancel(),e.g=null)}function Mn(e){Pn(e),e.u&&(y.clearTimeout(e.u),e.u=null),Gn(e),e.h.cancel(),e.m&&("number"===typeof e.m&&y.clearTimeout(e.m),e.m=null)}function Fn(e){nn(e.h)||e.m||(e.m=!0,De(e.Ja,e),e.C=0)}function Un(e,t){var n;n=t?t.m:e.U++;var r=Rt(e.F);Pt(r,"SID",e.I),Pt(r,"RID",n),Pt(r,"AID",e.T),Vn(e,r),e.o&&e.s&&Rn(r,e.o,e.s),n=new dt(e,e.j,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.i=t.D.concat(e.i)),t=zn(e,n,1e3),n.setTimeout(Math.round(.5*e.ta)+Math.round(.5*e.ta*Math.random())),on(e.h,n),gt(n,r,t)}function Vn(e,t){e.ia&&ue(e.ia,function(e,n){Pt(t,n,e)}),e.l&&Ct({},function(e,n){Pt(t,n,e)})}function zn(e,t,n){n=Math.min(e.i.length,n);var r=e.l?E(e.l.Ra,e.l,e):null;e:for(var i=e.i,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{hn(l,o,"req"+c+"_")}catch(h){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.i.splice(0,n),t.D=e,r}function qn(e){e.g||e.u||(e.Z=1,De(e.Ia,e),e.A=0)}function Bn(e){return!(e.g||e.u||3<=e.A)&&(e.Z++,e.u=nt(E(e.Ia,e),Qn(e,e.A)),e.A++,!0)}function Wn(e){null!=e.B&&(y.clearTimeout(e.B),e.B=null)}function Hn(e){e.g=new dt(e,e.j,"rpc",e.Z),null===e.o&&(e.g.H=e.s),e.g.N=0;var t=Rt(e.sa);Pt(t,"RID","rpc"),Pt(t,"SID",e.I),Pt(t,"CI",e.L?"0":"1"),Pt(t,"AID",e.T),Pt(t,"TYPE","xmlhttp"),Vn(e,t),e.o&&e.s&&Rn(t,e.o,e.s),e.J&&e.g.setTimeout(e.J);var n=e.g;e=e.ka,n.K=1,n.v=Mt(Rt(t)),n.s=null,n.P=!0,bt(n,e)}function Gn(e){null!=e.v&&(y.clearTimeout(e.v),e.v=null)}function Kn(e,t){var n=null;if(e.g==t){Gn(e),Wn(e),e.g=null;var r=2}else{if(!an(e.h,t))return;n=t.D,un(e.h,t),r=1}if(0!=e.G)if(e.pa=t.Y,t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;xe(r=$e(),new tt(r,n)),Fn(e)}else qn(e);else if(3==(i=t.o)||0==i&&0<e.pa||!(1==r&&function(e,t){return!(rn(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.C>=(e.Za?0:e.$a))&&(e.m=nt(E(e.Ja,e,t),Qn(e,e.C)),e.C++,!0))}(e,t)||2==r&&Bn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:Yn(e,5);break;case 4:Yn(e,10);break;case 3:Yn(e,6);break;default:Yn(e,2)}}function Qn(e,t){var n=e.Xa+Math.floor(Math.random()*e.bb);return e.l||(n*=2),n*t}function Yn(e,t){if(e.j.info("Error code "+t),2==t){var n=null;e.l&&(n=null);var r=E(e.kb,e);n||(n=new Nt("//www.google.com/images/cleardot.gif"),y.location&&"http"==y.location.protocol||At(n,"https"),Mt(n)),function(e,t){var n=new Ge;if(y.Image){var r=new Image;r.onload=x(fn,n,r,"TestLoadImage: loaded",!0,t),r.onerror=x(fn,n,r,"TestLoadImage: error",!1,t),r.onabort=x(fn,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=x(fn,n,r,"TestLoadImage: timeout",!1,t),y.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(n.toString(),r)}else et(2);e.G=0,e.l&&e.l.va(t),$n(e),Mn(e)}function $n(e){if(e.G=0,e.la=[],e.l){var t=sn(e.h);0==t.length&&0==e.i.length||(I(e.la,t),I(e.la,e.i),e.h.i.length=0,C(e.i),e.i.length=0),e.l.ua()}}function Xn(e,t,n){var r=n instanceof Nt?Rt(n):new Nt(n,void 0);if(""!=r.g)t&&(r.g=t+"."+r.g),Dt(r,r.m);else{var i=y.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new Nt(null,void 0);r&&At(a,r),t&&(a.g=t),i&&Dt(a,i),n&&(a.l=n),r=a}return n=e.D,t=e.za,n&&t&&Pt(r,n,t),Pt(r,"VER",e.ma),Vn(e,r),r}function Jn(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Da&&!e.ra?new kn(new dn({jb:!0})):new kn(e.ra)).Ka(e.H),t}function Zn(){}function er(){if(z&&!(10<=Number(ee)))throw Error("Environmental error: no available transport.")}function tr(e,t){Ee.call(this),this.g=new Dn(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.S=e,(e=t&&t.Yb)&&!A(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!A(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new ir(this)}function nr(e){lt.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function rr(){ht.call(this),this.status=1}function ir(e){this.g=e}(f=kn.prototype).Ka=function(e){this.L=e},f.da=function(e,t,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():st.g(),this.C=this.u?ot(this.u):ot(st),this.g.onreadystatechange=E(this.Ha,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(s){return void En(this,s)}if(e=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var a in i)n.set(a,i[a]);else{if("function"!==typeof i.keys||"function"!==typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));var o,u=l(i.keys());try{for(u.s();!(o=u.n()).done;){var s=o.value;n.set(s,i.get(s))}}catch(v){u.e(v)}finally{u.f()}}i=Array.from(n.keys()).find(function(e){return"content-type"==e.toLowerCase()}),a=y.FormData&&e instanceof y.FormData,!(0<=T(On,t))||i||a||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var c,h=l(n);try{for(h.s();!(c=h.n()).done;){var f=Object(r.a)(c.value,2),d=f[0],p=f[1];this.g.setRequestHeader(d,p)}}catch(v){h.e(v)}finally{h.f()}this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Tn(this),0<this.B&&((this.K=function(e){return z&&J()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=E(this.qa,this)):this.A=Ve(this.qa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){En(this,s)}},f.qa=function(){"undefined"!=typeof v&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,xe(this,"timeout"),this.abort(8))},f.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,xe(this,"complete"),xe(this,"abort"),jn(this))},f.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),jn(this,!0)),kn.X.M.call(this)},f.Ha=function(){this.s||(this.F||this.v||this.l?Sn(this):this.fb())},f.fb=function(){Sn(this)},f.aa=function(){try{return 2<Cn(this)?this.g.status:-1}catch(en){return-1}},f.fa=function(){try{return this.g?this.g.responseText:""}catch(en){return""}},f.Sa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),bn(t)}},f.Ea=function(){return this.m},f.Oa=function(){return"string"===typeof this.j?this.j:String(this.j)},(f=Dn.prototype).ma=8,f.G=1,f.Ja=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;var t=new dt(this,this.j,e,void 0),n=this.s;if(this.S&&(n?le(n=se(n),this.S):n=this.S),null!==this.o||this.N||(t.H=n,n=null),this.O)e:{for(var r=0,i=0;i<this.i.length;i++){var a=this.i[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.i.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=zn(this,t,r),Pt(i=Rt(this.F),"RID",e),Pt(i,"CVER",22),this.D&&Pt(i,"X-HTTP-Session-Id",this.D),Vn(this,i),n&&(this.N?r="headers="+encodeURIComponent(String(Nn(n)))+"&"+r:this.o&&Rn(i,this.o,n)),on(this.h,t),this.Ya&&Pt(i,"TYPE","init"),this.O?(Pt(i,"$req",r),Pt(i,"SID","null"),t.Z=!0,gt(t,i,null)):gt(t,i,r),this.G=2}}else 3==this.G&&(e?Un(this,e):0==this.i.length||nn(this.h)||Un(this))},f.Ia=function(){if(this.u=null,Hn(this),this.$&&!(this.K||null==this.g||0>=this.P)){var e=2*this.P;this.j.info("BP detection timer enabled: "+e),this.B=nt(E(this.eb,this),e)}},f.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,et(10),Pn(this),Hn(this))},f.cb=function(){null!=this.v&&(this.v=null,Pn(this),Bn(this),et(19))},f.kb=function(e){e?(this.j.info("Successfully pinged google.com"),et(2)):(this.j.info("Failed to ping google.com"),et(1))},(f=Zn.prototype).xa=function(){},f.wa=function(){},f.va=function(){},f.ua=function(){},f.Ra=function(){},er.prototype.g=function(e,t){return new tr(e,t)},S(tr,Ee),tr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;et(0),e.V=t,e.ia=n||{},e.L=e.Y,e.F=Xn(e,null,e.V),Fn(e)},tr.prototype.close=function(){Ln(this.g)},tr.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=je(e),e=n);t.i.push(new Jt(t.ab++,e)),3==t.G&&Fn(t)},tr.prototype.M=function(){this.g.l=null,delete this.j,Ln(this.g),delete this.g,tr.X.M.call(this)},S(nr,lt),S(rr,ht),S(ir,Zn),ir.prototype.xa=function(){xe(this.g,"a")},ir.prototype.wa=function(e){xe(this.g,new nr(e))},ir.prototype.va=function(e){xe(this.g,new rr)},ir.prototype.ua=function(){xe(this.g,"b")},er.prototype.createWebChannel=er.prototype.g,tr.prototype.send=tr.prototype.u,tr.prototype.open=tr.prototype.m,tr.prototype.close=tr.prototype.close,rt.NO_ERROR=0,rt.TIMEOUT=8,rt.HTTP_ERROR=6,it.COMPLETE="complete",ut.EventType=ct,ct.OPEN="a",ct.CLOSE="b",ct.ERROR="c",ct.MESSAGE="d",Ee.prototype.listen=Ee.prototype.N,kn.prototype.listenOnce=kn.prototype.O,kn.prototype.getLastError=kn.prototype.Oa,kn.prototype.getLastErrorCode=kn.prototype.Ea,kn.prototype.getStatus=kn.prototype.aa,kn.prototype.getResponseJson=kn.prototype.Sa,kn.prototype.getResponseText=kn.prototype.fa,kn.prototype.send=kn.prototype.da,kn.prototype.setWithCredentials=kn.prototype.Ka;var ar=p.createWebChannelTransport=function(){return new er},or=p.getStatEventTarget=function(){return $e()},ur=p.ErrorCode=rt,sr=p.EventType=it,cr=p.Event=Qe,lr=p.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},hr=p.FetchXmlHttpFactory=dn,fr=p.WebChannel=ut,dr=p.XhrIo=kn}).call(this,n(24))},function(e,t,n){"use strict";n.d(t,"a",function(){return l}),n.d(t,"b",function(){return h});n(13);var r=n(8),i=n(3),a=n(0),o=n(11);function u(){return(u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function s(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var c=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];function l(e){var t=e.basename,n=e.children,u=e.window,s=i.useRef();null==s.current&&(s.current=Object(o.f)({window:u,v5Compat:!0}));var c=s.current,l=i.useState({action:c.action,location:c.location}),h=Object(r.a)(l,2),f=h[0],d=h[1];return i.useLayoutEffect(function(){return c.listen(d)},[c]),i.createElement(a.b,{basename:t,children:n,location:f.location,navigationType:f.action,navigator:c})}var h=i.forwardRef(function(e,t){var n=e.onClick,r=e.relative,l=e.reloadDocument,h=e.replace,f=e.state,d=e.target,p=e.to,v=e.preventScrollReset,y=s(e,c),m=Object(a.i)(p,{relative:r}),g=function(e,t){var n=void 0===t?{}:t,r=n.target,u=n.replace,s=n.state,c=n.preventScrollReset,l=n.relative,h=Object(a.l)(),f=Object(a.j)(),d=Object(a.o)(e,{relative:l});return i.useCallback(function(t){if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,r)){t.preventDefault();var n=void 0!==u?u:Object(o.h)(f)===Object(o.h)(d);h(e,{replace:n,state:s,preventScrollReset:c,relative:l})}},[f,h,d,u,s,r,e,c,l])}(p,{replace:h,state:f,target:d,preventScrollReset:v,relative:r});return i.createElement("a",u({},y,{href:m,onClick:l?n:function(e){n&&n(e),e.defaultPrevented||g(e)},ref:t,target:d}))});var f,d;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(f||(f={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(d||(d={}))},function(e,t,n){"use strict";n.d(t,"a",function(){return f}),n.d(t,"b",function(){return v});var r=n(13),i=n(2),a=n(8),o=n(1),u=n(4),s=n(5);function c(){c=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(C){s=function(e,t,n){return e[t]=n}}function l(e,t,n,i){var a=t&&t.prototype instanceof d?t:d,o=Object.create(a.prototype),u=new S(i||[]);return r(o,"_invoke",{value:_(e,n,u)}),o}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=l;var f={};function d(){}function p(){}function v(){}var y={};s(y,a,function(){return this});var m=Object.getPrototypeOf,g=m&&m(m(j([])));g&&g!==t&&n.call(g,a)&&(y=g);var b=v.prototype=d.prototype=Object.create(y);function k(e){["next","throw","return"].forEach(function(t){s(e,t,function(e){return this._invoke(t,e)})})}function w(e,t){var i;r(this,"_invoke",{value:function(r,a){function o(){return new t(function(i,o){!function r(i,a,o,u){var s=h(e[i],e,a);if("throw"!==s.type){var c=s.arg,l=c.value;return l&&"object"==typeof l&&n.call(l,"__await")?t.resolve(l.__await).then(function(e){r("next",e,o,u)},function(e){r("throw",e,o,u)}):t.resolve(l).then(function(e){c.value=e,o(c)},function(e){return r("throw",e,o,u)})}u(s.arg)}(r,a,i,o)})}return i=i?i.then(o,o):o()}})}function _(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return T()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=O(o,n);if(u){if(u===f)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=h(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===f)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function O(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var i=h(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,f;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function j(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:T}}function T(){return{value:void 0,done:!0}}return p.prototype=v,r(b,"constructor",{value:v,configurable:!0}),r(v,"constructor",{value:p,configurable:!0}),p.displayName=s(v,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,s(e,u,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},k(w.prototype),s(w.prototype,o,function(){return this}),e.AsyncIterator=w,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new w(l(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then(function(e){return e.done?e.value:o.next()})},k(b),s(b,u,"Generator"),s(b,a,function(){return this}),s(b,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=j,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:j(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function l(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var f=function(){function e(t,n,r){Object(o.a)(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return Object(u.a)(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),d="[DEFAULT]",p=function(){function e(t,n){Object(o.a)(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return Object(u.a)(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new s.a;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:d})}catch(c){}var t,n=l(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=Object(a.a)(t.value,2),i=r[0],o=r[1],u=this.normalizeInstanceIdentifier(i);try{var s=this.getOrInitializeService({instanceIdentifier:u});o.resolve(s)}catch(c){}}}catch(h){n.e(h)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=Object(i.a)(c().mark(function e(){var t;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(Object(r.a)(t.filter(function(e){return"INTERNAL"in e}).map(function(e){return e.INTERNAL.delete()})),Object(r.a)(t.filter(function(e){return"_delete"in e}).map(function(e){return e._delete()}))));case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,o=this.getOrInitializeService({instanceIdentifier:r,options:n}),u=l(this.instancesDeferred.entries());try{for(u.s();!(i=u.n()).done;){var s=Object(a.a)(i.value,2),c=s[0],h=s[1];r===this.normalizeInstanceIdentifier(c)&&h.resolve(o)}}catch(f){u.e(f)}finally{u.f()}return o}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=l(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(o){}}}catch(u){i.e(u)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===d?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(o){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d;return this.component?this.component.multipleInstances?e:d:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var v=function(){function e(t){Object(o.a)(this,e),this.name=t,this.providers=new Map}return Object(u.a)(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new p(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}()},function(e,t,n){"use strict";function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"a",function(){return r})},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(r){"object"===typeof window&&(n=window)}e.exports=n},function(e,t){var n,r,i=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function u(e){if(n===setTimeout)return setTimeout(e,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"===typeof setTimeout?setTimeout:a}catch(e){n=a}try{r="function"===typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var s,c=[],l=!1,h=-1;function f(){l&&s&&(l=!1,s.length?c=s.concat(c):h=-1,c.length&&d())}function d(){if(!l){var e=u(f);l=!0;for(var t=c.length;t;){for(s=c,c=[];++h<t;)s&&s[h].run();h=-1,t=c.length}s=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function v(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new p(e,t)),1!==c.length||l||u(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){"use strict";function r(e){if(Array.isArray(e))return e}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";function r(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(23);function i(e,t,n){return(i=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var a=new(Function.bind.apply(e,i));return n&&Object(r.a)(a,n.prototype),a}).apply(null,arguments)}},function(e,t,n){var r,i,a;i=[],void 0===(a="function"===typeof(r=function e(){"use strict";var t="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==t?t:{},n=!t.document&&!!t.postMessage,r=n&&/blob:/i.test((t.location||{}).protocol),i={},a=0,o={parse:function(n,r){var u=(r=r||{}).dynamicTyping||!1;if(w(u)&&(r.dynamicTypingFunction=u,u={}),r.dynamicTyping=u,r.transform=!!w(r.transform)&&r.transform,r.worker&&o.WORKERS_SUPPORTED){var s=function(){if(!o.WORKERS_SUPPORTED)return!1;var n,r,u=(n=t.URL||t.webkitURL||null,r=e.toString(),o.BLOB_URL||(o.BLOB_URL=n.createObjectURL(new Blob(["(",r,")();"],{type:"text/javascript"})))),s=new t.Worker(u);return s.onmessage=y,s.id=a++,i[s.id]=s}();return s.userStep=r.step,s.userChunk=r.chunk,s.userComplete=r.complete,s.userError=r.error,r.step=w(r.step),r.chunk=w(r.chunk),r.complete=w(r.complete),r.error=w(r.error),delete r.worker,void s.postMessage({input:n,config:r,workerId:s.id})}var d=null;return o.NODE_STREAM_INPUT,"string"==typeof n?d=r.download?new c(r):new h(r):!0===n.readable&&w(n.read)&&w(n.on)?d=new f(r):(t.File&&n instanceof File||n instanceof Object)&&(d=new l(r)),d.stream(n)},unparse:function(e,t){var n=!1,r=!0,i=",",a="\r\n",u='"',s=u+u,c=!1,l=null,h=!1;!function(){if("object"==typeof t){if("string"!=typeof t.delimiter||o.BAD_DELIMITERS.filter(function(e){return-1!==t.delimiter.indexOf(e)}).length||(i=t.delimiter),("boolean"==typeof t.quotes||"function"==typeof t.quotes||Array.isArray(t.quotes))&&(n=t.quotes),"boolean"!=typeof t.skipEmptyLines&&"string"!=typeof t.skipEmptyLines||(c=t.skipEmptyLines),"string"==typeof t.newline&&(a=t.newline),"string"==typeof t.quoteChar&&(u=t.quoteChar),"boolean"==typeof t.header&&(r=t.header),Array.isArray(t.columns)){if(0===t.columns.length)throw new Error("Option columns is empty");l=t.columns}void 0!==t.escapeChar&&(s=t.escapeChar+u),("boolean"==typeof t.escapeFormulae||t.escapeFormulae instanceof RegExp)&&(h=t.escapeFormulae instanceof RegExp?t.escapeFormulae:/^[=+\-@\t\r].*$/)}}();var f=new RegExp(p(u),"g");if("string"==typeof e&&(e=JSON.parse(e)),Array.isArray(e)){if(!e.length||Array.isArray(e[0]))return d(null,e,c);if("object"==typeof e[0])return d(l||Object.keys(e[0]),e,c)}else if("object"==typeof e)return"string"==typeof e.data&&(e.data=JSON.parse(e.data)),Array.isArray(e.data)&&(e.fields||(e.fields=e.meta&&e.meta.fields||l),e.fields||(e.fields=Array.isArray(e.data[0])?e.fields:"object"==typeof e.data[0]?Object.keys(e.data[0]):[]),Array.isArray(e.data[0])||"object"==typeof e.data[0]||(e.data=[e.data])),d(e.fields||[],e.data||[],c);throw new Error("Unable to serialize unrecognized input");function d(e,t,n){var o="";"string"==typeof e&&(e=JSON.parse(e)),"string"==typeof t&&(t=JSON.parse(t));var u=Array.isArray(e)&&0<e.length,s=!Array.isArray(t[0]);if(u&&r){for(var c=0;c<e.length;c++)0<c&&(o+=i),o+=v(e[c],c);0<t.length&&(o+=a)}for(var l=0;l<t.length;l++){var h=u?e.length:t[l].length,f=!1,d=u?0===Object.keys(t[l]).length:0===t[l].length;if(n&&!u&&(f="greedy"===n?""===t[l].join("").trim():1===t[l].length&&0===t[l][0].length),"greedy"===n&&u){for(var p=[],y=0;y<h;y++){var m=s?e[y]:y;p.push(t[l][m])}f=""===p.join("").trim()}if(!f){for(var g=0;g<h;g++){0<g&&!d&&(o+=i);var b=u&&s?e[g]:g;o+=v(t[l][b],g)}l<t.length-1&&(!n||0<h&&!d)&&(o+=a)}}return o}function v(e,t){if(null==e)return"";if(e.constructor===Date)return JSON.stringify(e).slice(1,25);var r=!1;h&&"string"==typeof e&&h.test(e)&&(e="'"+e,r=!0);var a=e.toString().replace(f,s);return(r=r||!0===n||"function"==typeof n&&n(e,t)||Array.isArray(n)&&n[t]||function(e,t){for(var n=0;n<t.length;n++)if(-1<e.indexOf(t[n]))return!0;return!1}(a,o.BAD_DELIMITERS)||-1<a.indexOf(i)||" "===a.charAt(0)||" "===a.charAt(a.length-1))?u+a+u:a}}};if(o.RECORD_SEP=String.fromCharCode(30),o.UNIT_SEP=String.fromCharCode(31),o.BYTE_ORDER_MARK="\ufeff",o.BAD_DELIMITERS=["\r","\n",'"',o.BYTE_ORDER_MARK],o.WORKERS_SUPPORTED=!n&&!!t.Worker,o.NODE_STREAM_INPUT=1,o.LocalChunkSize=10485760,o.RemoteChunkSize=5242880,o.DefaultDelimiter=",",o.Parser=v,o.ParserHandle=d,o.NetworkStreamer=c,o.FileStreamer=l,o.StringStreamer=h,o.ReadableStreamStreamer=f,t.jQuery){var u=t.jQuery;u.fn.parse=function(e){var n=e.config||{},r=[];return this.each(function(e){if("INPUT"!==u(this).prop("tagName").toUpperCase()||"file"!==u(this).attr("type").toLowerCase()||!t.FileReader||!this.files||0===this.files.length)return!0;for(var i=0;i<this.files.length;i++)r.push({file:this.files[i],inputElem:this,instanceConfig:u.extend({},n)})}),i(),this;function i(){if(0!==r.length){var t,n,i,s=r[0];if(w(e.before)){var c=e.before(s.file,s.inputElem);if("object"==typeof c){if("abort"===c.action)return t=s.file,n=s.inputElem,i=c.reason,void(w(e.error)&&e.error({name:"AbortError"},t,n,i));if("skip"===c.action)return void a();"object"==typeof c.config&&(s.instanceConfig=u.extend(s.instanceConfig,c.config))}else if("skip"===c)return void a()}var l=s.instanceConfig.complete;s.instanceConfig.complete=function(e){w(l)&&l(e,s.file,s.inputElem),a()},o.parse(s.file,s.instanceConfig)}else w(e.complete)&&e.complete()}function a(){r.splice(0,1),i()}}}function s(e){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(e){var t=b(e);t.chunkSize=parseInt(t.chunkSize),e.step||e.chunk||(t.chunkSize=null),this._handle=new d(t),(this._handle.streamer=this)._config=t}.call(this,e),this.parseChunk=function(e,n){if(this.isFirstChunk&&w(this._config.beforeFirstChunk)){var i=this._config.beforeFirstChunk(e);void 0!==i&&(e=i)}this.isFirstChunk=!1,this._halted=!1;var a=this._partialLine+e;this._partialLine="";var u=this._handle.parse(a,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var s=u.meta.cursor;this._finished||(this._partialLine=a.substring(s-this._baseIndex),this._baseIndex=s),u&&u.data&&(this._rowCount+=u.data.length);var c=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(r)t.postMessage({results:u,workerId:o.WORKER_ID,finished:c});else if(w(this._config.chunk)&&!n){if(this._config.chunk(u,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);u=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(u.data),this._completeResults.errors=this._completeResults.errors.concat(u.errors),this._completeResults.meta=u.meta),this._completed||!c||!w(this._config.complete)||u&&u.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),c||u&&u.meta.paused||this._nextChunk(),u}this._halted=!0},this._sendError=function(e){w(this._config.error)?this._config.error(e):r&&this._config.error&&t.postMessage({workerId:o.WORKER_ID,error:e,finished:!1})}}function c(e){var t;(e=e||{}).chunkSize||(e.chunkSize=o.RemoteChunkSize),s.call(this,e),this._nextChunk=n?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(e){this._input=e,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(t=new XMLHttpRequest,this._config.withCredentials&&(t.withCredentials=this._config.withCredentials),n||(t.onload=k(this._chunkLoaded,this),t.onerror=k(this._chunkError,this)),t.open(this._config.downloadRequestBody?"POST":"GET",this._input,!n),this._config.downloadRequestHeaders){var e=this._config.downloadRequestHeaders;for(var r in e)t.setRequestHeader(r,e[r])}if(this._config.chunkSize){var i=this._start+this._config.chunkSize-1;t.setRequestHeader("Range","bytes="+this._start+"-"+i)}try{t.send(this._config.downloadRequestBody)}catch(e){this._chunkError(e.message)}n&&0===t.status&&this._chunkError()}},this._chunkLoaded=function(){4===t.readyState&&(t.status<200||400<=t.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:t.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(e){var t=e.getResponseHeader("Content-Range");return null===t?-1:parseInt(t.substring(t.lastIndexOf("/")+1))}(t),this.parseChunk(t.responseText)))},this._chunkError=function(e){var n=t.statusText||e;this._sendError(new Error(n))}}function l(e){var t,n;(e=e||{}).chunkSize||(e.chunkSize=o.LocalChunkSize),s.call(this,e);var r="undefined"!=typeof FileReader;this.stream=function(e){this._input=e,n=e.slice||e.webkitSlice||e.mozSlice,r?((t=new FileReader).onload=k(this._chunkLoaded,this),t.onerror=k(this._chunkError,this)):t=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var e=this._input;if(this._config.chunkSize){var i=Math.min(this._start+this._config.chunkSize,this._input.size);e=n.call(e,this._start,i)}var a=t.readAsText(e,this._config.encoding);r||this._chunkLoaded({target:{result:a}})},this._chunkLoaded=function(e){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(e.target.result)},this._chunkError=function(){this._sendError(t.error)}}function h(e){var t;s.call(this,e=e||{}),this.stream=function(e){return t=e,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var e,n=this._config.chunkSize;return n?(e=t.substring(0,n),t=t.substring(n)):(e=t,t=""),this._finished=!t,this.parseChunk(e)}}}function f(e){s.call(this,e=e||{});var t=[],n=!0,r=!1;this.pause=function(){s.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){s.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(e){this._input=e,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){r&&1===t.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),t.length?this.parseChunk(t.shift()):n=!0},this._streamData=k(function(e){try{t.push("string"==typeof e?e:e.toString(this._config.encoding)),n&&(n=!1,this._checkIsFinished(),this.parseChunk(t.shift()))}catch(e){this._streamError(e)}},this),this._streamError=k(function(e){this._streamCleanUp(),this._sendError(e)},this),this._streamEnd=k(function(){this._streamCleanUp(),r=!0,this._streamData("")},this),this._streamCleanUp=k(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function d(e){var t,n,r,i=Math.pow(2,53),a=-i,u=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,s=/^(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))$/,c=this,l=0,h=0,f=!1,d=!1,y=[],m={data:[],errors:[],meta:{}};if(w(e.step)){var g=e.step;e.step=function(t){if(m=t,O())_();else{if(_(),0===m.data.length)return;l+=t.data.length,e.preview&&l>e.preview?n.abort():(m.data=m.data[0],g(m,c))}}}function k(t){return"greedy"===e.skipEmptyLines?""===t.join("").trim():1===t.length&&0===t[0].length}function _(){return m&&r&&(x("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+o.DefaultDelimiter+"'"),r=!1),e.skipEmptyLines&&(m.data=m.data.filter(function(e){return!k(e)})),O()&&function(){if(m)if(Array.isArray(m.data[0])){for(var t=0;O()&&t<m.data.length;t++)m.data[t].forEach(n);m.data.splice(0,1)}else m.data.forEach(n);function n(t,n){w(e.transformHeader)&&(t=e.transformHeader(t,n)),y.push(t)}}(),function(){if(!m||!e.header&&!e.dynamicTyping&&!e.transform)return m;function t(t,n){var r,i=e.header?{}:[];for(r=0;r<t.length;r++){var a=r,o=t[r];e.header&&(a=r>=y.length?"__parsed_extra":y[r]),e.transform&&(o=e.transform(o,a)),o=E(a,o),"__parsed_extra"===a?(i[a]=i[a]||[],i[a].push(o)):i[a]=o}return e.header&&(r>y.length?x("FieldMismatch","TooManyFields","Too many fields: expected "+y.length+" fields but parsed "+r,h+n):r<y.length&&x("FieldMismatch","TooFewFields","Too few fields: expected "+y.length+" fields but parsed "+r,h+n)),i}var n=1;return!m.data.length||Array.isArray(m.data[0])?(m.data=m.data.map(t),n=m.data.length):m.data=t(m.data,0),e.header&&m.meta&&(m.meta.fields=y),h+=n,m}()}function O(){return e.header&&0===y.length}function E(t,n){return r=t,e.dynamicTypingFunction&&void 0===e.dynamicTyping[r]&&(e.dynamicTyping[r]=e.dynamicTypingFunction(r)),!0===(e.dynamicTyping[r]||e.dynamicTyping)?"true"===n||"TRUE"===n||"false"!==n&&"FALSE"!==n&&(function(e){if(u.test(e)){var t=parseFloat(e);if(a<t&&t<i)return!0}return!1}(n)?parseFloat(n):s.test(n)?new Date(n):""===n?null:n):n;var r}function x(e,t,n,r){var i={type:e,code:t,message:n};void 0!==r&&(i.row=r),m.errors.push(i)}this.parse=function(i,a,u){var s=e.quoteChar||'"';if(e.newline||(e.newline=function(e,t){e=e.substring(0,1048576);var n=new RegExp(p(t)+"([^]*?)"+p(t),"gm"),r=(e=e.replace(n,"")).split("\r"),i=e.split("\n"),a=1<i.length&&i[0].length<r[0].length;if(1===r.length||a)return"\n";for(var o=0,u=0;u<r.length;u++)"\n"===r[u][0]&&o++;return o>=r.length/2?"\r\n":"\r"}(i,s)),r=!1,e.delimiter)w(e.delimiter)&&(e.delimiter=e.delimiter(i),m.meta.delimiter=e.delimiter);else{var c=function(t,n,r,i,a){var u,s,c,l;a=a||[",","\t","|",";",o.RECORD_SEP,o.UNIT_SEP];for(var h=0;h<a.length;h++){var f=a[h],d=0,p=0,y=0;c=void 0;for(var m=new v({comments:i,delimiter:f,newline:n,preview:10}).parse(t),g=0;g<m.data.length;g++)if(r&&k(m.data[g]))y++;else{var b=m.data[g].length;p+=b,void 0!==c?0<b&&(d+=Math.abs(b-c),c=b):c=b}0<m.data.length&&(p/=m.data.length-y),(void 0===s||d<=s)&&(void 0===l||l<p)&&1.99<p&&(s=d,u=f,l=p)}return{successful:!!(e.delimiter=u),bestDelimiter:u}}(i,e.newline,e.skipEmptyLines,e.comments,e.delimitersToGuess);c.successful?e.delimiter=c.bestDelimiter:(r=!0,e.delimiter=o.DefaultDelimiter),m.meta.delimiter=e.delimiter}var l=b(e);return e.preview&&e.header&&l.preview++,t=i,n=new v(l),m=n.parse(t,a,u),_(),f?{meta:{paused:!0}}:m||{meta:{paused:!1}}},this.paused=function(){return f},this.pause=function(){f=!0,n.abort(),t=w(e.chunk)?"":t.substring(n.getCharIndex())},this.resume=function(){c.streamer._halted?(f=!1,c.streamer.parseChunk(t,!0)):setTimeout(c.resume,3)},this.aborted=function(){return d},this.abort=function(){d=!0,n.abort(),m.meta.aborted=!0,w(e.complete)&&e.complete(m),t=""}}function p(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function v(e){var t,n=(e=e||{}).delimiter,r=e.newline,i=e.comments,a=e.step,u=e.preview,s=e.fastMode,c=t=void 0===e.quoteChar||null===e.quoteChar?'"':e.quoteChar;if(void 0!==e.escapeChar&&(c=e.escapeChar),("string"!=typeof n||-1<o.BAD_DELIMITERS.indexOf(n))&&(n=","),i===n)throw new Error("Comment character same as delimiter");!0===i?i="#":("string"!=typeof i||-1<o.BAD_DELIMITERS.indexOf(i))&&(i=!1),"\n"!==r&&"\r"!==r&&"\r\n"!==r&&(r="\n");var l=0,h=!1;this.parse=function(e,o,f){if("string"!=typeof e)throw new Error("Input must be a string");var d=e.length,v=n.length,y=r.length,m=i.length,g=w(a),b=[],k=[],_=[],O=l=0;if(!e)return P();if(s||!1!==s&&-1===e.indexOf(t)){for(var E=e.split(r),x=0;x<E.length;x++){if(_=E[x],l+=_.length,x!==E.length-1)l+=r.length;else if(f)return P();if(!i||_.substring(0,m)!==i){if(g){if(b=[],R(_.split(n)),M(),h)return P()}else R(_.split(n));if(u&&u<=x)return b=b.slice(0,u),P(!0)}}return P()}for(var S=e.indexOf(n,l),j=e.indexOf(r,l),T=new RegExp(p(c)+p(t),"g"),C=e.indexOf(t,l);;)if(e[l]!==t)if(i&&0===_.length&&e.substring(l,l+m)===i){if(-1===j)return P();l=j+y,j=e.indexOf(r,l),S=e.indexOf(n,l)}else if(-1!==S&&(S<j||-1===j))_.push(e.substring(l,S)),l=S+v,S=e.indexOf(n,l);else{if(-1===j)break;if(_.push(e.substring(l,j)),L(j+y),g&&(M(),h))return P();if(u&&b.length>=u)return P(!0)}else for(C=l,l++;;){if(-1===(C=e.indexOf(t,C+1)))return f||k.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:b.length,index:l}),D();if(C===d-1)return D(e.substring(l,C).replace(T,t));if(t!==c||e[C+1]!==c){if(t===c||0===C||e[C-1]!==c){-1!==S&&S<C+1&&(S=e.indexOf(n,C+1)),-1!==j&&j<C+1&&(j=e.indexOf(r,C+1));var I=A(-1===j?S:Math.min(S,j));if(e.substr(C+1+I,v)===n){_.push(e.substring(l,C).replace(T,t)),e[l=C+1+I+v]!==t&&(C=e.indexOf(t,l)),S=e.indexOf(n,l),j=e.indexOf(r,l);break}var N=A(j);if(e.substring(C+1+N,C+1+N+y)===r){if(_.push(e.substring(l,C).replace(T,t)),L(C+1+N+y),S=e.indexOf(n,l),C=e.indexOf(t,l),g&&(M(),h))return P();if(u&&b.length>=u)return P(!0);break}k.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:b.length,index:l}),C++}}else C++}return D();function R(e){b.push(e),O=l}function A(t){var n=0;if(-1!==t){var r=e.substring(C+1,t);r&&""===r.trim()&&(n=r.length)}return n}function D(t){return f||(void 0===t&&(t=e.substring(l)),_.push(t),l=d,R(_),g&&M()),P()}function L(t){l=t,R(_),_=[],j=e.indexOf(r,l)}function P(e){return{data:b,errors:k,meta:{delimiter:n,linebreak:r,aborted:h,truncated:!!e,cursor:O+(o||0)}}}function M(){a(P()),b=[],k=[]}},this.abort=function(){h=!0},this.getCharIndex=function(){return l}}function y(e){var t=e.data,n=i[t.workerId],r=!1;if(t.error)n.userError(t.error,t.file);else if(t.results&&t.results.data){var a={abort:function(){r=!0,m(t.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:g,resume:g};if(w(n.userStep)){for(var o=0;o<t.results.data.length&&(n.userStep({data:t.results.data[o],errors:t.results.errors,meta:t.results.meta},a),!r);o++);delete t.results}else w(n.userChunk)&&(n.userChunk(t.results,a,t.file),delete t.results)}t.finished&&!r&&m(t.workerId,t.results)}function m(e,t){var n=i[e];w(n.userComplete)&&n.userComplete(t),n.terminate(),delete i[e]}function g(){throw new Error("Not implemented.")}function b(e){if("object"!=typeof e||null===e)return e;var t=Array.isArray(e)?[]:{};for(var n in e)t[n]=b(e[n]);return t}function k(e,t){return function(){e.apply(t,arguments)}}function w(e){return"function"==typeof e}return r&&(t.onmessage=function(e){var n=e.data;if(void 0===o.WORKER_ID&&n&&(o.WORKER_ID=n.workerId),"string"==typeof n.input)t.postMessage({workerId:o.WORKER_ID,results:o.parse(n.input,n.config),finished:!0});else if(t.File&&n.input instanceof File||n.input instanceof Object){var r=o.parse(n.input,n.config);r&&t.postMessage({workerId:o.WORKER_ID,results:r,finished:!0})}}),(c.prototype=Object.create(s.prototype)).constructor=c,(l.prototype=Object.create(s.prototype)).constructor=l,(h.prototype=Object.create(h.prototype)).constructor=h,(f.prototype=Object.create(s.prototype)).constructor=f,o})?r.apply(t,i):r)||(e.exports=a)},function(e,t,n){"use strict";var r=n(7),i=n(23);var a=n(29);function o(e){var t="function"===typeof Map?new Map:void 0;return(o=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,o)}function o(){return Object(a.a)(e,arguments,Object(r.a)(this).constructor)}return o.prototype=Object.create(e.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),Object(i.a)(o,e)})(e)}n.d(t,"a",function(){return o})},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return Vu}),n.d(t,"b",function(){return _o}),n.d(t,"c",function(){return Oo}),n.d(t,"d",function(){return Bo}),n.d(t,"e",function(){return zu}),n.d(t,"f",function(){return Ou}),n.d(t,"g",function(){return Ku}),n.d(t,"h",function(){return xu});var r=n(29),i=n(19),a=n(8),o=n(2),u=n(10),s=n(7),c=n(9),l=n(13),h=n(1),f=n(4),d=n(14),p=n(22),v=n(16),y=n(5),m=n(20);function g(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function k(){k=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(C){s=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var a=t&&t.prototype instanceof f?t:f,o=Object.create(a.prototype),u=new S(i||[]);return r(o,"_invoke",{value:_(e,n,u)}),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=c;var h={};function f(){}function d(){}function p(){}var v={};s(v,a,function(){return this});var y=Object.getPrototypeOf,m=y&&y(y(j([])));m&&m!==t&&n.call(m,a)&&(v=m);var g=p.prototype=f.prototype=Object.create(v);function b(e){["next","throw","return"].forEach(function(t){s(e,t,function(e){return this._invoke(t,e)})})}function w(e,t){var i;r(this,"_invoke",{value:function(r,a){function o(){return new t(function(i,o){!function r(i,a,o,u){var s=l(e[i],e,a);if("throw"!==s.type){var c=s.arg,h=c.value;return h&&"object"==typeof h&&n.call(h,"__await")?t.resolve(h.__await).then(function(e){r("next",e,o,u)},function(e){r("throw",e,o,u)}):t.resolve(h).then(function(e){c.value=e,o(c)},function(e){return r("throw",e,o,u)})}u(s.arg)}(r,a,i,o)})}return i=i?i.then(o,o):o()}})}function _(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return T()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=O(o,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===h)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function O(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=l(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,h;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function j(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:T}}function T(){return{value:void 0,done:!0}}return d.prototype=p,r(g,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:d,configurable:!0}),d.displayName=s(p,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,u,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(w.prototype),s(w.prototype,o,function(){return this}),e.AsyncIterator=w,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new w(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then(function(e){return e.done?e.value:o.next()})},b(g),s(g,u,"Generator"),s(g,a,function(){return this}),s(g,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=j,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:j(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},e}var w="@firebase/firestore",_=function(){function e(t){Object(h.a)(this,e),this.uid=t}return Object(f.a)(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();_.UNAUTHENTICATED=new _(null),_.GOOGLE_CREDENTIALS=new _("google-credentials-uid"),_.FIRST_PARTY=new _("first-party-uid"),_.MOCK_USER=new _("mock-user");var O="9.15.0",E=new v.b("@firebase/firestore");function x(){return E.logLevel}function S(e){if(E.logLevel<=v.a.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(C);E.debug.apply(E,["Firestore (".concat(O,"): ").concat(e)].concat(Object(l.a)(i)))}}function j(e){if(E.logLevel<=v.a.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(C);E.error.apply(E,["Firestore (".concat(O,"): ").concat(e)].concat(Object(l.a)(i)))}}function T(e){if(E.logLevel<=v.a.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(C);E.warn.apply(E,["Firestore (".concat(O,"): ").concat(e)].concat(Object(l.a)(i)))}}function C(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function I(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(O,") INTERNAL ASSERTION FAILED: ")+e;throw j(t),new Error(t)}function N(e,t){e||I()}function R(e,t){return e}var A={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},D=function(e){function t(e,n){var r;return Object(h.a)(this,t),(r=Object(u.a)(this,Object(s.a)(t).call(this,e,n))).code=e,r.message=n,r.toString=function(){return"".concat(r.name,": [code=").concat(r.code,"]: ").concat(r.message)},r}return Object(c.a)(t,e),t}(y.c),L=function e(){var t=this;Object(h.a)(this,e),this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},P=function e(t,n){Object(h.a)(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))},M=function(){function e(){Object(h.a)(this,e)}return Object(f.a)(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable(function(){return t(_.UNAUTHENTICATED)})}},{key:"shutdown",value:function(){}}]),e}(),F=function(){function e(t){Object(h.a)(this,e),this.token=t,this.changeListener=null}return Object(f.a)(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable(function(){return t(n.token.user)})}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),U=function(){function e(t){Object(h.a)(this,e),this.t=t,this.currentUser=_.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return Object(f.a)(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new L;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new L,e.enqueueRetryable(function(){return i(n.currentUser)})};var u=function(){var t=a;e.enqueueRetryable(Object(o.a)(k().mark(function e(){return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}},e)})))},s=function(e){S("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),u()};this.t.onInit(function(e){return s(e)}),setTimeout(function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?s(e):(S("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new L)}},0),u()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return e.i!==t?(S("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(N("string"==typeof n.accessToken),new P(n.accessToken,e.currentUser)):null}):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return N(null===e||"string"==typeof e),new _(e)}}]),e}(),V=function(){function e(t,n,r,i){Object(h.a)(this,e),this.h=t,this.l=n,this.m=r,this.g=i,this.type="FirstParty",this.user=_.FIRST_PARTY,this.p=new Map}return Object(f.a)(e,[{key:"I",value:function(){return this.g?this.g():(N(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}},{key:"headers",get:function(){this.p.set("X-Goog-AuthUser",this.l);var e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}]),e}(),z=function(){function e(t,n,r,i){Object(h.a)(this,e),this.h=t,this.l=n,this.m=r,this.g=i}return Object(f.a)(e,[{key:"getToken",value:function(){return Promise.resolve(new V(this.h,this.l,this.m,this.g))}},{key:"start",value:function(e,t){e.enqueueRetryable(function(){return t(_.FIRST_PARTY)})}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),q=function e(t){Object(h.a)(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)},B=function(){function e(t){Object(h.a)(this,e),this.T=t,this.forceRefresh=!1,this.appCheck=null,this.A=null}return Object(f.a)(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&S("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.A;return n.A=e.token,S("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable(function(){return r(t)})};var i=function(e){S("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.T.onInit(function(e){return i(e)}),setTimeout(function(){if(!n.appCheck){var e=n.T.getImmediate({optional:!0});e?i(e):S("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(function(t){return t?(N("string"==typeof t.token),e.A=t.token,new q(t.token)):null}):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function W(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var H=function(){function e(){Object(h.a)(this,e)}return Object(f.a)(e,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=W(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function G(e,t){return e<t?-1:e>t?1:0}function K(e,t,n){return e.length===t.length&&e.every(function(e,r){return n(e,t[r])})}var Q=function(){function e(t,n){if(Object(h.a)(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new D(A.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new D(A.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new D(A.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new D(A.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return Object(f.a)(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?G(this.nanoseconds,e.nanoseconds):G(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Y=function(){function e(t){Object(h.a)(this,e),this.timestamp=t}return Object(f.a)(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Q(0,0))}},{key:"max",value:function(){return new e(new Q(253402300799,999999999))}}]),e}(),$=function(){function e(t,n,r){Object(h.a)(this,e),void 0===n?n=0:n>t.length&&I(),void 0===r?r=t.length-n:r>t.length-n&&I(),this.segments=t,this.offset=n,this.len=r}return Object(f.a)(e,[{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach(function(e){n.push(e)}):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}},{key:"length",get:function(){return this.len}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),X=function(e){function t(){return Object(h.a)(this,t),Object(u.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(f.a)(t,[{key:"construct",value:function(e,n,r){return new t(e,n,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new D(A.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,Object(l.a)(u.split("/").filter(function(e){return e.length>0})))}return new t(e)}},{key:"emptyPath",value:function(){return new t([])}}]),t}($),J=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Z=function(e){function t(){return Object(h.a)(this,t),Object(u.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(f.a)(t,[{key:"construct",value:function(e,n,r){return new t(e,n,r)}},{key:"canonicalString",value:function(){return this.toArray().map(function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e}).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return J.test(e)}},{key:"keyField",value:function(){return new t(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var n=[],r="",i=0,a=function(){if(0===r.length)throw new D(A.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));n.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new D(A.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new D(A.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new D(A.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}},{key:"emptyPath",value:function(){return new t([])}}]),t}($),ee=function(){function e(t){Object(h.a)(this,e),this.path=t}return Object(f.a)(e,[{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===X.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}},{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}}],[{key:"fromPath",value:function(t){return new e(X.fromString(t))}},{key:"fromName",value:function(t){return new e(X.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(X.emptyPath())}},{key:"comparator",value:function(e,t){return X.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new X(t.slice()))}}]),e}(),te=function e(t,n,r,i){Object(h.a)(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i};te.UNKNOWN_ID=-1;function ne(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Y.fromTimestamp(1e9===r?new Q(n+1,0):new Q(n,r));return new ie(i,ee.empty(),t)}function re(e){return new ie(e.readTime,e.key,-1)}var ie=function(){function e(t,n,r){Object(h.a)(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return Object(f.a)(e,null,[{key:"min",value:function(){return new e(Y.min(),ee.empty(),-1)}},{key:"max",value:function(){return new e(Y.max(),ee.empty(),-1)}}]),e}();function ae(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=ee.comparator(e.documentKey,t.documentKey))?n:G(e.largestBatchId,t.largestBatchId)}var oe="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",ue=function(){function e(){Object(h.a)(this,e),this.onCommittedListeners=[]}return Object(f.a)(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach(function(e){return e()})}}]),e}();function se(e){return ce.apply(this,arguments)}function ce(){return(ce=Object(o.a)(k().mark(function e(t){return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===A.FAILED_PRECONDITION&&t.message===oe){e.next=2;break}throw t;case 2:S("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}var le=function(){function e(t){var n=this;Object(h.a)(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)},function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)})}return Object(f.a)(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&I(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e(function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}})}},{key:"toPromise",value:function(){var e=this;return new Promise(function(t,n){e.next(t,n)})}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction(function(){return t(n)}):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction(function(){return t(n)}):e.reject(n)}}],[{key:"resolve",value:function(t){return new e(function(e,n){e(t)})}},{key:"reject",value:function(t){return new e(function(e,n){n(t)})}},{key:"waitFor",value:function(t){return new e(function(e,n){var r=0,i=0,a=!1;t.forEach(function(t){++r,t.next(function(){++i,a&&i===r&&e()},function(e){return n(e)})}),a=!0,i===r&&e()})}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=g(t);try{var a=function(){var t=n.value;r=r.next(function(n){return n?e.resolve(n):t()})};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach(function(e,i){r.push(t.call(n,e,i))}),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e(function(e,r){for(var i=t.length,a=new Array(i),o=0,u=function(u){var s=u;n(t[s]).next(function(t){a[s]=t,++o===i&&e(a)},function(e){return r(e)})},s=0;s<i;s++)u(s)})}},{key:"doWhile",value:function(t,n){return new e(function(e,r){!function i(){!0===t()?n().next(function(){i()},r):e()}()})}}]),e}();function he(e){return"IndexedDbTransactionError"===e.name}var fe=function(){function e(t,n){var r=this;Object(h.a)(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.ut(e)},this.ct=function(e){return n.writeSequenceNumber(e)})}return Object(f.a)(e,[{key:"ut",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.ct&&this.ct(e),e}}]),e}();fe.at=-1;var de=function e(t,n,r,i,a,o,u,s){Object(h.a)(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s},pe=function(){function e(t,n){Object(h.a)(this,e),this.projectId=t,this.database=n||"(default)"}return Object(f.a)(e,[{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}},{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function ve(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function ye(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function me(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function ge(e){return null==e}function be(e){return 0===e&&1/e==-1/0}function ke(e){return"number"==typeof e&&Number.isInteger(e)&&!be(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var we=function(){function e(t){Object(h.a)(this,e),this.binaryString=t}return Object(f.a)(e,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return G(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(t){return new e(atob(t))}},{key:"fromUint8Array",value:function(t){return new e(function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(t))}}]),e}();we.EMPTY_BYTE_STRING=new we("");var _e=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Oe(e){if(N(!!e),"string"==typeof e){var t=0,n=_e.exec(e);if(N(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Ee(e.seconds),nanos:Ee(e.nanos)}}function Ee(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function xe(e){return"string"==typeof e?we.fromBase64String(e):we.fromUint8Array(e)}function Se(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function je(e){var t=Oe(e.mapValue.fields.__local_write_time__.timestampValue);return new Q(t.seconds,t.nanos)}var Te={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ce(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Se(e)?4:qe(e)?9007199254740991:10:I()}function Ie(e,t){if(e===t)return!0;var n=Ce(e);if(n!==Ce(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return je(e).isEqual(je(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Oe(e.timestampValue),r=Oe(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return xe(e.bytesValue).isEqual(xe(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Ee(e.geoPointValue.latitude)===Ee(t.geoPointValue.latitude)&&Ee(e.geoPointValue.longitude)===Ee(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Ee(e.integerValue)===Ee(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Ee(e.doubleValue),r=Ee(t.doubleValue);return n===r?be(n)===be(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return K(e.arrayValue.values||[],t.arrayValue.values||[],Ie);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(ve(n)!==ve(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Ie(n[i],r[i])))return!1;return!0}(e,t);default:return I()}}function Ne(e,t){return void 0!==(e.values||[]).find(function(e){return Ie(e,t)})}function Re(e,t){if(e===t)return 0;var n=Ce(e),r=Ce(t);if(n!==r)return G(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return G(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Ee(e.integerValue||e.doubleValue),r=Ee(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Ae(e.timestampValue,t.timestampValue);case 4:return Ae(je(e),je(t));case 5:return G(e.stringValue,t.stringValue);case 6:return function(e,t){var n=xe(e),r=xe(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=G(n[i],r[i]);if(0!==a)return a}return G(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=G(Ee(e.latitude),Ee(t.latitude));return 0!==n?n:G(Ee(e.longitude),Ee(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=Re(n[i],r[i]);if(a)return a}return G(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Te.mapValue&&t===Te.mapValue)return 0;if(e===Te.mapValue)return 1;if(t===Te.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=G(r[o],a[o]);if(0!==u)return u;var s=Re(n[r[o]],i[a[o]]);if(0!==s)return s}return G(r.length,a.length)}(e.mapValue,t.mapValue);default:throw I()}}function Ae(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return G(e,t);var n=Oe(e),r=Oe(t),i=G(n.seconds,r.seconds);return 0!==i?i:G(n.nanos,r.nanos)}function De(e){return function e(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(e){var t=Oe(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?xe(t.bytesValue).toBase64():"referenceValue"in t?(r=t.referenceValue,ee.fromName(r).toString()):"geoPointValue"in t?"geo(".concat((n=t.geoPointValue).latitude,",").concat(n.longitude,")"):"arrayValue"in t?function(t){var n,r="[",i=!0,a=g(t.values||[]);try{for(a.s();!(n=a.n()).done;){var o=n.value;i?i=!1:r+=",",r+=e(o)}}catch(u){a.e(u)}finally{a.f()}return r+"]"}(t.arrayValue):"mapValue"in t?function(t){var n,r=Object.keys(t.fields||{}).sort(),i="{",a=!0,o=g(r);try{for(o.s();!(n=o.n()).done;){var u=n.value;a?a=!1:i+=",",i+="".concat(u,":").concat(e(t.fields[u]))}}catch(s){o.e(s)}finally{o.f()}return i+"}"}(t.mapValue):I();var n,r}(e)}function Le(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Pe(e){return!!e&&"integerValue"in e}function Me(e){return!!e&&"arrayValue"in e}function Fe(e){return!!e&&"nullValue"in e}function Ue(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Ve(e){return!!e&&"mapValue"in e}function ze(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return ye(e.mapValue.fields,function(e,n){return t.mapValue.fields[e]=ze(n)}),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=ze(e.arrayValue.values[r]);return n}return Object.assign({},e)}function qe(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}var Be=function e(t,n){Object(h.a)(this,e),this.position=t,this.inclusive=n};function We(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?ee.comparator(ee.fromName(o.referenceValue),n.key):Re(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function He(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Ie(e.position[n],t.position[n]))return!1;return!0}var Ge=function e(){Object(h.a)(this,e)},Ke=function(e){function t(e,n,r){var i;return Object(h.a)(this,t),(i=Object(u.a)(this,Object(s.a)(t).call(this))).field=e,i.op=n,i.value=r,i}return Object(c.a)(t,e),Object(f.a)(t,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Re(t,this.value)):null!==t&&Ce(this.value)===Ce(t)&&this.matchesComparison(Re(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return I()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}},{key:"getFirstInequalityField",value:function(){return this.isInequality()?this.field:null}}],[{key:"create",value:function(e,n,r){return e.isKeyField()?"in"===n||"not-in"===n?this.createKeyFieldInFilter(e,n,r):new et(e,n,r):"array-contains"===n?new it(e,r):"in"===n?new at(e,r):"not-in"===n?new ot(e,r):"array-contains-any"===n?new ut(e,r):new t(e,n,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new tt(e,n):new nt(e,n)}}]),t}(Ge),Qe=function(e){function t(e,n){var r;return Object(h.a)(this,t),(r=Object(u.a)(this,Object(s.a)(t).call(this))).filters=e,r.op=n,r.ht=null,r}return Object(c.a)(t,e),Object(f.a)(t,[{key:"matches",value:function(e){return Ye(this)?void 0===this.filters.find(function(t){return!t.matches(e)}):void 0!==this.filters.find(function(t){return t.matches(e)})}},{key:"getFlattenedFilters",value:function(){return null!==this.ht||(this.ht=this.filters.reduce(function(e,t){return e.concat(t.getFlattenedFilters())},[])),this.ht}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}},{key:"getFirstInequalityField",value:function(){var e=this.lt(function(e){return e.isInequality()});return null!==e?e.field:null}},{key:"lt",value:function(e){var t,n=g(this.getFlattenedFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e(r))return r}}catch(i){n.e(i)}finally{n.f()}return null}}],[{key:"create",value:function(e,n){return new t(e,n)}}]),t}(Ge);function Ye(e){return"and"===e.op}function $e(e){return Xe(e)&&Ye(e)}function Xe(e){var t,n=g(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof Qe)return!1}}catch(r){n.e(r)}finally{n.f()}return!0}function Je(e,t){return e instanceof Ke?function(e,t){return t instanceof Ke&&e.op===t.op&&e.field.isEqual(t.field)&&Ie(e.value,t.value)}(e,t):e instanceof Qe?function(e,t){return t instanceof Qe&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(function(e,n,r){return e&&Je(n,t.filters[r])},!0)}(e,t):void I()}function Ze(e){return e instanceof Ke?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(De(e.value))}(e):e instanceof Qe?function(e){return e.op.toString()+" {"+e.getFilters().map(Ze).join(" ,")+"}"}(e):"Filter"}var et=function(e){function t(e,n,r){var i;return Object(h.a)(this,t),(i=Object(u.a)(this,Object(s.a)(t).call(this,e,n,r))).key=ee.fromName(r.referenceValue),i}return Object(c.a)(t,e),Object(f.a)(t,[{key:"matches",value:function(e){var t=ee.comparator(e.key,this.key);return this.matchesComparison(t)}}]),t}(Ke),tt=function(e){function t(e,n){var r;return Object(h.a)(this,t),(r=Object(u.a)(this,Object(s.a)(t).call(this,e,"in",n))).keys=rt("in",n),r}return Object(c.a)(t,e),Object(f.a)(t,[{key:"matches",value:function(e){return this.keys.some(function(t){return t.isEqual(e.key)})}}]),t}(Ke),nt=function(e){function t(e,n){var r;return Object(h.a)(this,t),(r=Object(u.a)(this,Object(s.a)(t).call(this,e,"not-in",n))).keys=rt("not-in",n),r}return Object(c.a)(t,e),Object(f.a)(t,[{key:"matches",value:function(e){return!this.keys.some(function(t){return t.isEqual(e.key)})}}]),t}(Ke);function rt(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(e){return ee.fromName(e.referenceValue)})}var it=function(e){function t(e,n){return Object(h.a)(this,t),Object(u.a)(this,Object(s.a)(t).call(this,e,"array-contains",n))}return Object(c.a)(t,e),Object(f.a)(t,[{key:"matches",value:function(e){var t=e.data.field(this.field);return Me(t)&&Ne(t.arrayValue,this.value)}}]),t}(Ke),at=function(e){function t(e,n){return Object(h.a)(this,t),Object(u.a)(this,Object(s.a)(t).call(this,e,"in",n))}return Object(c.a)(t,e),Object(f.a)(t,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&Ne(this.value.arrayValue,t)}}]),t}(Ke),ot=function(e){function t(e,n){return Object(h.a)(this,t),Object(u.a)(this,Object(s.a)(t).call(this,e,"not-in",n))}return Object(c.a)(t,e),Object(f.a)(t,[{key:"matches",value:function(e){if(Ne(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!Ne(this.value.arrayValue,t)}}]),t}(Ke),ut=function(e){function t(e,n){return Object(h.a)(this,t),Object(u.a)(this,Object(s.a)(t).call(this,e,"array-contains-any",n))}return Object(c.a)(t,e),Object(f.a)(t,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!Me(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(e){return Ne(t.value.arrayValue,e)})}}]),t}(Ke),st=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";Object(h.a)(this,e),this.field=t,this.dir=n};function ct(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var lt=function(){function e(t,n){Object(h.a)(this,e),this.comparator=t,this.root=n||ft.EMPTY}return Object(f.a)(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,ft.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ft.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal(function(t,n){return e(t,n),!1})}},{key:"toString",value:function(){var e=[];return this.inorderTraversal(function(t,n){return e.push("".concat(t,":").concat(n)),!1}),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new ht(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new ht(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new ht(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new ht(this.root,e,this.comparator,!0)}},{key:"size",get:function(){return this.root.size}}]),e}(),ht=function(){function e(t,n,r,i){Object(h.a)(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return Object(f.a)(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),ft=function(){function e(t,n,r,i,a){Object(h.a)(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return Object(f.a)(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw I();if(this.right.isRed())throw I();var e=this.left.check();if(e!==this.right.check())throw I();return e+(this.isRed()?0:1)}}]),e}();ft.EMPTY=null,ft.RED=!0,ft.BLACK=!1,ft.EMPTY=new(function(){function e(){Object(h.a)(this,e),this.size=0}return Object(f.a)(e,[{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new ft(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}},{key:"key",get:function(){throw I()}},{key:"value",get:function(){throw I()}},{key:"color",get:function(){throw I()}},{key:"left",get:function(){throw I()}},{key:"right",get:function(){throw I()}}]),e}());var dt=function(){function e(t){Object(h.a)(this,e),this.comparator=t,this.data=new lt(this.comparator)}return Object(f.a)(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal(function(t,n){return e(t),!1})}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new pt(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new pt(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach(function(e){t=t.add(e)}),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach(function(t){e.push(t)}),e}},{key:"toString",value:function(){var e=[];return this.forEach(function(t){return e.push(t)}),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}},{key:"size",get:function(){return this.data.size}}]),e}(),pt=function(){function e(t){Object(h.a)(this,e),this.iter=t}return Object(f.a)(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();var vt=function(){function e(t){Object(h.a)(this,e),this.fields=t,t.sort(Z.comparator)}return Object(f.a)(e,[{key:"unionWith",value:function(t){var n,r=new dt(Z.comparator),i=g(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,u=g(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;r=r.add(s)}}catch(c){u.e(c)}finally{u.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=g(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return K(this.fields,e.fields,function(e,t){return e.isEqual(t)})}}],[{key:"empty",value:function(){return new e([])}}]),e}(),yt=function(){function e(t){Object(h.a)(this,e),this.value=t}return Object(f.a)(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!Ve(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ze(t)}},{key:"setAll",value:function(e){var t=this,n=Z.emptyPath(),r={},i=[];e.forEach(function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=ze(e):i.push(a.lastSegment())});var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());Ve(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return Ie(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];Ve(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){ye(t,function(t,n){return e[t]=n});var r,i=g(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(ze(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function mt(e){var t=[];return ye(e.fields,function(e,n){var r=new Z([e]);if(Ve(n)){var i=mt(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=g(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)}),new vt(t)}var gt=function(){function e(t,n,r,i,a,o,u){Object(h.a)(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=u}return Object(f.a)(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(Y.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=yt.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=yt.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=Y.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Y.min(),Y.min(),Y.min(),yt.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,i){return new e(t,1,n,Y.min(),r,i,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Y.min(),Y.min(),yt.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Y.min(),Y.min(),yt.empty(),2)}}]),e}(),bt=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;Object(h.a)(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.ft=null};function kt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new bt(e,t,n,r,i,a,o)}function wt(e){var t=R(e);if(null===t.ft){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(function(e){return function e(t){if(t instanceof Ke)return t.field.canonicalString()+t.op.toString()+De(t.value);var n=t.filters.map(function(t){return e(t)}).join(",");return"".concat(t.op,"(").concat(n,")")}(e)}).join(","),n+="|ob:",n+=t.orderBy.map(function(e){return function(e){return e.field.canonicalString()+e.dir}(e)}).join(","),ge(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(function(e){return De(e)}).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(function(e){return De(e)}).join(",")),t.ft=n}return t.ft}function _t(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!ct(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!Je(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!He(e.startAt,t.startAt)&&He(e.endAt,t.endAt)}function Ot(e){return ee.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}var Et=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;Object(h.a)(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.dt=null,this._t=null,this.startAt,this.endAt};function xt(e,t,n,r,i,a,o,u){return new Et(e,t,n,r,i,a,o,u)}function St(e){return new Et(e)}function jt(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Tt(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Ct(e){var t,n=g(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value.getFirstInequalityField();if(null!==r)return r}}catch(i){n.e(i)}finally{n.f()}return null}function It(e){return null!==e.collectionGroup}function Nt(e){var t=R(e);if(null===t.dt){t.dt=[];var n=Ct(t),r=Tt(t);if(null!==n&&null===r)n.isKeyField()||t.dt.push(new st(n)),t.dt.push(new st(Z.keyField(),"asc"));else{var i,a=!1,o=g(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.dt.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.dt.push(new st(Z.keyField(),s))}}}return t.dt}function Rt(e){var t=R(e);if(!t._t)if("F"===t.limitType)t._t=kt(t.path,t.collectionGroup,Nt(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=g(Nt(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new st(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new Be(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new Be(t.startAt.position,t.startAt.inclusive):null;t._t=kt(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t._t}function At(e,t){t.getFirstInequalityField(),Ct(e);var n=e.filters.concat([t]);return new Et(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Dt(e,t,n){return new Et(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Lt(e,t){return _t(Rt(e),Rt(t))&&e.limitType===t.limitType}function Pt(e){return"".concat(wt(Rt(e)),"|lt:").concat(e.limitType)}function Mt(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(function(e){return Ze(e)}).join(", "),"]")),ge(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)}).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(function(e){return De(e)}).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(function(e){return De(e)}).join(",")),"Target(".concat(t,")")}(Rt(e)),"; limitType=").concat(e.limitType,")")}function Ft(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):ee.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=g(Nt(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=g(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=We(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Nt(e),t))&&!(e.endAt&&!function(e,t,n){var r=We(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Nt(e),t))}(e,t)}function Ut(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Vt(e){return function(t,n){var r,i=!1,a=g(Nt(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=zt(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function zt(e,t,n){var r=e.field.isKeyField()?ee.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Re(r,i):I()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return I()}}function qt(e,t){if(e.wt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:be(t)?"-0":t}}function Bt(e){return{integerValue:""+e}}function Wt(e,t){return ke(t)?Bt(t):qt(e,t)}var Ht=function e(){Object(h.a)(this,e),this._=void 0};function Gt(e,t,n){return e instanceof Yt?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof $t?Xt(e,t):e instanceof Jt?Zt(e,t):function(e,t){var n=Qt(e,t),r=tn(n)+tn(e.gt);return Pe(n)&&Pe(e.gt)?Bt(r):qt(e.yt,r)}(e,t)}function Kt(e,t,n){return e instanceof $t?Xt(e,t):e instanceof Jt?Zt(e,t):n}function Qt(e,t){return e instanceof en?Pe(n=t)||n&&"doubleValue"in n?t:{integerValue:0}:null;var n}var Yt=function(e){function t(){return Object(h.a)(this,t),Object(u.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),t}(Ht),$t=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(u.a)(this,Object(s.a)(t).call(this))).elements=e,n}return Object(c.a)(t,e),t}(Ht);function Xt(e,t){var n,r=nn(t),i=g(e.elements);try{var a=function(){var e=n.value;r.some(function(t){return Ie(t,e)})||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Jt=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(u.a)(this,Object(s.a)(t).call(this))).elements=e,n}return Object(c.a)(t,e),t}(Ht);function Zt(e,t){var n,r=nn(t),i=g(e.elements);try{var a=function(){var e=n.value;r=r.filter(function(t){return!Ie(t,e)})};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var en=function(e){function t(e,n){var r;return Object(h.a)(this,t),(r=Object(u.a)(this,Object(s.a)(t).call(this))).yt=e,r.gt=n,r}return Object(c.a)(t,e),t}(Ht);function tn(e){return Ee(e.integerValue||e.doubleValue)}function nn(e){return Me(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var rn=function e(t,n){Object(h.a)(this,e),this.version=t,this.transformResults=n},an=function(){function e(t,n){Object(h.a)(this,e),this.updateTime=t,this.exists=n}return Object(f.a)(e,[{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}},{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function on(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var un=function e(){Object(h.a)(this,e)};function sn(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new kn(e.key,an.none()):new dn(e.key,e.data,an.none());var n,r=e.data,i=yt.empty(),a=new dt(Z.comparator),o=g(t.fields);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(!a.has(u)){var s=r.field(u);null===s&&u.length>1&&(u=u.popLast(),s=r.field(u)),null===s?i.delete(u):i.set(u,s),a=a.add(u)}}}catch(c){o.e(c)}finally{o.f()}return new pn(e.key,i,new vt(a.toArray()),an.none())}function cn(e,t,n){e instanceof dn?function(e,t,n){var r=e.value.clone(),i=yn(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof pn?function(e,t,n){if(on(e.precondition,t)){var r=yn(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(vn(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function ln(e,t,n,r){return e instanceof dn?function(e,t,n,r){if(!on(e.precondition,t))return n;var i=e.value.clone(),a=mn(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof pn?function(e,t,n,r){if(!on(e.precondition,t))return n;var i=mn(e.fieldTransforms,r,t),a=t.data;return a.setAll(vn(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(function(e){return e.field}))}(e,t,n,r):function(e,t,n){return on(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function hn(e,t){var n,r=null,i=g(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=Qt(a.transform,o||null);null!=u&&(null===r&&(r=yt.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function fn(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&K(e,t,function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof $t&&t instanceof $t||e instanceof Jt&&t instanceof Jt?K(e.elements,t.elements,Ie):e instanceof en&&t instanceof en?Ie(e.gt,t.gt):e instanceof Yt&&t instanceof Yt}(e.transform,t.transform)}(e,t)})}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var dn=function(e){function t(e,n,r){var i,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return Object(h.a)(this,t),(i=Object(u.a)(this,Object(s.a)(t).call(this))).key=e,i.value=n,i.precondition=r,i.fieldTransforms=a,i.type=0,i}return Object(c.a)(t,e),Object(f.a)(t,[{key:"getFieldMask",value:function(){return null}}]),t}(un),pn=function(e){function t(e,n,r,i){var a,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return Object(h.a)(this,t),(a=Object(u.a)(this,Object(s.a)(t).call(this))).key=e,a.data=n,a.fieldMask=r,a.precondition=i,a.fieldTransforms=o,a.type=1,a}return Object(c.a)(t,e),Object(f.a)(t,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),t}(un);function vn(e){var t=new Map;return e.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}}),t}function yn(e,t,n){var r=new Map;N(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,Kt(o,u,n[i]))}return r}function mn(e,t,n){var r,i=new Map,a=g(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,Gt(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var gn,bn,kn=function(e){function t(e,n){var r;return Object(h.a)(this,t),(r=Object(u.a)(this,Object(s.a)(t).call(this))).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return Object(c.a)(t,e),Object(f.a)(t,[{key:"getFieldMask",value:function(){return null}}]),t}(un),wn=function(e){function t(e,n){var r;return Object(h.a)(this,t),(r=Object(u.a)(this,Object(s.a)(t).call(this))).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return Object(c.a)(t,e),Object(f.a)(t,[{key:"getFieldMask",value:function(){return null}}]),t}(un),_n=function e(t){Object(h.a)(this,e),this.count=t};function On(e){switch(e){default:return I();case A.CANCELLED:case A.UNKNOWN:case A.DEADLINE_EXCEEDED:case A.RESOURCE_EXHAUSTED:case A.INTERNAL:case A.UNAVAILABLE:case A.UNAUTHENTICATED:return!1;case A.INVALID_ARGUMENT:case A.NOT_FOUND:case A.ALREADY_EXISTS:case A.PERMISSION_DENIED:case A.FAILED_PRECONDITION:case A.ABORTED:case A.OUT_OF_RANGE:case A.UNIMPLEMENTED:case A.DATA_LOSS:return!0}}function En(e){if(void 0===e)return j("GRPC error has no .code"),A.UNKNOWN;switch(e){case gn.OK:return A.OK;case gn.CANCELLED:return A.CANCELLED;case gn.UNKNOWN:return A.UNKNOWN;case gn.DEADLINE_EXCEEDED:return A.DEADLINE_EXCEEDED;case gn.RESOURCE_EXHAUSTED:return A.RESOURCE_EXHAUSTED;case gn.INTERNAL:return A.INTERNAL;case gn.UNAVAILABLE:return A.UNAVAILABLE;case gn.UNAUTHENTICATED:return A.UNAUTHENTICATED;case gn.INVALID_ARGUMENT:return A.INVALID_ARGUMENT;case gn.NOT_FOUND:return A.NOT_FOUND;case gn.ALREADY_EXISTS:return A.ALREADY_EXISTS;case gn.PERMISSION_DENIED:return A.PERMISSION_DENIED;case gn.FAILED_PRECONDITION:return A.FAILED_PRECONDITION;case gn.ABORTED:return A.ABORTED;case gn.OUT_OF_RANGE:return A.OUT_OF_RANGE;case gn.UNIMPLEMENTED:return A.UNIMPLEMENTED;case gn.DATA_LOSS:return A.DATA_LOSS;default:return I()}}(bn=gn||(gn={}))[bn.OK=0]="OK",bn[bn.CANCELLED=1]="CANCELLED",bn[bn.UNKNOWN=2]="UNKNOWN",bn[bn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",bn[bn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",bn[bn.NOT_FOUND=5]="NOT_FOUND",bn[bn.ALREADY_EXISTS=6]="ALREADY_EXISTS",bn[bn.PERMISSION_DENIED=7]="PERMISSION_DENIED",bn[bn.UNAUTHENTICATED=16]="UNAUTHENTICATED",bn[bn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",bn[bn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",bn[bn.ABORTED=10]="ABORTED",bn[bn.OUT_OF_RANGE=11]="OUT_OF_RANGE",bn[bn.UNIMPLEMENTED=12]="UNIMPLEMENTED",bn[bn.INTERNAL=13]="INTERNAL",bn[bn.UNAVAILABLE=14]="UNAVAILABLE",bn[bn.DATA_LOSS=15]="DATA_LOSS";var xn=function(){function e(t,n){Object(h.a)(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return Object(f.a)(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=g(n);try{for(i.s();!(r=i.n()).done;){var o=Object(a.a)(r.value,2),u=o[0],s=o[1];if(this.equalsFn(u,e))return s}}catch(c){i.e(c)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){ye(this.inner,function(t,n){var r,i=g(n);try{for(i.s();!(r=i.n()).done;){var o=Object(a.a)(r.value,2),u=o[0],s=o[1];e(u,s)}}catch(c){i.e(c)}finally{i.f()}})}},{key:"isEmpty",value:function(){return me(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),Sn=new lt(ee.comparator);function jn(){return Sn}var Tn=new lt(ee.comparator);function Cn(){for(var e=Tn,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function In(e){var t=Tn;return e.forEach(function(e,n){return t=t.insert(e,n.overlayedDocument)}),t}function Nn(){return An()}function Rn(){return An()}function An(){return new xn(function(e){return e.toString()},function(e,t){return e.isEqual(t)})}var Dn=new lt(ee.comparator),Ln=new dt(ee.comparator);function Pn(){for(var e=Ln,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var Mn=new dt(G);function Fn(){return Mn}var Un=function(){function e(t,n,r,i,a){Object(h.a)(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return Object(f.a)(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,Vn.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(Y.min(),i,Fn(),jn(),Pn())}}]),e}(),Vn=function(){function e(t,n,r,i,a){Object(h.a)(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return Object(f.a)(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,Pn(),Pn(),Pn())}}]),e}(),zn=function e(t,n,r,i){Object(h.a)(this,e),this.It=t,this.removedTargetIds=n,this.key=r,this.Tt=i},qn=function e(t,n){Object(h.a)(this,e),this.targetId=t,this.Et=n},Bn=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:we.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;Object(h.a)(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i},Wn=function(){function e(){Object(h.a)(this,e),this.At=0,this.Rt=Kn(),this.bt=we.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}return Object(f.a)(e,[{key:"Dt",value:function(e){e.approximateByteSize()>0&&(this.vt=!0,this.bt=e)}},{key:"Ct",value:function(){var e=Pn(),t=Pn(),n=Pn();return this.Rt.forEach(function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:I()}}),new Vn(this.bt,this.Pt,e,t,n)}},{key:"xt",value:function(){this.vt=!1,this.Rt=Kn()}},{key:"Nt",value:function(e,t){this.vt=!0,this.Rt=this.Rt.insert(e,t)}},{key:"kt",value:function(e){this.vt=!0,this.Rt=this.Rt.remove(e)}},{key:"Ot",value:function(){this.At+=1}},{key:"Mt",value:function(){this.At-=1}},{key:"Ft",value:function(){this.vt=!0,this.Pt=!0}},{key:"current",get:function(){return this.Pt}},{key:"resumeToken",get:function(){return this.bt}},{key:"Vt",get:function(){return 0!==this.At}},{key:"St",get:function(){return this.vt}}]),e}(),Hn=function(){function e(t){Object(h.a)(this,e),this.$t=t,this.Bt=new Map,this.Lt=jn(),this.qt=Gn(),this.Ut=new dt(G)}return Object(f.a)(e,[{key:"Kt",value:function(e){var t,n=g(e.It);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.Tt&&e.Tt.isFoundDocument()?this.Gt(r,e.Tt):this.Qt(r,e.key,e.Tt)}}catch(u){n.e(u)}finally{n.f()}var i,a=g(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.Qt(o,e.key,e.Tt)}}catch(u){a.e(u)}finally{a.f()}}},{key:"jt",value:function(e){var t=this;this.forEachTarget(e,function(n){var r=t.Wt(n);switch(e.state){case 0:t.zt(n)&&r.Dt(e.resumeToken);break;case 1:r.Mt(),r.Vt||r.xt(),r.Dt(e.resumeToken);break;case 2:r.Mt(),r.Vt||t.removeTarget(n);break;case 3:t.zt(n)&&(r.Ft(),r.Dt(e.resumeToken));break;case 4:t.zt(n)&&(t.Ht(n),r.Dt(e.resumeToken));break;default:I()}})}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach(function(e,r){n.zt(r)&&t(r)})}},{key:"Jt",value:function(e){var t=e.targetId,n=e.Et.count,r=this.Yt(t);if(r){var i=r.target;if(Ot(i))if(0===n){var a=new ee(i.path);this.Qt(t,a,gt.newNoDocument(a,Y.min()))}else N(1===n);else this.Xt(t)!==n&&(this.Ht(t),this.Ut=this.Ut.add(t))}}},{key:"Zt",value:function(e){var t=this,n=new Map;this.Bt.forEach(function(r,i){var a=t.Yt(i);if(a){if(r.current&&Ot(a.target)){var o=new ee(a.target.path);null!==t.Lt.get(o)||t.te(i,o)||t.Qt(i,o,gt.newNoDocument(o,e))}r.St&&(n.set(i,r.Ct()),r.xt())}});var r=Pn();this.qt.forEach(function(e,n){var i=!0;n.forEachWhile(function(e){var n=t.Yt(e);return!n||2===n.purpose||(i=!1,!1)}),i&&(r=r.add(e))}),this.Lt.forEach(function(t,n){return n.setReadTime(e)});var i=new Un(e,n,this.Ut,this.Lt,r);return this.Lt=jn(),this.qt=Gn(),this.Ut=new dt(G),i}},{key:"Gt",value:function(e,t){if(this.zt(e)){var n=this.te(e,t.key)?2:0;this.Wt(e).Nt(t.key,n),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}}},{key:"Qt",value:function(e,t,n){if(this.zt(e)){var r=this.Wt(e);this.te(e,t)?r.Nt(t,1):r.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),n&&(this.Lt=this.Lt.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Bt.delete(e)}},{key:"Xt",value:function(e){var t=this.Wt(e).Ct();return this.$t.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Ot",value:function(e){this.Wt(e).Ot()}},{key:"Wt",value:function(e){var t=this.Bt.get(e);return t||(t=new Wn,this.Bt.set(e,t)),t}},{key:"ee",value:function(e){var t=this.qt.get(e);return t||(t=new dt(G),this.qt=this.qt.insert(e,t)),t}},{key:"zt",value:function(e){var t=null!==this.Yt(e);return t||S("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Yt",value:function(e){var t=this.Bt.get(e);return t&&t.Vt?null:this.$t.ne(e)}},{key:"Ht",value:function(e){var t=this;this.Bt.set(e,new Wn),this.$t.getRemoteKeysForTarget(e).forEach(function(n){t.Qt(e,n,null)})}},{key:"te",value:function(e,t){return this.$t.getRemoteKeysForTarget(e).has(t)}}]),e}();function Gn(){return new lt(ee.comparator)}function Kn(){return new lt(ee.comparator)}var Qn={asc:"ASCENDING",desc:"DESCENDING"},Yn={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},$n={and:"AND",or:"OR"},Xn=function e(t,n){Object(h.a)(this,e),this.databaseId=t,this.wt=n};function Jn(e,t){return e.wt?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Zn(e,t){return e.wt?t.toBase64():t.toUint8Array()}function er(e,t){return Jn(e,t.toTimestamp())}function tr(e){return N(!!e),Y.fromTimestamp(function(e){var t=Oe(e);return new Q(t.seconds,t.nanos)}(e))}function nr(e,t){return function(e){return new X(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function rr(e){var t=X.fromString(e);return N(_r(t)),t}function ir(e,t){return nr(e.databaseId,t.path)}function ar(e,t){var n=rr(t);if(n.get(1)!==e.databaseId.projectId)throw new D(A.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new D(A.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ee(cr(n))}function or(e,t){return nr(e.databaseId,t)}function ur(e){var t=rr(e);return 4===t.length?X.emptyPath():cr(t)}function sr(e){return new X(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function cr(e){return N(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function lr(e,t,n){return{name:ir(e,t),fields:n.value.mapValue.fields}}function hr(e,t){return"found"in t?function(e,t){N(!!t.found),t.found.name,t.found.updateTime;var n=ar(e,t.found.name),r=tr(t.found.updateTime),i=t.found.createTime?tr(t.found.createTime):Y.min(),a=new yt({mapValue:{fields:t.found.fields}});return gt.newFoundDocument(n,r,i,a)}(e,t):"missing"in t?function(e,t){N(!!t.missing),N(!!t.readTime);var n=ar(e,t.missing),r=tr(t.readTime);return gt.newNoDocument(n,r)}(e,t):I()}function fr(e,t){var n;if(t instanceof dn)n={update:lr(e,t.key,t.value)};else if(t instanceof kn)n={delete:ir(e,t.key)};else if(t instanceof pn)n={update:lr(e,t.key,t.data),updateMask:wr(t.fieldMask)};else{if(!(t instanceof wn))return I();n={verify:ir(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(function(e){return function(e,t){var n=t.transform;if(n instanceof Yt)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof $t)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Jt)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof en)return{fieldPath:t.field.canonicalString(),increment:n.gt};throw I()}(0,e)})),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:er(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:I()}(e,t.precondition)),n}function dr(e,t){return{documents:[or(e,t.path)]}}function pr(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=or(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=or(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length)return function e(t){return t instanceof Ke?function(e){if("=="===e.op){if(Ue(e.value))return{unaryFilter:{field:br(e.field),op:"IS_NAN"}};if(Fe(e.value))return{unaryFilter:{field:br(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Ue(e.value))return{unaryFilter:{field:br(e.field),op:"IS_NOT_NAN"}};if(Fe(e.value))return{unaryFilter:{field:br(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:br(e.field),op:mr(e.op),value:e.value}}}(t):t instanceof Qe?function(t){var n=t.getFilters().map(function(t){return e(t)});return 1===n.length?n[0]:{compositeFilter:{op:gr(t.op),filters:n}}}(t):I()}(Qe.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map(function(e){return function(e){return{field:br(e.field),direction:yr(e.dir)}}(e)})}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=function(e,t){return e.wt||ge(t)?t:{value:t}}(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function vr(e){var t=ur(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){N(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=function(e){var t=function e(t){return void 0!==t.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=kr(e.unaryFilter.field);return Ke.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=kr(e.unaryFilter.field);return Ke.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=kr(e.unaryFilter.field);return Ke.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=kr(e.unaryFilter.field);return Ke.create(i,"!=",{nullValue:"NULL_VALUE"});default:return I()}}(t):void 0!==t.fieldFilter?function(e){return Ke.create(kr(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return I()}}(e.fieldFilter.op),e.fieldFilter.value)}(t):void 0!==t.compositeFilter?function(t){return Qe.create(t.compositeFilter.filters.map(function(t){return e(t)}),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return I()}}(t.compositeFilter.op))}(t):I()}(n.where);return t instanceof Qe&&$e(t)?t.getFilters():[t]}());var u=[];n.orderBy&&(u=n.orderBy.map(function(e){return function(e){return new st(kr(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)}));var s=null;n.limit&&(s=function(e){var t;return ge(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new Be(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new Be(n,t)}(n.endAt)),xt(t,i,u,o,s,"F",c,l)}function yr(e){return Qn[e]}function mr(e){return Yn[e]}function gr(e){return $n[e]}function br(e){return{fieldPath:e.canonicalString()}}function kr(e){return Z.fromServerFormat(e.fieldPath)}function wr(e){var t=[];return e.fields.forEach(function(e){return t.push(e.canonicalString())}),{fieldPaths:t}}function _r(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}var Or=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),Er=([].concat(Object(l.a)(Or),["documentOverlays"]),["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"]),xr=Er;[].concat(xr,["indexConfiguration","indexState","indexEntries"]);var Sr=function(){function e(t,n,r,i){Object(h.a)(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return Object(f.a)(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&cn(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=g(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=ln(i,e,t,this.localWriteTime))}}catch(s){r.e(s)}finally{r.f()}var a,o=g(this.mutations);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.key.isEqual(e.key)&&(t=ln(u,e,t,this.localWriteTime))}}catch(s){o.e(s)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=Rn();return this.mutations.forEach(function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=sn(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(Y.min())}),r}},{key:"keys",value:function(){return this.mutations.reduce(function(e,t){return e.add(t.key)},Pn())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&K(this.mutations,e.mutations,function(e,t){return fn(e,t)})&&K(this.baseMutations,e.baseMutations,function(e,t){return fn(e,t)})}}]),e}(),jr=function(){function e(t,n,r,i){Object(h.a)(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return Object(f.a)(e,null,[{key:"from",value:function(t,n,r){N(t.mutations.length===r.length);for(var i=Dn,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),Tr=function(){function e(t,n){Object(h.a)(this,e),this.largestBatchId=t,this.mutation=n}return Object(f.a)(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),Cr=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Y.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Y.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:we.EMPTY_BYTE_STRING;Object(h.a)(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return Object(f.a)(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),Ir=function e(t){Object(h.a)(this,e),this.ie=t};function Nr(e){var t=vr({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Dt(t,t.limit,"L"):t}var Rr=function(){function e(){Object(h.a)(this,e)}return Object(f.a)(e,[{key:"ue",value:function(e,t){this.ce(e,t),t.ae()}},{key:"ce",value:function(e,t){if("nullValue"in e)this.he(t,5);else if("booleanValue"in e)this.he(t,10),t.le(e.booleanValue?1:0);else if("integerValue"in e)this.he(t,15),t.le(Ee(e.integerValue));else if("doubleValue"in e){var n=Ee(e.doubleValue);isNaN(n)?this.he(t,13):(this.he(t,15),be(n)?t.le(0):t.le(n))}else if("timestampValue"in e){var r=e.timestampValue;this.he(t,20),"string"==typeof r?t.fe(r):(t.fe("".concat(r.seconds||"")),t.le(r.nanos||0))}else if("stringValue"in e)this.de(e.stringValue,t),this._e(t);else if("bytesValue"in e)this.he(t,30),t.we(xe(e.bytesValue)),this._e(t);else if("referenceValue"in e)this.me(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.he(t,45),t.le(i.latitude||0),t.le(i.longitude||0)}else"mapValue"in e?qe(e)?this.he(t,Number.MAX_SAFE_INTEGER):(this.ge(e.mapValue,t),this._e(t)):"arrayValue"in e?(this.ye(e.arrayValue,t),this._e(t)):I()}},{key:"de",value:function(e,t){this.he(t,25),this.pe(e,t)}},{key:"pe",value:function(e,t){t.fe(e)}},{key:"ge",value:function(e,t){var n=e.fields||{};this.he(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.de(a,t),this.ce(n[a],t)}}},{key:"ye",value:function(e,t){var n=e.values||[];this.he(t,50);var r,i=g(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.ce(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"me",value:function(e,t){var n=this;this.he(t,37),ee.fromName(e).path.forEach(function(e){n.he(t,60),n.pe(e,t)})}},{key:"he",value:function(e,t){e.le(t)}},{key:"_e",value:function(e){e.le(2)}}]),e}();Rr.Ie=new Rr;var Ar=function(){function e(){Object(h.a)(this,e),this.Je=new Dr}return Object(f.a)(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.Je.add(t),le.resolve()}},{key:"getCollectionParents",value:function(e,t){return le.resolve(this.Je.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return le.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return le.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return le.resolve(null)}},{key:"getIndexType",value:function(e,t){return le.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return le.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return le.resolve(null)}},{key:"getMinOffset",value:function(e,t){return le.resolve(ie.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return le.resolve(ie.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return le.resolve()}},{key:"updateIndexEntries",value:function(e,t){return le.resolve()}}]),e}(),Dr=function(){function e(){Object(h.a)(this,e),this.index={}}return Object(f.a)(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new dt(X.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new dt(X.comparator)).toArray()}}]),e}();new Uint8Array(0);var Lr=function(){function e(t,n,r){Object(h.a)(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return Object(f.a)(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();Lr.DEFAULT_COLLECTION_PERCENTILE=10,Lr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Lr.DEFAULT=new Lr(41943040,Lr.DEFAULT_COLLECTION_PERCENTILE,Lr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Lr.DISABLED=new Lr(-1,0,0);var Pr=function(){function e(t){Object(h.a)(this,e),this.bn=t}return Object(f.a)(e,[{key:"next",value:function(){return this.bn+=2,this.bn}}],[{key:"Pn",value:function(){return new e(0)}},{key:"vn",value:function(){return new e(-1)}}]),e}();var Mr=function(){function e(){Object(h.a)(this,e),this.changes=new xn(function(e){return e.toString()},function(e,t){return e.isEqual(t)}),this.changesApplied=!1}return Object(f.a)(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,gt.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?le.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}();var Fr=function e(t,n){Object(h.a)(this,e),this.overlayedDocument=t,this.mutatedFields=n},Ur=function(){function e(t,n,r,i){Object(h.a)(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return Object(f.a)(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next(function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)}).next(function(e){return null!==r&&ln(r.mutation,e,vt.empty(),Q.now()),e})}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next(function(t){return n.getLocalViewOfDocuments(e,t,Pn()).next(function(){return t})})}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Pn(),i=Nn();return this.populateOverlays(e,i,t).next(function(){return n.computeViews(e,t,i,r).next(function(e){var t=Cn();return e.forEach(function(e,n){t=t.insert(e,n.overlayedDocument)}),t})})}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=Nn();return this.populateOverlays(e,r,t).next(function(){return n.computeViews(e,t,r,Pn())})}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach(function(e){t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(function(e){e.forEach(function(e,n){t.set(e,n)})})}},{key:"computeViews",value:function(e,t,n,r){var i=jn(),a=An(),o=An();return t.forEach(function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof pn)?i=i.insert(t.key,t):void 0!==o&&(a.set(t.key,o.mutation.getFieldMask()),ln(o.mutation,t,o.mutation.getFieldMask(),Q.now()))}),this.recalculateAndSaveOverlays(e,i).next(function(e){return e.forEach(function(e,t){return a.set(e,t)}),t.forEach(function(e,t){var n;return o.set(e,new Fr(t,null!==(n=a.get(e))&&void 0!==n?n:null))}),o})}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=An(),i=new lt(function(e,t){return e-t}),a=Pn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(function(e){var n,a=g(e);try{var o=function(){var e=n.value;e.keys().forEach(function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||vt.empty();o=e.applyToLocalView(a,o),r.set(n,o);var u=(i.get(e.batchId)||Pn()).add(n);i=i.insert(e.batchId,u)}})};for(a.s();!(n=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}}).next(function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,c=i.value,l=Rn();c.forEach(function(e){if(!a.has(e)){var n=sn(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}}),o.push(n.documentOverlayCache.saveOverlays(e,s,l))};u.hasNext();)s();return le.waitFor(o)}).next(function(){return r})}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next(function(t){return n.recalculateAndSaveOverlays(e,t)})}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return ee.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):It(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):le.resolve(Nn()),u=-1,s=a;return o.next(function(t){return le.forEach(t,function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?le.resolve():i.remoteDocumentCache.getEntry(e,t).next(function(e){s=s.insert(t,e)})}).next(function(){return i.populateOverlays(e,t,a)}).next(function(){return i.computeViews(e,s,t,Pn())}).next(function(e){return{batchId:u,changes:In(e)}})})})}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new ee(t)).next(function(e){var t=Cn();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=Cn();return this.indexManager.getCollectionParents(e,i).next(function(o){return le.forEach(o,function(o){var u=function(e,t){return new Et(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,u,n).next(function(e){e.forEach(function(e,t){a=a.insert(e,t)})})}).next(function(){return a})})}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.remoteDocumentCache.getAllFromCollection(e,t.path,n).next(function(a){return r=a,i.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId)}).next(function(e){e.forEach(function(e,t){var n=t.getKey();null===r.get(n)&&(r=r.insert(n,gt.newInvalidDocument(n)))});var n=Cn();return r.forEach(function(r,i){var a=e.get(r);void 0!==a&&ln(a.mutation,i,vt.empty(),Q.now()),Ft(t,i)&&(n=n.insert(r,i))}),n})}}]),e}(),Vr=function(){function e(t){Object(h.a)(this,e),this.yt=t,this.Zn=new Map,this.ts=new Map}return Object(f.a)(e,[{key:"getBundleMetadata",value:function(e,t){return le.resolve(this.Zn.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Zn.set(t.id,{id:(n=t).id,version:n.version,createTime:tr(n.createTime)}),le.resolve()}},{key:"getNamedQuery",value:function(e,t){return le.resolve(this.ts.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.ts.set(t.name,function(e){return{name:e.name,query:Nr(e.bundledQuery),readTime:tr(e.readTime)}}(t)),le.resolve()}}]),e}(),zr=function(){function e(){Object(h.a)(this,e),this.overlays=new lt(ee.comparator),this.es=new Map}return Object(f.a)(e,[{key:"getOverlay",value:function(e,t){return le.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=Nn();return le.forEach(t,function(t){return n.getOverlay(e,t).next(function(e){null!==e&&r.set(t,e)})}).next(function(){return r})}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach(function(n,i){r.oe(e,t,i)}),le.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.es.get(n);return void 0!==i&&(i.forEach(function(e){return r.overlays=r.overlays.remove(e)}),this.es.delete(n)),le.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=Nn(),i=t.length+1,a=new ee(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return le.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new lt(function(e,t){return e-t}),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=Nn(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=Nn(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach(function(e,t){return s.set(e,t)}),!(s.size()>=r)););return le.resolve(s)}},{key:"oe",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.es.get(r.largestBatchId).delete(n.key);this.es.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new Tr(t,n));var a=this.es.get(t);void 0===a&&(a=Pn(),this.es.set(t,a)),this.es.set(t,a.add(n.key))}}]),e}(),qr=function(){function e(){Object(h.a)(this,e),this.ns=new dt(Br.ss),this.rs=new dt(Br.os)}return Object(f.a)(e,[{key:"isEmpty",value:function(){return this.ns.isEmpty()}},{key:"addReference",value:function(e,t){var n=new Br(e,t);this.ns=this.ns.add(n),this.rs=this.rs.add(n)}},{key:"us",value:function(e,t){var n=this;e.forEach(function(e){return n.addReference(e,t)})}},{key:"removeReference",value:function(e,t){this.cs(new Br(e,t))}},{key:"hs",value:function(e,t){var n=this;e.forEach(function(e){return n.removeReference(e,t)})}},{key:"ls",value:function(e){var t=this,n=new ee(new X([])),r=new Br(n,e),i=new Br(n,e+1),a=[];return this.rs.forEachInRange([r,i],function(e){t.cs(e),a.push(e.key)}),a}},{key:"fs",value:function(){var e=this;this.ns.forEach(function(t){return e.cs(t)})}},{key:"cs",value:function(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}},{key:"ds",value:function(e){var t=new ee(new X([])),n=new Br(t,e),r=new Br(t,e+1),i=Pn();return this.rs.forEachInRange([n,r],function(e){i=i.add(e.key)}),i}},{key:"containsKey",value:function(e){var t=new Br(e,0),n=this.ns.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),Br=function(){function e(t,n){Object(h.a)(this,e),this.key=t,this._s=n}return Object(f.a)(e,null,[{key:"ss",value:function(e,t){return ee.comparator(e.key,t.key)||G(e._s,t._s)}},{key:"os",value:function(e,t){return G(e._s,t._s)||ee.comparator(e.key,t.key)}}]),e}(),Wr=function(){function e(t,n){Object(h.a)(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.ws=1,this.gs=new dt(Br.ss)}return Object(f.a)(e,[{key:"checkEmpty",value:function(e){return le.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.ws;this.ws++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new Sr(i,t,n,r);this.mutationQueue.push(a);var o,u=g(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.gs=this.gs.add(new Br(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return le.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return le.resolve(this.ys(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.ps(n),i=r<0?0:r;return le.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return le.resolve(0===this.mutationQueue.length?-1:this.ws-1)}},{key:"getAllMutationBatches",value:function(e){return le.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new Br(t,0),i=new Br(t,Number.POSITIVE_INFINITY),a=[];return this.gs.forEachInRange([r,i],function(e){var t=n.ys(e._s);a.push(t)}),le.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new dt(G);return t.forEach(function(e){var t=new Br(e,0),i=new Br(e,Number.POSITIVE_INFINITY);n.gs.forEachInRange([t,i],function(e){r=r.add(e._s)})}),le.resolve(this.Is(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;ee.isDocumentKey(i)||(i=i.child(""));var a=new Br(new ee(i),0),o=new dt(G);return this.gs.forEachWhile(function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e._s)),!0)},a),le.resolve(this.Is(o))}},{key:"Is",value:function(e){var t=this,n=[];return e.forEach(function(e){var r=t.ys(e);null!==r&&n.push(r)}),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;N(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();var r=this.gs;return le.forEach(t.mutations,function(i){var a=new Br(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(function(){n.gs=r})}},{key:"An",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new Br(t,0),r=this.gs.firstAfterOrEqual(n);return le.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,le.resolve()}},{key:"Ts",value:function(e,t){return this.ps(e)}},{key:"ps",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"ys",value:function(e){var t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),Hr=function(){function e(t){Object(h.a)(this,e),this.Es=t,this.docs=new lt(ee.comparator),this.size=0}return Object(f.a)(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Es(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return le.resolve(n?n.document.mutableCopy():gt.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=jn();return t.forEach(function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():gt.newInvalidDocument(e))}),le.resolve(r)}},{key:"getAllFromCollection",value:function(e,t,n){for(var r=jn(),i=new ee(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),u=o.key,s=o.value.document;if(!t.isPrefixOf(u.path))break;u.path.length>t.length+1||ae(re(s),n)<=0||(r=r.insert(s.key,s.mutableCopy()))}return le.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){I()}},{key:"As",value:function(e,t){return le.forEach(this.docs,function(e){return t(e)})}},{key:"newChangeBuffer",value:function(e){return new Gr(this)}},{key:"getSize",value:function(e){return le.resolve(this.size)}}]),e}(),Gr=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(u.a)(this,Object(s.a)(t).call(this))).Yn=e,n}return Object(c.a)(t,e),Object(f.a)(t,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach(function(r,i){i.isValidDocument()?n.push(t.Yn.addEntry(e,i)):t.Yn.removeEntry(r)}),le.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Yn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Yn.getEntries(e,t)}}]),t}(Mr),Kr=function(){function e(t){Object(h.a)(this,e),this.persistence=t,this.Rs=new xn(function(e){return wt(e)},_t),this.lastRemoteSnapshotVersion=Y.min(),this.highestTargetId=0,this.bs=0,this.Ps=new qr,this.targetCount=0,this.vs=Pr.Pn()}return Object(f.a)(e,[{key:"forEachTarget",value:function(e,t){return this.Rs.forEach(function(e,n){return t(n)}),le.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return le.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return le.resolve(this.bs)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.vs.next(),le.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.bs&&(this.bs=t),le.resolve()}},{key:"Dn",value:function(e){this.Rs.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.vs=new Pr(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Dn(t),this.targetCount+=1,le.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Dn(t),le.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,le.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Rs.forEach(function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Rs.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)}),le.waitFor(a).next(function(){return i})}},{key:"getTargetCount",value:function(e){return le.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Rs.get(t)||null;return le.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Ps.us(t,n),le.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Ps.hs(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(function(t){i.push(r.markPotentiallyOrphaned(e,t))}),le.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Ps.ls(t),le.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Ps.ds(t);return le.resolve(n)}},{key:"containsKey",value:function(e,t){return le.resolve(this.Ps.containsKey(t))}}]),e}(),Qr=function(){function e(t,n){var r=this;Object(h.a)(this,e),this.Vs={},this.overlays={},this.Ss=new fe(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=t(this),this.Cs=new Kr(this),this.indexManager=new Ar,this.remoteDocumentCache=new Hr(function(e){return r.referenceDelegate.xs(e)}),this.yt=new Ir(n),this.Ns=new Vr(this.yt)}return Object(f.a)(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Ds=!1,Promise.resolve()}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new zr,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Vs[e.toKey()];return n||(n=new Wr(t,this.referenceDelegate),this.Vs[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Cs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.Ns}},{key:"runTransaction",value:function(e,t,n){var r=this;S("MemoryPersistence","Starting transaction:",e);var i=new Yr(this.Ss.next());return this.referenceDelegate.ks(),n(i).next(function(e){return r.referenceDelegate.Os(i).next(function(){return e})}).toPromise().then(function(e){return i.raiseOnCommittedEvent(),e})}},{key:"Ms",value:function(e,t){return le.or(Object.values(this.Vs).map(function(n){return function(){return n.containsKey(e,t)}}))}},{key:"started",get:function(){return this.Ds}}]),e}(),Yr=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(u.a)(this,Object(s.a)(t).call(this))).currentSequenceNumber=e,n}return Object(c.a)(t,e),t}(ue),$r=function(){function e(t){Object(h.a)(this,e),this.persistence=t,this.Fs=new qr,this.$s=null}return Object(f.a)(e,[{key:"addReference",value:function(e,t,n){return this.Fs.addReference(n,t),this.Ls.delete(n.toString()),le.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Fs.removeReference(n,t),this.Ls.add(n.toString()),le.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Ls.add(t.toString()),le.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Fs.ls(t.targetId).forEach(function(e){return n.Ls.add(e.toString())});var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(function(e){e.forEach(function(e){return n.Ls.add(e.toString())})}).next(function(){return r.removeTargetData(e,t)})}},{key:"ks",value:function(){this.$s=new Set}},{key:"Os",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return le.forEach(this.Ls,function(r){var i=ee.fromPath(r);return t.qs(e,i).next(function(e){e||n.removeEntry(i,Y.min())})}).next(function(){return t.$s=null,n.apply(e)})}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.qs(e,t).next(function(e){e?n.Ls.delete(t.toString()):n.Ls.add(t.toString())})}},{key:"xs",value:function(e){return 0}},{key:"qs",value:function(e,t){var n=this;return le.or([function(){return le.resolve(n.Fs.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ms(e,t)}])}},{key:"Ls",get:function(){if(this.$s)return this.$s;throw I()}}],[{key:"Bs",value:function(t){return new e(t)}}]),e}();var Xr=function(){function e(t,n,r,i){Object(h.a)(this,e),this.targetId=t,this.fromCache=n,this.Si=r,this.Di=i}return Object(f.a)(e,null,[{key:"Ci",value:function(t,n){var r,i=Pn(),a=Pn(),o=g(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),Jr=function(){function e(){Object(h.a)(this,e),this.xi=!1}return Object(f.a)(e,[{key:"initialize",value:function(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.ki(e,t).next(function(a){return a||i.Oi(e,t,r,n)}).next(function(n){return n||i.Mi(e,t)})}},{key:"ki",value:function(e,t){var n=this;if(jt(t))return le.resolve(null);var r=Rt(t);return this.indexManager.getIndexType(e,r).next(function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=Dt(t,null,"F"),r=Rt(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next(function(i){var a=Pn.apply(void 0,Object(l.a)(i));return n.Ni.getDocuments(e,a).next(function(i){return n.indexManager.getMinOffset(e,r).next(function(r){var o=n.Fi(t,i);return n.$i(t,o,a,r.readTime)?n.ki(e,Dt(t,null,"F")):n.Bi(e,o,t,r)})})}))})}},{key:"Oi",value:function(e,t,n,r){var i=this;return jt(t)||r.isEqual(Y.min())?this.Mi(e,t):this.Ni.getDocuments(e,n).next(function(a){var o=i.Fi(t,a);return i.$i(t,o,n,r)?i.Mi(e,t):(x()<=v.a.DEBUG&&S("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Mt(t)),i.Bi(e,o,t,ne(r,-1)))})}},{key:"Fi",value:function(e,t){var n=new dt(Vt(e));return t.forEach(function(t,r){Ft(e,r)&&(n=n.add(r))}),n}},{key:"$i",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Mi",value:function(e,t){return x()<=v.a.DEBUG&&S("QueryEngine","Using full collection scan to execute query:",Mt(t)),this.Ni.getDocumentsMatchingQuery(e,t,ie.min())}},{key:"Bi",value:function(e,t,n,r){return this.Ni.getDocumentsMatchingQuery(e,n,r).next(function(e){return t.forEach(function(t){e=e.insert(t.key,t)}),e})}}]),e}(),Zr=function(){function e(t,n,r,i){Object(h.a)(this,e),this.persistence=t,this.Li=n,this.yt=i,this.qi=new lt(G),this.Ui=new xn(function(e){return wt(e)},_t),this.Ki=new Map,this.Gi=t.getRemoteDocumentCache(),this.Cs=t.getTargetCache(),this.Ns=t.getBundleCache(),this.Qi(r)}return Object(f.a)(e,[{key:"Qi",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ur(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return e.collect(n,t.qi)})}}]),e}();function ei(e,t,n,r){return new Zr(e,t,n,r)}function ti(e,t){return ni.apply(this,arguments)}function ni(){return(ni=Object(o.a)(k().mark(function e(t,n){var r;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=R(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next(function(i){return t=i,r.Qi(n),r.mutationQueue.getAllMutationBatches(e)}).next(function(n){var i,a=[],o=[],u=Pn(),s=g(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,h=g(c.mutations);try{for(h.s();!(l=h.n()).done;){var f=l.value;u=u.add(f.key)}}catch(k){h.e(k)}finally{h.f()}}}catch(k){s.e(k)}finally{s.f()}var d,p=g(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var y,m=g(v.mutations);try{for(m.s();!(y=m.n()).done;){var b=y.value;u=u.add(b.key)}}catch(k){m.e(k)}finally{m.f()}}}catch(k){p.e(k)}finally{p.f()}return r.localDocuments.getDocuments(e,u).next(function(e){return{ji:e,removedBatchIds:a,addedBatchIds:o}})})});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ri(e,t){var n=R(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(e){var r=t.batch.keys(),i=n.Gi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=le.resolve();return a.forEach(function(e){o=o.next(function(){return r.getEntry(t,e)}).next(function(t){var a=n.docVersions.get(e);N(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),o.next(function(){return e.mutationQueue.removeMutationBatch(t,i)})}(n,e,t,i).next(function(){return i.apply(e)}).next(function(){return n.mutationQueue.performConsistencyCheck(e)}).next(function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)}).next(function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=Pn(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))}).next(function(){return n.localDocuments.getDocuments(e,r)})})}function ii(e){var t=R(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",function(e){return t.Cs.getLastRemoteSnapshotVersion(e)})}function ai(e,t){var n=R(e),r=t.snapshotVersion,i=n.qi;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(e){var a=n.Gi.newChangeBuffer({trackRemovals:!0});i=n.qi;var o=[];t.targetChanges.forEach(function(a,u){var s=i.get(u);if(s){o.push(n.Cs.removeMatchingKeys(e,a.removedDocuments,u).next(function(){return n.Cs.addMatchingKeys(e,a.addedDocuments,u)}));var c=s.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?c=c.withResumeToken(we.EMPTY_BYTE_STRING,Y.min()).withLastLimboFreeSnapshotVersion(Y.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.Cs.updateTargetData(e,c))}});var u=jn(),s=Pn();if(t.documentUpdates.forEach(function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),o.push(oi(e,a,t.documentUpdates).next(function(e){u=e.Wi,s=e.zi})),!r.isEqual(Y.min())){var c=n.Cs.getLastRemoteSnapshotVersion(e).next(function(t){return n.Cs.setTargetsMetadata(e,e.currentSequenceNumber,r)});o.push(c)}return le.waitFor(o).next(function(){return a.apply(e)}).next(function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)}).next(function(){return u})}).then(function(e){return n.qi=i,e})}function oi(e,t,n){var r=Pn(),i=Pn();return n.forEach(function(e){return r=r.add(e)}),t.getEntries(e,r).next(function(e){var r=jn();return n.forEach(function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(Y.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):S("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)}),{Wi:r,zi:i}})}function ui(e,t){var n=R(e);return n.persistence.runTransaction("Get next mutation batch","readonly",function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)})}function si(e,t){var n=R(e);return n.persistence.runTransaction("Allocate target","readwrite",function(e){var r;return n.Cs.getTargetData(e,t).next(function(i){return i?(r=i,le.resolve(r)):n.Cs.allocateTargetId(e).next(function(i){return r=new Cr(t,i,0,e.currentSequenceNumber),n.Cs.addTargetData(e,r).next(function(){return r})})})}).then(function(e){var r=n.qi.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.qi=n.qi.insert(e.targetId,e),n.Ui.set(t,e.targetId)),e})}function ci(e,t,n){return li.apply(this,arguments)}function li(){return(li=Object(o.a)(k().mark(function e(t,n,r){var i,a,o;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=R(t),a=i.qi.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,function(e){return i.persistence.referenceDelegate.removeTarget(e,a)});case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),he(e.t1)){e.next=12;break}throw e.t1;case 12:S("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.qi=i.qi.remove(n),i.Ui.delete(a.target);case 14:case"end":return e.stop()}},e,null,[[1,8]])}))).apply(this,arguments)}function hi(e,t,n){var r=R(e),i=Y.min(),a=Pn();return r.persistence.runTransaction("Execute query","readonly",function(e){return function(e,t,n){var r=R(e),i=r.Ui.get(n);return void 0!==i?le.resolve(r.qi.get(i)):r.Cs.getTargetData(t,n)}(r,e,Rt(t)).next(function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(e,t.targetId).next(function(e){a=e})}).next(function(){return r.Li.getDocumentsMatchingQuery(e,t,n?i:Y.min(),n?a:Pn())}).next(function(e){return fi(r,Ut(t),e),{documents:e,Hi:a}})})}function fi(e,t,n){var r=e.Ki.get(t)||Y.min();n.forEach(function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.Ki.set(t,r)}var di=function(){function e(){Object(h.a)(this,e),this.activeTargetIds=Fn()}return Object(f.a)(e,[{key:"er",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"nr",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"tr",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),pi=function(){function e(){Object(h.a)(this,e),this.Lr=new di,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return Object(f.a)(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Lr.er(e),this.qr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.qr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Lr.nr(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Lr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.qr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Lr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Lr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Lr=new di,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),vi=function(){function e(){Object(h.a)(this,e)}return Object(f.a)(e,[{key:"Ur",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),yi=function(){function e(){var t=this;Object(h.a)(this,e),this.Kr=function(){return t.Gr()},this.Qr=function(){return t.jr()},this.Wr=[],this.zr()}return Object(f.a)(e,[{key:"Ur",value:function(e){this.Wr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}},{key:"zr",value:function(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}},{key:"Gr",value:function(){S("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=g(this.Wr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"jr",value:function(){S("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=g(this.Wr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"C",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),mi={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},gi=function(){function e(t){Object(h.a)(this,e),this.Hr=t.Hr,this.Jr=t.Jr}return Object(f.a)(e,[{key:"Yr",value:function(e){this.Xr=e}},{key:"Zr",value:function(e){this.eo=e}},{key:"onMessage",value:function(e){this.no=e}},{key:"close",value:function(){this.Jr()}},{key:"send",value:function(e){this.Hr(e)}},{key:"so",value:function(){this.Xr()}},{key:"io",value:function(e){this.eo(e)}},{key:"ro",value:function(e){this.no(e)}}]),e}(),bi=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(u.a)(this,Object(s.a)(t).call(this,e))).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n.useFetchStreams=e.useFetchStreams,n}return Object(c.a)(t,e),Object(f.a)(t,[{key:"fo",value:function(e,t,n,r){return new Promise(function(i,a){var o=new m.g;o.setWithCredentials(!0),o.listenOnce(m.c.COMPLETE,function(){try{switch(o.getLastErrorCode()){case m.a.NO_ERROR:var t=o.getResponseJson();S("Connection","XHR received:",JSON.stringify(t)),i(t);break;case m.a.TIMEOUT:S("Connection",'RPC "'+e+'" timed out'),a(new D(A.DEADLINE_EXCEEDED,"Request time out"));break;case m.a.HTTP_ERROR:var n=o.getStatus();if(S("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson();Array.isArray(r)&&(r=r[0]);var u=null==r?void 0:r.error;if(u&&u.status&&u.message){var s=function(e){var t=u.status.toLowerCase().replace(/_/g,"-");return Object.values(A).indexOf(t)>=0?t:A.UNKNOWN}();a(new D(s,u.message))}else a(new D(A.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new D(A.UNAVAILABLE,"Connection failed."));break;default:I()}}finally{S("Connection",'RPC "'+e+'" completed.')}});var u=JSON.stringify(r);o.send(t,"POST",u,n,15)})}},{key:"wo",value:function(e,t,n){var r=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Object(m.h)(),a=Object(m.i)(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new m.d({})),this.lo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;var u=r.join("");S("Connection","Creating WebChannel: "+u,o);var s=i.createWebChannel(u,o),c=!1,l=!1,h=new gi({Hr:function(e){l?S("Connection","Not sending because WebChannel is closed:",e):(c||(S("Connection","Opening WebChannel transport."),s.open(),c=!0),S("Connection","WebChannel sending:",e),s.send(e))},Jr:function(){return s.close()}}),f=function(e,t,n){e.listen(t,function(e){try{n(e)}catch(e){setTimeout(function(){throw e},0)}})};return f(s,m.f.EventType.OPEN,function(){l||S("Connection","WebChannel transport opened.")}),f(s,m.f.EventType.CLOSE,function(){l||(l=!0,S("Connection","WebChannel transport closed"),h.io())}),f(s,m.f.EventType.ERROR,function(e){l||(l=!0,T("Connection","WebChannel transport errored:",e),h.io(new D(A.UNAVAILABLE,"The operation could not be completed")))}),f(s,m.f.EventType.MESSAGE,function(e){var t;if(!l){var n=e.data[0];N(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){S("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=gn[a];if(void 0!==t)return En(t)}(),u=i.message;void 0===o&&(o=A.INTERNAL,u="Unknown error status: "+a+" with message "+i.message),l=!0,h.io(new D(o,u)),s.close()}else S("Connection","WebChannel received:",n),h.ro(n)}}),f(a,m.b.STAT_EVENT,function(e){e.stat===m.e.PROXY?S("Connection","Detected buffering proxy"):e.stat===m.e.NOPROXY&&S("Connection","Detected no buffering proxy")}),setTimeout(function(){h.so()},0),h}}]),t}(function(){function e(t){Object(h.a)(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.oo=n+"://"+t.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return Object(f.a)(e,[{key:"ao",value:function(e,t,n,r,i){var a=this.ho(e,t);S("RestConnection","Sending: ",a,n);var o={};return this.lo(o,r,i),this.fo(e,a,o,n).then(function(e){return S("RestConnection","Received: ",e),e},function(t){throw T("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t})}},{key:"_o",value:function(e,t,n,r,i,a){return this.ao(e,t,n,r,i)}},{key:"lo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+O,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(function(t,n){return e[n]=t}),n&&n.headers.forEach(function(t,n){return e[n]=t})}},{key:"ho",value:function(e,t){var n=mi[e];return"".concat(this.oo,"/v1/").concat(t,":").concat(n)}},{key:"co",get:function(){return!1}}]),e}());function ki(){return"undefined"!=typeof document?document:null}function wi(e){return new Xn(e,!0)}var _i=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;Object(h.a)(this,e),this.Hs=t,this.timerId=n,this.mo=r,this.yo=i,this.po=a,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}return Object(f.a)(e,[{key:"reset",value:function(){this.Io=0}},{key:"Ao",value:function(){this.Io=this.po}},{key:"Ro",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,n-r);i>0&&S("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Io," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,function(){return t.Eo=Date.now(),e()}),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}},{key:"Po",value:function(){null!==this.To&&(this.To.skipDelay(),this.To=null)}},{key:"cancel",value:function(){null!==this.To&&(this.To.cancel(),this.To=null)}},{key:"bo",value:function(){return(Math.random()-.5)*this.Io}}]),e}(),Oi=function(){function e(t,n,r,i,a,o,u,s){Object(h.a)(this,e),this.Hs=t,this.vo=r,this.Vo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new _i(t,n)}return Object(f.a)(e,[{key:"No",value:function(){return 1===this.state||5===this.state||this.ko()}},{key:"ko",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Oo()}},{key:"stop",value:function(){var e=Object(o.a)(k().mark(function e(){return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.No(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"Mo",value:function(){this.state=0,this.xo.reset()}},{key:"Fo",value:function(){var e=this;this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,function(){return e.$o()}))}},{key:"Bo",value:function(e){this.Lo(),this.stream.send(e)}},{key:"$o",value:function(){var e=Object(o.a)(k().mark(function e(){return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.ko()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"Lo",value:function(){this.Do&&(this.Do.cancel(),this.Do=null)}},{key:"qo",value:function(){this.Co&&(this.Co.cancel(),this.Co=null)}},{key:"close",value:function(){var e=Object(o.a)(k().mark(function e(t,n){return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.Lo(),this.qo(),this.xo.cancel(),this.So++,4!==t?this.xo.reset():n&&n.code===A.RESOURCE_EXHAUSTED?(j(n.toString()),j("Using maximum backoff delay to prevent overloading the backend."),this.xo.Ao()):n&&n.code===A.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Uo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Zr(n);case 9:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"Uo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Ko(this.So),n=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(function(t){var r=Object(a.a)(t,2),i=r[0],o=r[1];e.So===n&&e.Go(i,o)},function(n){t(function(){var t=new D(A.UNKNOWN,"Fetching auth token failed: "+n.message);return e.Qo(t)})})}},{key:"Go",value:function(e,t){var n=this,r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(function(){r(function(){return n.state=2,n.Co=n.Hs.enqueueAfterDelay(n.Vo,1e4,function(){return n.ko()&&(n.state=3),Promise.resolve()}),n.listener.Yr()})}),this.stream.Zr(function(e){r(function(){return n.Qo(e)})}),this.stream.onMessage(function(e){r(function(){return n.onMessage(e)})})}},{key:"Oo",value:function(){var e=this;this.state=5,this.xo.Ro(Object(o.a)(k().mark(function t(){return k().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}},t)})))}},{key:"Qo",value:function(e){return S("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Ko",value:function(e){var t=this;return function(n){t.Hs.enqueueAndForget(function(){return t.So===e?n():(S("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}}}]),e}(),Ei=function(e){function t(e,n,r,i,a,o){var c;return Object(h.a)(this,t),(c=Object(u.a)(this,Object(s.a)(t).call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o))).yt=a,c}return Object(c.a)(t,e),Object(f.a)(t,[{key:"jo",value:function(e,t){return this.connection.wo("Listen",e,t)}},{key:"onMessage",value:function(e){this.xo.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:I()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.wt?(N(void 0===t||"string"==typeof t),we.fromBase64String(t||"")):(N(void 0===t||t instanceof Uint8Array),we.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?A.UNKNOWN:En(e.code);return new D(t,e.message||"")}(o);n=new Bn(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=ar(e,s.document.name),l=tr(s.document.updateTime),h=s.document.createTime?tr(s.document.createTime):Y.min(),f=new yt({mapValue:{fields:s.document.fields}}),d=gt.newFoundDocument(c,l,h,f),p=s.targetIds||[],v=s.removedTargetIds||[];n=new zn(p,v,d.key,d)}else if("documentDelete"in t){t.documentDelete;var y=t.documentDelete;y.document;var m=ar(e,y.document),g=y.readTime?tr(y.readTime):Y.min(),b=gt.newNoDocument(m,g),k=y.removedTargetIds||[];n=new zn([],k,b.key,b)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var _=ar(e,w.document),O=w.removedTargetIds||[];n=new zn([],O,_,null)}else{if(!("filter"in t))return I();t.filter;var E=t.filter;E.targetId;var x=E.count||0,S=new _n(x),j=E.targetId;n=new qn(j,S)}return n}(this.yt,e),n=function(e){if(!("targetChange"in e))return Y.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Y.min():t.readTime?tr(t.readTime):Y.min()}(e);return this.listener.Wo(t,n)}},{key:"zo",value:function(e){var t={};t.database=sr(this.yt),t.addTarget=function(e,t){var n,r=t.target;return(n=Ot(r)?{documents:dr(e,r)}:{query:pr(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=Zn(e,t.resumeToken):t.snapshotVersion.compareTo(Y.min())>0&&(n.readTime=Jn(e,t.snapshotVersion.toTimestamp())),n}(this.yt,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return I()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.yt,e);n&&(t.labels=n),this.Bo(t)}},{key:"Ho",value:function(e){var t={};t.database=sr(this.yt),t.removeTarget=e,this.Bo(t)}}]),t}(Oi),xi=function(e){function t(e,n,r,i,a,o){var c;return Object(h.a)(this,t),(c=Object(u.a)(this,Object(s.a)(t).call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o))).yt=a,c.Jo=!1,c}return Object(c.a)(t,e),Object(f.a)(t,[{key:"start",value:function(){this.Jo=!1,this.lastStreamToken=void 0,Object(i.a)(Object(s.a)(t.prototype),"start",this).call(this)}},{key:"Uo",value:function(){this.Jo&&this.Xo([])}},{key:"jo",value:function(e,t){return this.connection.wo("Write",e,t)}},{key:"onMessage",value:function(e){if(N(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();var t=function(e,t){return e&&e.length>0?(N(void 0!==t),e.map(function(e){return function(e,t){var n=e.updateTime?tr(e.updateTime):tr(t);return n.isEqual(Y.min())&&(n=tr(t)),new rn(n,e.transformResults||[])}(e,t)})):[]}(e.writeResults,e.commitTime),n=tr(e.commitTime);return this.listener.Zo(n,t)}return N(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}},{key:"eu",value:function(){var e={};e.database=sr(this.yt),this.Bo(e)}},{key:"Xo",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map(function(e){return fr(t.yt,e)})};this.Bo(n)}},{key:"Yo",get:function(){return this.Jo}}]),t}(Oi),Si=function(e){function t(e,n,r,i){var a;return Object(h.a)(this,t),(a=Object(u.a)(this,Object(s.a)(t).call(this))).authCredentials=e,a.appCheckCredentials=n,a.connection=r,a.yt=i,a.nu=!1,a}return Object(c.a)(t,e),Object(f.a)(t,[{key:"su",value:function(){if(this.nu)throw new D(A.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"ao",value:function(e,t,n){var r=this;return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(function(i){var o=Object(a.a)(i,2),u=o[0],s=o[1];return r.connection.ao(e,t,n,u,s)}).catch(function(e){throw"FirebaseError"===e.name?(e.code===A.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new D(A.UNKNOWN,e.toString())})}},{key:"_o",value:function(e,t,n,r){var i=this;return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(function(o){var u=Object(a.a)(o,2),s=u[0],c=u[1];return i.connection._o(e,t,n,s,c,r)}).catch(function(e){throw"FirebaseError"===e.name?(e.code===A.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new D(A.UNKNOWN,e.toString())})}},{key:"terminate",value:function(){this.nu=!0}}]),t}(function(){return function e(){Object(h.a)(this,e)}}());var ji=function(){function e(t,n){Object(h.a)(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}return Object(f.a)(e,[{key:"uu",value:function(){var e=this;0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return e.ru=null,e.au("Backend didn't respond within 10 seconds."),e.cu("Offline"),Promise.resolve()}))}},{key:"hu",value:function(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.cu("Offline")))}},{key:"set",value:function(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}},{key:"cu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"au",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.ou?(j(t),this.ou=!1):S("OnlineStateTracker",t)}},{key:"lu",value:function(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}]),e}(),Ti=function e(t,n,r,i,a){var u=this;Object(h.a)(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=a,this.mu.Ur(function(e){r.enqueueAndForget(Object(o.a)(k().mark(function e(){return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=Ui(u),!e.t0){e.next=5;break}return S("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=Object(o.a)(k().mark(function e(t){var n;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(n=R(t))._u.add(4),e.next=4,Ni(n);case 4:return n.gu.set("Unknown"),n._u.delete(4),e.next=8,Ci(n);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()(u);case 5:case"end":return e.stop()}},e)})))}),this.gu=new ji(r,i)};function Ci(e){return Ii.apply(this,arguments)}function Ii(){return(Ii=Object(o.a)(k().mark(function e(t){var n,r,i;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ui(t)){e.next=18;break}n=g(t.wu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}},e,null,[[2,12,15,18]])}))).apply(this,arguments)}function Ni(e){return Ri.apply(this,arguments)}function Ri(){return(Ri=Object(o.a)(k().mark(function e(t){var n,r,i;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=g(t.wu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}},e,null,[[1,11,14,17]])}))).apply(this,arguments)}function Ai(e,t){var n=R(e);n.du.has(t.targetId)||(n.du.set(t.targetId,t),Fi(n)?Mi(n):pa(n).ko()&&Li(n,t))}function Di(e,t){var n=R(e),r=pa(n);n.du.delete(t),r.ko()&&Pi(n,t),0===n.du.size&&(r.ko()?r.Fo():Ui(n)&&n.gu.set("Unknown"))}function Li(e,t){e.yu.Ot(t.targetId),pa(e).zo(t)}function Pi(e,t){e.yu.Ot(t),pa(e).Ho(t)}function Mi(e){e.yu=new Hn({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},ne:function(t){return e.du.get(t)||null}}),pa(e).start(),e.gu.uu()}function Fi(e){return Ui(e)&&!pa(e).No()&&e.du.size>0}function Ui(e){return 0===R(e)._u.size}function Vi(e){e.yu=void 0}function zi(e){return qi.apply(this,arguments)}function qi(){return(qi=Object(o.a)(k().mark(function e(t){return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.du.forEach(function(e,n){Li(t,e)});case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Bi(e,t){return Wi.apply(this,arguments)}function Wi(){return(Wi=Object(o.a)(k().mark(function e(t,n){return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Vi(t),Fi(t)?(t.gu.hu(n),Mi(t)):t.gu.set("Unknown");case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Hi(e,t,n){return Gi.apply(this,arguments)}function Gi(){return(Gi=Object(o.a)(k().mark(function e(t,n,r){var i;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.gu.set("Online"),!(n instanceof Bn&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=Object(o.a)(k().mark(function e(t,n){var r,i,a,o;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=g(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.du.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.du.delete(o),t.yu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}},e,null,[[2,16,19,22]])}));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),S("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,Ki(t,e.t0);case 11:e.next=29;break;case 13:if(n instanceof zn?t.yu.Kt(n):n instanceof qn?t.yu.Jt(n):t.yu.jt(n),r.isEqual(Y.min())){e.next=29;break}return e.prev=14,e.next=17,ii(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.yu.Zt(t);return n.targetChanges.forEach(function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.du.get(r);i&&e.du.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach(function(t){var n=e.du.get(t);if(n){e.du.set(t,n.withResumeToken(we.EMPTY_BYTE_STRING,n.snapshotVersion)),Pi(e,t);var r=new Cr(n.target,t,1,n.sequenceNumber);Li(e,r)}}),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 22:e.next=29;break;case 24:return e.prev=24,e.t2=e.catch(14),S("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,Ki(t,e.t2);case 29:case"end":return e.stop()}},e,null,[[1,6],[14,24]])}))).apply(this,arguments)}function Ki(e,t,n){return Qi.apply(this,arguments)}function Qi(){return(Qi=Object(o.a)(k().mark(function e(t,n,r){return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(he(n)){e.next=2;break}throw n;case 2:return t._u.add(1),e.next=5,Ni(t);case 5:t.gu.set("Offline"),r||(r=function(){return ii(t.localStore)}),t.asyncQueue.enqueueRetryable(Object(o.a)(k().mark(function e(){return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return S("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t._u.delete(1),e.next=6,Ci(t);case 6:case"end":return e.stop()}},e)})));case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Yi(e,t){return t().catch(function(n){return Ki(e,n,t)})}function $i(e){return Xi.apply(this,arguments)}function Xi(){return(Xi=Object(o.a)(k().mark(function e(t){var n,r,i,a;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=R(t),r=va(n),i=n.fu.length>0?n.fu[n.fu.length-1].batchId:-1;case 2:if(!Ji(n)){e.next=19;break}return e.prev=3,e.next=6,ui(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.fu.length&&r.Fo(),e.abrupt("break",19);case 10:i=a.batchId,Zi(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,Ki(n,e.t0);case 17:e.next=2;break;case 19:ea(n)&&ta(n);case 20:case"end":return e.stop()}},e,null,[[3,13]])}))).apply(this,arguments)}function Ji(e){return Ui(e)&&e.fu.length<10}function Zi(e,t){e.fu.push(t);var n=va(e);n.ko()&&n.Yo&&n.Xo(t.mutations)}function ea(e){return Ui(e)&&!va(e).No()&&e.fu.length>0}function ta(e){va(e).start()}function na(e){return ra.apply(this,arguments)}function ra(){return(ra=Object(o.a)(k().mark(function e(t){return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:va(t).eu();case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ia(e){return aa.apply(this,arguments)}function aa(){return(aa=Object(o.a)(k().mark(function e(t){var n,r,i,a;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=va(t),r=g(t.fu);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Xo(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function oa(e,t,n){return ua.apply(this,arguments)}function ua(){return(ua=Object(o.a)(k().mark(function e(t,n,r){var i,a;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.fu.shift(),a=jr.from(i,n,r),e.next=3,Yi(t,function(){return t.remoteSyncer.applySuccessfulWrite(a)});case 3:return e.next=5,$i(t);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function sa(e,t){return ca.apply(this,arguments)}function ca(){return(ca=Object(o.a)(k().mark(function e(t,n){return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&va(t).Yo,!e.t0){e.next=4;break}return e.next=4,function(){var e=Object(o.a)(k().mark(function e(t,n){var r,i;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!On(i=n.code)||i===A.ABORTED){e.next=7;break}return r=t.fu.shift(),va(t).Mo(),e.next=5,Yi(t,function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)});case 5:return e.next=7,$i(t);case 7:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:ea(t)&&ta(t);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function la(e,t){return ha.apply(this,arguments)}function ha(){return(ha=Object(o.a)(k().mark(function e(t,n){var r,i;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(r=R(t)).asyncQueue.verifyOperationInProgress(),S("RemoteStore","RemoteStore received new credentials"),i=Ui(r),r._u.add(3),e.next=6,Ni(r);case 6:return i&&r.gu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r._u.delete(3),e.next=12,Ci(r);case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}function fa(e,t){return da.apply(this,arguments)}function da(){return(da=Object(o.a)(k().mark(function e(t,n){var r;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=R(t),!n){e.next=7;break}return r._u.delete(2),e.next=5,Ci(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r._u.add(2),e.next=12,Ni(r);case 12:r.gu.set("Unknown");case 13:case"end":return e.stop()}},e)}))).apply(this,arguments)}function pa(e){return e.pu||(e.pu=function(e,t,n){var r=R(e);return r.su(),new Ei(t,r.connection,r.authCredentials,r.appCheckCredentials,r.yt,n)}(e.datastore,e.asyncQueue,{Yr:zi.bind(null,e),Zr:Bi.bind(null,e),Wo:Hi.bind(null,e)}),e.wu.push(function(){var t=Object(o.a)(k().mark(function t(n){return k().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.pu.Mo(),Fi(e)?Mi(e):e.gu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.pu.stop();case 6:Vi(e);case 7:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())),e.pu}function va(e){return e.Iu||(e.Iu=function(e,t,n){var r=R(e);return r.su(),new xi(t,r.connection,r.authCredentials,r.appCheckCredentials,r.yt,n)}(e.datastore,e.asyncQueue,{Yr:na.bind(null,e),Zr:sa.bind(null,e),tu:ia.bind(null,e),Zo:oa.bind(null,e)}),e.wu.push(function(){var t=Object(o.a)(k().mark(function t(n){return k().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Iu.Mo(),t.next=4,$i(e);case 4:t.next=9;break;case 6:return t.next=8,e.Iu.stop();case 8:e.fu.length>0&&(S("RemoteStore","Stopping write stream with ".concat(e.fu.length," pending writes")),e.fu=[]);case 9:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())),e.Iu}var ya=function(){function e(t,n,r,i,a){Object(h.a)(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new L,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(e){})}return Object(f.a)(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout(function(){return t.handleDelayElapsed()},e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new D(A.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget(function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then(function(t){return e.deferred.resolve(t)})):Promise.resolve()})}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)})}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function ma(e,t){if(j("AsyncQueue","".concat(t,": ").concat(e)),he(e))return new D(A.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var ga=function(){function e(t){Object(h.a)(this,e),this.comparator=t?function(e,n){return t(e,n)||ee.comparator(e.key,n.key)}:function(e,t){return ee.comparator(e.key,t.key)},this.keyedMap=Cn(),this.sortedSet=new lt(this.comparator)}return Object(f.a)(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal(function(t,n){return e(t),!1})}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach(function(t){e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}},{key:"size",get:function(){return this.sortedSet.size}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),ba=function(){function e(){Object(h.a)(this,e),this.Tu=new lt(ee.comparator)}return Object(f.a)(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Tu.get(t);n?0!==e.type&&3===n.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==n.type?this.Tu=this.Tu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Tu=this.Tu.remove(t):1===e.type&&2===n.type?this.Tu=this.Tu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):I():this.Tu=this.Tu.insert(t,e)}},{key:"Eu",value:function(){var e=[];return this.Tu.inorderTraversal(function(t,n){e.push(n)}),e}}]),e}(),ka=function(){function e(t,n,r,i,a,o,u,s,c){Object(h.a)(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s,this.hasCachedResults=c}return Object(f.a)(e,[{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Lt(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}},{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach(function(e){o.push({type:0,doc:e})}),new e(t,n,ga.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),wa=function e(){Object(h.a)(this,e),this.Au=void 0,this.listeners=[]},_a=function e(){Object(h.a)(this,e),this.queries=new xn(function(e){return Pt(e)},Lt),this.onlineState="Unknown",this.Ru=new Set};function Oa(e,t){return Ea.apply(this,arguments)}function Ea(){return(Ea=Object(o.a)(k().mark(function e(t,n){var r,i,a,o,u;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=R(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new wa),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Au=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=ma(e.t0,"Initialization of query '".concat(Mt(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.bu(r.onlineState),o.Au&&n.Pu(o.Au)&&ja(r);case 14:case"end":return e.stop()}},e,null,[[3,9]])}))).apply(this,arguments)}function xa(e,t){return Sa.apply(this,arguments)}function Sa(){return(Sa=Object(o.a)(k().mark(function e(t,n){var r,i,a,o,u;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=R(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ja(e){e.Ru.forEach(function(e){e.next()})}var Ta=function(){function e(t,n,r){Object(h.a)(this,e),this.query=t,this.vu=n,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}return Object(f.a)(e,[{key:"Pu",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=g(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new ka(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),a=!0):this.Cu(e,this.onlineState)&&(this.xu(e),a=!0),this.Su=e,a}},{key:"onError",value:function(e){this.vu.error(e)}},{key:"bu",value:function(e){this.onlineState=e;var t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}},{key:"Cu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Nu||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"Du",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"xu",value:function(e){e=ka.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}]),e}();var Ca=function e(t){Object(h.a)(this,e),this.key=t},Ia=function e(t){Object(h.a)(this,e),this.key=t},Na=function(){function e(t,n){Object(h.a)(this,e),this.query=t,this.qu=n,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Pn(),this.mutatedKeys=Pn(),this.Gu=Vt(t),this.Qu=new ga(this.Gu)}return Object(f.a)(e,[{key:"Wu",value:function(e,t){var n=this,r=t?t.zu:new ba,i=t?t.Qu:this.Qu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(function(e,t){var l=i.get(e),h=Ft(n.query,t)?t:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.Hu(l,h)||(r.track({type:2,doc:h}),p=!0,(s&&n.Gu(h,s)>0||c&&n.Gu(h,c)<0)&&(u=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(h?(o=o.add(h),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))}),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Qu:o,zu:r,$i:u,mutatedKeys:a}}},{key:"Hu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;var a=e.zu.Eu();a.sort(function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return I()}};return n(e)-n(t)}(e.type,t.type)||r.Gu(e.doc,t.doc)}),this.Ju(n);var o=t?this.Yu():[],u=0===this.Ku.size&&this.current?1:0,s=u!==this.Uu;return this.Uu=u,0!==a.length||s?{snapshot:new ka(this.query,e.Qu,i,a,e.mutatedKeys,0===u,s,!1,!!n&&n.resumeToken.approximateByteSize()>0),Xu:o}:{Xu:o}}},{key:"bu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new ba,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}},{key:"Zu",value:function(e){return!this.qu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}},{key:"Ju",value:function(e){var t=this;e&&(e.addedDocuments.forEach(function(e){return t.qu=t.qu.add(e)}),e.modifiedDocuments.forEach(function(e){}),e.removedDocuments.forEach(function(e){return t.qu=t.qu.delete(e)}),this.current=e.current)}},{key:"Yu",value:function(){var e=this;if(!this.current)return[];var t=this.Ku;this.Ku=Pn(),this.Qu.forEach(function(t){e.Zu(t.key)&&(e.Ku=e.Ku.add(t.key))});var n=[];return t.forEach(function(t){e.Ku.has(t)||n.push(new Ia(t))}),this.Ku.forEach(function(e){t.has(e)||n.push(new Ca(e))}),n}},{key:"tc",value:function(e){this.qu=e.Hi,this.Ku=Pn();var t=this.Wu(e.documents);return this.applyChanges(t,!0)}},{key:"ec",value:function(){return ka.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.Uu,this.hasCachedResults)}},{key:"ju",get:function(){return this.qu}}]),e}(),Ra=function e(t,n,r){Object(h.a)(this,e),this.query=t,this.targetId=n,this.view=r},Aa=function e(t){Object(h.a)(this,e),this.key=t,this.nc=!1},Da=function(){function e(t,n,r,i,a,o){Object(h.a)(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.sc={},this.ic=new xn(function(e){return Pt(e)},Lt),this.rc=new Map,this.oc=new Set,this.uc=new lt(ee.comparator),this.cc=new Map,this.ac=new qr,this.hc={},this.lc=new Map,this.fc=Pr.vn(),this.onlineState="Unknown",this.dc=void 0}return Object(f.a)(e,[{key:"isPrimaryClient",get:function(){return!0===this.dc}}]),e}();function La(e,t){return Pa.apply(this,arguments)}function Pa(){return(Pa=Object(o.a)(k().mark(function e(t,n){var r,i,a,o,u,s;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=oo(t),!(o=r.ic.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.ec(),e.next=15;break;case 6:return e.next=8,si(r.localStore,Rt(n));case 8:return u=e.sent,r.isPrimaryClient&&Ai(r.remoteStore,u),s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=14,Ma(r,n,i,"current"===s,u.resumeToken);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ma(e,t,n,r,i){return Fa.apply(this,arguments)}function Fa(){return(Fa=Object(o.a)(k().mark(function e(t,n,r,i,a){var u,s,c,l,h,f;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t._c=function(e,n,r){return function(){var e=Object(o.a)(k().mark(function e(t,n,r,i){var a,o,u;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Wu(r),e.t0=a.$i,!e.t0){e.next=6;break}return e.next=5,hi(t.localStore,n.query,!1).then(function(e){var t=e.documents;return n.view.Wu(t,a)});case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(Za(t,n.targetId,u.Xu),u.snapshot));case 8:case"end":return e.stop()}},e)}));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,hi(t.localStore,n,!0);case 3:return u=e.sent,s=new Na(n,u.Hi),c=s.Wu(u.documents),l=Vn.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,a),h=s.applyChanges(c,t.isPrimaryClient,l),Za(t,r,h.Xu),f=new Ra(n,r,s),e.abrupt("return",(t.ic.set(n,f),t.rc.has(r)?t.rc.get(r).push(n):t.rc.set(r,[n]),h.snapshot));case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ua(e,t){return Va.apply(this,arguments)}function Va(){return(Va=Object(o.a)(k().mark(function e(t,n){var r,i,a;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=R(t),i=r.ic.get(n),!((a=r.rc.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.rc.set(i.targetId,a.filter(function(e){return!Lt(e,n)})),void r.ic.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,ci(r.localStore,i.targetId,!1).then(function(){r.sharedClientState.clearQueryState(i.targetId),Di(r.remoteStore,i.targetId),Xa(r,i.targetId)}).catch(se);case 9:e.next=14;break;case 11:return Xa(r,i.targetId),e.next=14,ci(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}},e)}))).apply(this,arguments)}function za(e,t,n){return qa.apply(this,arguments)}function qa(){return(qa=Object(o.a)(k().mark(function e(t,n,r){var i,a,o;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=uo(t),e.prev=1,e.next=4,function(e,t){var n,r,i=R(e),a=Q.now(),o=t.reduce(function(e,t){return e.add(t.key)},Pn());return i.persistence.runTransaction("Locally write mutations","readwrite",function(e){var u=jn(),s=Pn();return i.Gi.getEntries(e,o).next(function(e){(u=e).forEach(function(e,t){t.isValidDocument()||(s=s.add(e))})}).next(function(){return i.localDocuments.getOverlayedDocuments(e,u)}).next(function(r){n=r;var o,u=[],s=g(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=hn(c,n.get(c.key).overlayedDocument);null!=l&&u.push(new pn(c.key,l,mt(l.value.mapValue),an.exists(!0)))}}catch(h){s.e(h)}finally{s.f()}return i.mutationQueue.addMutationBatch(e,a,u,t)}).next(function(t){r=t;var a=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)})}).then(function(){return{batchId:r.batchId,changes:In(n)}})}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.hc[e.currentUser.toKey()];r||(r=new lt(G)),r=r.insert(t,n),e.hc[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,no(i,a.changes);case 9:return e.next=11,$i(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=ma(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}},e,null,[[1,13]])}))).apply(this,arguments)}function Ba(e,t){return Wa.apply(this,arguments)}function Wa(){return(Wa=Object(o.a)(k().mark(function e(t,n){var r,i;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=R(t),e.prev=1,e.next=4,ai(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach(function(e,t){var n=r.cc.get(t);n&&(N(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.nc=!0:e.modifiedDocuments.size>0?N(n.nc):e.removedDocuments.size>0&&(N(n.nc),n.nc=!1))}),e.next=8,no(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,se(e.t0);case 14:case"end":return e.stop()}},e,null,[[1,10]])}))).apply(this,arguments)}function Ha(e,t,n){var r=R(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.ic.forEach(function(e,n){var r=n.view.bu(t);r.snapshot&&i.push(r.snapshot)}),function(e,t){var n=R(e);n.onlineState=t;var r=!1;n.queries.forEach(function(e,n){var i,a=g(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.bu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}}),r&&ja(n)}(r.eventManager,t),i.length&&r.sc.Wo(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function Ga(){return(Ga=Object(o.a)(k().mark(function e(t,n,r){var i,a,o,u,s,c;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((i=R(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.cc.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new lt(ee.comparator)).insert(o,gt.newNoDocument(o,Y.min())),s=Pn().add(o),c=new Un(Y.min(),new Map,new dt(G),u,s),e.next=9,Ba(i,c);case 9:i.uc=i.uc.remove(o),i.cc.delete(n),to(i),e.next=16;break;case 14:return e.next=16,ci(i.localStore,n,!1).then(function(){return Xa(i,n,r)}).catch(se);case 16:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ka(){return(Ka=Object(o.a)(k().mark(function e(t,n){var r,i,a;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=R(t),i=n.batch.batchId,e.prev=1,e.next=4,ri(r.localStore,n);case 4:return a=e.sent,$a(r,i,null),Ya(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,no(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,se(e.t0);case 16:case"end":return e.stop()}},e,null,[[1,12]])}))).apply(this,arguments)}function Qa(){return(Qa=Object(o.a)(k().mark(function e(t,n,r){var i,a;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=R(t),e.prev=1,e.next=4,function(e,t){var n=R(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next(function(t){return N(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)}).next(function(){return n.mutationQueue.performConsistencyCheck(e)}).next(function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)}).next(function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)}).next(function(){return n.localDocuments.getDocuments(e,r)})})}(i.localStore,n);case 4:return a=e.sent,$a(i,n,r),Ya(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,no(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,se(e.t0);case 16:case"end":return e.stop()}},e,null,[[1,12]])}))).apply(this,arguments)}function Ya(e,t){(e.lc.get(t)||[]).forEach(function(e){e.resolve()}),e.lc.delete(t)}function $a(e,t,n){var r=R(e),i=r.hc[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.hc[r.currentUser.toKey()]=i}}function Xa(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=g(e.rc.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.ic.delete(a),n&&e.sc.wc(a,n)}}catch(o){i.e(o)}finally{i.f()}e.rc.delete(t),e.isPrimaryClient&&e.ac.ls(t).forEach(function(t){e.ac.containsKey(t)||Ja(e,t)})}function Ja(e,t){e.oc.delete(t.path.canonicalString());var n=e.uc.get(t);null!==n&&(Di(e.remoteStore,n),e.uc=e.uc.remove(t),e.cc.delete(n),to(e))}function Za(e,t,n){var r,i=g(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof Ca?(e.ac.addReference(a.key,t),eo(e,a)):a instanceof Ia?(S("SyncEngine","Document no longer in limbo: "+a.key),e.ac.removeReference(a.key,t),e.ac.containsKey(a.key)||Ja(e,a.key)):I()}}catch(o){i.e(o)}finally{i.f()}}function eo(e,t){var n=t.key,r=n.path.canonicalString();e.uc.get(n)||e.oc.has(r)||(S("SyncEngine","New document in limbo: "+n),e.oc.add(r),to(e))}function to(e){for(;e.oc.size>0&&e.uc.size<e.maxConcurrentLimboResolutions;){var t=e.oc.values().next().value;e.oc.delete(t);var n=new ee(X.fromString(t)),r=e.fc.next();e.cc.set(r,new Aa(n)),e.uc=e.uc.insert(n,r),Ai(e.remoteStore,new Cr(Rt(St(n.path)),r,2,fe.at))}}function no(e,t,n){return ro.apply(this,arguments)}function ro(){return(ro=Object(o.a)(k().mark(function e(t,n,r){var i,a,u,s;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=R(t),a=[],u=[],s=[],e.t0=i.ic.isEmpty(),e.t0){e.next=9;break}return i.ic.forEach(function(e,t){s.push(i._c(t,n,r).then(function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){a.push(e);var n=Xr.Ci(t.targetId,e);u.push(n)}}))}),e.next=6,Promise.all(s);case 6:return i.sc.Wo(a),e.next=9,function(){var e=Object(o.a)(k().mark(function e(t,n){var r,i,a,o,u,s,c,l;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=R(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(e){return le.forEach(n,function(t){return le.forEach(t.Si,function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)}).next(function(){return le.forEach(t.Di,function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)})})})});case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),he(e.t0)){e.next=10;break}throw e.t0;case 10:S("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=g(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.qi.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.qi=r.qi.insert(u,l))}catch(h){i.e(h)}finally{i.f()}case 13:case"end":return e.stop()}},e,null,[[1,6]])}));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,u);case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function io(e,t){return ao.apply(this,arguments)}function ao(){return(ao=Object(o.a)(k().mark(function e(t,n){var r,i;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((r=R(t)).currentUser.isEqual(n)){e.next=11;break}return S("SyncEngine","User change. New user:",n.toKey()),e.next=5,ti(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.lc.forEach(function(e){e.forEach(function(e){e.reject(new D(A.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),e.lc.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,no(r,i.ji);case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}function oo(e){var t=R(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Ba.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=function(e,t){var n=R(e),r=n.cc.get(t);if(r&&r.nc)return Pn().add(r.key);var i=Pn(),a=n.rc.get(t);if(!a)return i;var o,u=g(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.ic.get(s);i=i.unionWith(c.view.ju)}}catch(l){u.e(l)}finally{u.f()}return i}.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=function(e,t,n){return Ga.apply(this,arguments)}.bind(null,t),t.sc.Wo=function(e,t){var n,r=R(e),i=!1,a=g(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=g(s.listeners);try{for(l.s();!(c=l.n()).done;)c.value.Pu(o)&&(i=!0)}catch(h){l.e(h)}finally{l.f()}s.Au=o}}}catch(h){a.e(h)}finally{a.f()}i&&ja(r)}.bind(null,t.eventManager),t.sc.wc=function(e,t,n){var r=R(e),i=r.queries.get(t);if(i){var a,o=g(i.listeners);try{for(o.s();!(a=o.n()).done;)a.value.onError(n)}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}.bind(null,t.eventManager),t}function uo(e){var t=R(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=function(e,t){return Ka.apply(this,arguments)}.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=function(e,t,n){return Qa.apply(this,arguments)}.bind(null,t),t}var so=function(){function e(){Object(h.a)(this,e),this.synchronizeTabs=!1}return Object(f.a)(e,[{key:"initialize",value:function(){var e=Object(o.a)(k().mark(function e(t){return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.yt=wi(t.databaseInfo.databaseId),this.sharedClientState=this.gc(t),this.persistence=this.yc(t),e.next=5,this.persistence.start();case 5:this.localStore=this.Ic(t),this.gcScheduler=this.Tc(t,this.localStore),this.indexBackfillerScheduler=this.Ec(t,this.localStore);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"Tc",value:function(e,t){return null}},{key:"Ec",value:function(e,t){return null}},{key:"Ic",value:function(e){return ei(this.persistence,new Jr,e.initialUser,this.yt)}},{key:"yc",value:function(e){return new Qr($r.Bs,this.yt)}},{key:"gc",value:function(e){return new pi}},{key:"terminate",value:function(){var e=Object(o.a)(k().mark(function e(){return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),e}(),co=function(){function e(){Object(h.a)(this,e)}return Object(f.a)(e,[{key:"initialize",value:function(){var e=Object(o.a)(k().mark(function e(t,n){var r=this;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return Ha(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=io.bind(null,this.syncEngine),e.next=12,fa(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new _a}},{key:"createDatastore",value:function(e){var t,n=wi(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new bi(t));return function(e,t,n,r){return new Si(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return Ha(o.syncEngine,e,0)},a=yi.C()?new yi:new vi,new Ti(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new Da(e,t,n,r,i,a);return o&&(u.dc=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=Object(o.a)(k().mark(function e(t){var n;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=R(t),S("RemoteStore","RemoteStore shutting down."),n._u.add(5),e.next=5,Ni(n);case 5:n.mu.shutdown(),n.gu.set("Unknown");case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function lo(e,t,n){if(!n)throw new D(A.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function ho(e){if(!ee.isDocumentKey(e))throw new D(A.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function fo(e){if(ee.isDocumentKey(e))throw new D(A.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function po(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":I()}function vo(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new D(A.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=po(e);throw new D(A.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}var yo=new Map,mo=function(){function e(t){var n;if(Object(h.a)(this,e),void 0===t.host){if(void 0!==t.ssl)throw new D(A.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new D(A.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,function(e,t,n,r){if(!0===t&&!0===r)throw new D(A.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return Object(f.a)(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),go=function(){function e(t,n,r,i){Object(h.a)(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new mo({}),this._settingsFrozen=!1}return Object(f.a)(e,[{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new D(A.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new mo(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new M;switch(e.type){case"gapi":var t=e.client;return new z(t,e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new D(A.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=yo.get(e);t&&(S("ComponentProvider","Removing Datastore"),yo.delete(e),t.terminate())}(this),Promise.resolve()}},{key:"app",get:function(){if(!this._app)throw new D(A.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}}]),e}();var bo=function(){function e(t,n,r){Object(h.a)(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return Object(f.a)(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}},{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new wo(this.firestore,this.converter,this._key.path.popLast())}}]),e}(),ko=function(){function e(t,n,r){Object(h.a)(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return Object(f.a)(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),wo=function(e){function t(e,n,r){var i;return Object(h.a)(this,t),(i=Object(u.a)(this,Object(s.a)(t).call(this,e,n,St(r))))._path=r,i.type="collection",i}return Object(c.a)(t,e),Object(f.a)(t,[{key:"withConverter",value:function(e){return new t(this.firestore,e,this._path)}},{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new bo(this.firestore,null,new ee(e))}}]),t}(ko);function _o(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Object(y.v)(e),lo("collection","path",t),e instanceof go){var a=X.fromString.apply(X,[t].concat(r));return fo(a),new wo(e,null,a)}if(!(e instanceof bo||e instanceof wo))throw new D(A.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(X.fromString.apply(X,[t].concat(r)));return fo(o),new wo(e.firestore,null,o)}function Oo(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Object(y.v)(e),1===arguments.length&&(t=H.R()),lo("doc","path",t),e instanceof go){var a=X.fromString.apply(X,[t].concat(r));return ho(a),new bo(e,null,new ee(a))}if(!(e instanceof bo||e instanceof wo))throw new D(A.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(X.fromString.apply(X,[t].concat(r)));return ho(o),new bo(e.firestore,e instanceof wo?e.converter:null,new ee(o))}var Eo=function(){function e(t){Object(h.a)(this,e),this.observer=t,this.muted=!1}return Object(f.a)(e,[{key:"next",value:function(e){this.observer.next&&this.Rc(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Rc(this.observer.error,e):j("Uncaught Error in snapshot listener:",e.toString())}},{key:"bc",value:function(){this.muted=!0}},{key:"Rc",value:function(e,t){var n=this;this.muted||setTimeout(function(){n.muted||e(t)},0)}}]),e}(),xo=function(){function e(t){Object(h.a)(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return Object(f.a)(e,[{key:"lookup",value:function(){var e=Object(o.a)(k().mark(function e(t){var n,r=this;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new D(A.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=Object(o.a)(k().mark(function e(t,n){var r,i,a,o,u,s;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=R(t),i=sr(r.yt)+"/documents",a={documents:n.map(function(e){return ir(r.yt,e)})},e.next=5,r._o("BatchGetDocuments",i,a,n.length);case 5:return o=e.sent,u=new Map,o.forEach(function(e){var t=hr(r.yt,e);u.set(t.key.toString(),t)}),s=[],e.abrupt("return",(n.forEach(function(e){var t=u.get(e.toString());N(!!t),s.push(t)}),s));case 10:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach(function(e){return r.recordVersion(e)}),n));case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new kn(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=Object(o.a)(k().mark(function e(){var t,n=this;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(e,t){var r=ee.fromPath(t);n.mutations.push(new wn(r,n.precondition(r)))}),e.next=7,function(){var e=Object(o.a)(k().mark(function e(t,n){var r,i,a;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=R(t),i=sr(r.yt)+"/documents",a={writes:n.map(function(e){return fr(r.yt,e)})},e.next=3,r.ao("Commit",i,a);case 3:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw I();t=Y.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new D(A.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Y.min())?an.exists(!1):an.updateTime(t):an.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Y.min()))throw new D(A.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return an.updateTime(t)}return an.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),So=function(){function e(t,n,r,i,a){Object(h.a)(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.kc=r.maxAttempts,this.xo=new _i(this.asyncQueue,"transaction_retry")}return Object(f.a)(e,[{key:"run",value:function(){this.kc-=1,this.Oc()}},{key:"Oc",value:function(){var e=this;this.xo.Ro(Object(o.a)(k().mark(function t(){var n,r;return k().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=new xo(e.datastore),(r=e.Mc(n))&&r.then(function(t){e.asyncQueue.enqueueAndForget(function(){return n.commit().then(function(){e.deferred.resolve(t)}).catch(function(t){e.Fc(t)})})}).catch(function(t){e.Fc(t)});case 2:case"end":return t.stop()}},t)})))}},{key:"Mc",value:function(e){try{var t=this.updateFunction(e);return!ge(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Fc",value:function(e){var t=this;this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(function(){return t.Oc(),Promise.resolve()})):this.deferred.reject(e)}},{key:"$c",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!On(t)}return!1}}]),e}(),jo=function(){function e(t,n,r,i){var a=this;Object(h.a)(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=_.UNAUTHENTICATED,this.clientId=H.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=Object(o.a)(k().mark(function e(t){return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return S("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,function(e){return S("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)})}return Object(f.a)(e,[{key:"getConfiguration",value:function(){var e=Object(o.a)(k().mark(function e(){return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new D(A.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new L;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(Object(o.a)(k().mark(function n(){var r;return k().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=ma(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}},n,null,[[0,14]])}))),t.promise}}]),e}();function To(e,t){return Co.apply(this,arguments)}function Co(){return(Co=Object(o.a)(k().mark(function e(t,n){var r,i;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),S("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=Object(o.a)(k().mark(function e(t){return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,ti(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener(function(){return t.terminate()}),t.offlineComponents=n;case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Io(e,t){return No.apply(this,arguments)}function No(){return(No=Object(o.a)(k().mark(function e(t,n){var r,i;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,Ro(t);case 3:return r=e.sent,S("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener(function(e){return la(n.remoteStore,e)}),t.setAppCheckTokenChangeListener(function(e,t){return la(n.remoteStore,t)}),t.onlineComponents=n;case 13:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ro(e){return Ao.apply(this,arguments)}function Ao(){return(Ao=Object(o.a)(k().mark(function e(t){return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return S("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,To(t,new so);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Do(e){return Lo.apply(this,arguments)}function Lo(){return(Lo=Object(o.a)(k().mark(function e(t){return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return S("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,Io(t,new co);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Po(e){return Do(e).then(function(e){return e.syncEngine})}function Mo(e){return Do(e).then(function(e){return e.datastore})}function Fo(e){return Uo.apply(this,arguments)}function Uo(){return(Uo=Object(o.a)(k().mark(function e(t){var n,r;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Do(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=La.bind(null,n.syncEngine),r.onUnlisten=Ua.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Vo=function(){function e(){var t=this;Object(h.a)(this,e),this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new _i(this,"async_queue_retry"),this.Wc=function(){var e=ki();e&&S("AsyncQueue","Visibility state changed to "+e.visibilityState),t.xo.Po()};var n=ki();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Wc)}return Object(f.a)(e,[{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.zc(),this.Hc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;var t=ki();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}},{key:"enqueue",value:function(e){var t=this;if(this.zc(),this.qc)return new Promise(function(){});var n=new L;return this.Hc(function(){return t.qc&&t.Qc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)}).then(function(){return n.promise})}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget(function(){return t.Lc.push(e),t.Jc()})}},{key:"Jc",value:function(){var e=Object(o.a)(k().mark(function e(){var t=this;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Lc.length){e.next=14;break}return e.prev=1,e.next=4,this.Lc[0]();case 4:this.Lc.shift(),this.xo.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),he(e.t0)){e.next=12;break}throw e.t0;case 12:S("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Lc.length>0&&this.xo.Ro(function(){return t.Jc()});case 14:case"end":return e.stop()}},e,this,[[1,8]])}));return function(){return e.apply(this,arguments)}}()},{key:"Hc",value:function(e){var t=this,n=this.Bc.then(function(){return t.Gc=!0,e().catch(function(e){throw t.Kc=e,t.Gc=!1,j("INTERNAL UNHANDLED ERROR: ",function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e)),e}).then(function(e){return t.Gc=!1,e})});return this.Bc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.zc(),this.jc.indexOf(e)>-1&&(t=0);var i=ya.createAndSchedule(this,e,t,n,function(e){return r.Yc(e)});return this.Uc.push(i),i}},{key:"zc",value:function(){this.Kc&&I()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Xc",value:function(){var e=Object(o.a)(k().mark(function e(){var t;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Bc,e.next=3,t;case 3:if(t!==this.Bc){e.next=0;break}case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"Zc",value:function(e){var t,n=g(this.Uc);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"ta",value:function(e){var t=this;return this.Xc().then(function(){t.Uc.sort(function(e,t){return e.targetTimeMs-t.targetTimeMs});var n,r=g(t.Uc);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.Xc()})}},{key:"ea",value:function(e){this.jc.push(e)}},{key:"Yc",value:function(e){var t=this.Uc.indexOf(e);this.Uc.splice(t,1)}},{key:"isShuttingDown",get:function(){return this.qc}}]),e}();function zo(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=g(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var qo=function(e){function t(e,n,r,i){var a;return Object(h.a)(this,t),(a=Object(u.a)(this,Object(s.a)(t).call(this,e,n,r,i))).type="firestore",a._queue=new Vo,a._persistenceKey=(null==i?void 0:i.name)||"[DEFAULT]",a}return Object(c.a)(t,e),Object(f.a)(t,[{key:"_terminate",value:function(){return this._firestoreClient||Ho(this),this._firestoreClient.terminate()}}]),t}(go);function Bo(e,t){var n="object"==typeof e?e:Object(d.e)(),r="string"==typeof e?e:t||"(default)",i=Object(d.b)(n,"firestore").getImmediate({identifier:r});if(!i._initialized){var a=Object(y.t)("firestore");a&&function(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=vo(e,go))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&T("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=_.MOCK_USER;else{o=Object(y.l)(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new D(A.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new _(s)}e._authCredentials=new F(new P(o,u))}}.apply(void 0,[i].concat(Object(l.a)(a)))}return i}function Wo(e){return e._firestoreClient||Ho(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Ho(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new de(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new jo(e._authCredentials,e._appCheckCredentials,e._queue,r)}var Go=function(){function e(t){Object(h.a)(this,e),this._byteString=t}return Object(f.a)(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(we.fromBase64String(t))}catch(t){throw new D(A.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(we.fromUint8Array(t))}}]),e}(),Ko=function(){function e(){Object(h.a)(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new D(A.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Z(n)}return Object(f.a)(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var Qo=function e(t){Object(h.a)(this,e),this._methodName=t},Yo=function(){function e(t,n){if(Object(h.a)(this,e),!isFinite(t)||t<-90||t>90)throw new D(A.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new D(A.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return Object(f.a)(e,[{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return G(this._lat,e._lat)||G(this._long,e._long)}},{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}}]),e}(),$o=/^__.*__$/,Xo=function(){function e(t,n,r){Object(h.a)(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return Object(f.a)(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new pn(e,this.data,this.fieldMask,t,this.fieldTransforms):new dn(e,this.data,t,this.fieldTransforms)}}]),e}(),Jo=function(){function e(t,n,r){Object(h.a)(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return Object(f.a)(e,[{key:"toMutation",value:function(e,t){return new pn(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function Zo(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw I()}}var eu=function(){function e(t,n,r,i,a,o){Object(h.a)(this,e),this.settings=t,this.databaseId=n,this.yt=r,this.ignoreUndefinedProperties=i,void 0===a&&this.na(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return Object(f.a)(e,[{key:"ia",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"ra",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ia({path:n,oa:!1});return r.ua(e),r}},{key:"ca",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ia({path:n,oa:!1});return r.na(),r}},{key:"aa",value:function(e){return this.ia({path:void 0,oa:!0})}},{key:"ha",value:function(e){return vu(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find(function(t){return e.isPrefixOf(t)})||void 0!==this.fieldTransforms.find(function(t){return e.isPrefixOf(t.field)})}},{key:"na",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.ua(this.path.get(e))}},{key:"ua",value:function(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(Zo(this.sa)&&$o.test(e))throw this.ha('Document fields cannot begin and end with "__"')}},{key:"path",get:function(){return this.settings.path}},{key:"sa",get:function(){return this.settings.sa}}]),e}(),tu=function(){function e(t,n,r){Object(h.a)(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.yt=r||wi(t)}return Object(f.a)(e,[{key:"da",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new eu({sa:e,methodName:t,fa:n,path:Z.emptyPath(),oa:!1,la:r},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}]),e}();function nu(e){var t=e._freezeSettings(),n=wi(e._databaseId);return new tu(e._databaseId,!!t.ignoreUndefinedProperties,n)}function ru(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.da(a.merge||a.mergeFields?2:0,t,n,i);hu("Data must be an object, but it was:",o,r);var u,s,c=cu(r,o);if(a.merge)u=new vt(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,h=[],f=g(a.mergeFields);try{for(f.s();!(l=f.n()).done;){var d=fu(t,l.value,n);if(!o.contains(d))throw new D(A.INVALID_ARGUMENT,"Field '".concat(d,"' is specified in your field mask but missing from your input data."));yu(h,d)||h.push(d)}}catch(p){f.e(p)}finally{f.f()}u=new vt(h),s=o.fieldTransforms.filter(function(e){return u.covers(e.field)})}else u=null,s=o.fieldTransforms;return new Xo(new yt(c),u,s)}var iu=function(e){function t(){return Object(h.a)(this,t),Object(u.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(f.a)(t,[{key:"_toFieldTransform",value:function(e){if(2!==e.sa)throw 1===e.sa?e.ha("".concat(this._methodName,"() can only appear at the top level of your update data")):e.ha("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof t}}]),t}(Qo);function au(e,t,n,r){var i=e.da(1,t,n);hu("Data must be an object, but it was:",i,r);var a=[],o=yt.empty();ye(r,function(e,r){var u=pu(t,e,n);r=Object(y.v)(r);var s=i.ca(u);if(r instanceof iu)a.push(u);else{var c=su(r,s);null!=c&&(a.push(u),o.set(u,c))}});var u=new vt(a);return new Jo(o,u,i.fieldTransforms)}function ou(e,t,n,r,i,a){var o=e.da(1,t,n),u=[fu(t,r,n)],s=[i];if(a.length%2!=0)throw new D(A.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(fu(t,a[c])),s.push(a[c+1]);for(var l=[],h=yt.empty(),f=u.length-1;f>=0;--f)if(!yu(l,u[f])){var d=u[f],p=s[f];p=Object(y.v)(p);var v=o.ca(d);if(p instanceof iu)l.push(d);else{var m=su(p,v);null!=m&&(l.push(d),h.set(d,m))}}var g=new vt(l);return new Jo(h,g,o.fieldTransforms)}function uu(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return su(n,e.da(r?4:3,t))}function su(e,t){if(lu(e=Object(y.v)(e)))return hu("Unsupported field value:",t,e),cu(e,t);if(e instanceof Qo)return function(e,t){if(!Zo(t.sa))throw t.ha("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.ha("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.oa&&4!==t.sa)throw t.ha("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=g(e);try{for(a.s();!(n=a.n()).done;){var o=su(n.value,t.aa(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=Object(y.v)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Wt(t.yt,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Q.fromDate(e);return{timestampValue:Jn(t.yt,n)}}if(e instanceof Q){var r=new Q(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Jn(t.yt,r)}}if(e instanceof Yo)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Go)return{bytesValue:Zn(t.yt,e._byteString)};if(e instanceof bo){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.ha("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:nr(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.ha("Unsupported field value: ".concat(po(e)))}(e,t)}function cu(e,t){var n={};return me(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ye(e,function(e,r){var i=su(r,t.ra(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function lu(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Q||e instanceof Yo||e instanceof Go||e instanceof bo||e instanceof Qo)}function hu(e,t,n){if(!lu(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=po(n);throw"an object"===r?t.ha(e+" a custom object"):t.ha(e+" "+r)}}function fu(e,t,n){if((t=Object(y.v)(t))instanceof Ko)return t._internalPath;if("string"==typeof t)return pu(e,t);throw vu("Field path arguments must be of type string or ",e,!1,void 0,n)}var du=new RegExp("[~\\*/\\[\\]]");function pu(e,t,n){if(t.search(du)>=0)throw vu("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return Object(r.a)(Ko,Object(l.a)(t.split(".")))._internalPath}catch(i){throw vu("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function vu(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new D(A.INVALID_ARGUMENT,u+e+s)}function yu(e,t){return e.some(function(e){return e.isEqual(t)})}var mu=function(){function e(t,n,r,i,a){Object(h.a)(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return Object(f.a)(e,[{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new gu(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(bu("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new bo(this._firestore,this._converter,this._key)}}]),e}(),gu=function(e){function t(){return Object(h.a)(this,t),Object(u.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(f.a)(t,[{key:"data",value:function(){return Object(i.a)(Object(s.a)(t.prototype),"data",this).call(this)}}]),t}(mu);function bu(e,t){return"string"==typeof t?pu(e,t):t instanceof Ko?t._internalPath:t._delegate._internalPath}function ku(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new D(A.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var wu=function e(){Object(h.a)(this,e)},_u=function(e){function t(){return Object(h.a)(this,t),Object(u.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),t}(wu);function Ou(e,t){for(var n=[],r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];t instanceof wu&&n.push(t),function(e){var t=e.filter(function(e){return e instanceof Su}).length,n=e.filter(function(e){return e instanceof Eu}).length;if(t>1||t>0&&n>0)throw new D(A.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(i));var o,u=g(n);try{for(u.s();!(o=u.n()).done;){e=o.value._apply(e)}}catch(s){u.e(s)}finally{u.f()}return e}var Eu=function(e){function t(e,n,r){var i;return Object(h.a)(this,t),(i=Object(u.a)(this,Object(s.a)(t).call(this)))._field=e,i._op=n,i._value=r,i.type="where",i}return Object(c.a)(t,e),Object(f.a)(t,[{key:"_apply",value:function(e){var t=this._parse(e);return Cu(e._query,t),new ko(e.firestore,e.converter,At(e._query,t))}},{key:"_parse",value:function(e){var t=nu(e.firestore);return function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new D(A.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){Tu(o,a);var s,c=[],l=g(o);try{for(l.s();!(s=l.n()).done;){var h=s.value;c.push(ju(r,e,h))}}catch(f){l.e(f)}finally{l.f()}u={arrayValue:{values:c}}}else u=ju(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||Tu(o,a),u=uu(n,"where",o,"in"===a||"not-in"===a);return Ke.create(i,a,u)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}],[{key:"_create",value:function(e,n,r){return new t(e,n,r)}}]),t}(_u);function xu(e,t,n){var r=t,i=bu("where",e);return Eu._create(i,r,n)}var Su=function(e){function t(e,n){var r;return Object(h.a)(this,t),(r=Object(u.a)(this,Object(s.a)(t).call(this))).type=e,r._queryConstraints=n,r}return Object(c.a)(t,e),Object(f.a)(t,[{key:"_parse",value:function(e){var t=this._queryConstraints.map(function(t){return t._parse(e)}).filter(function(e){return e.getFilters().length>0});return 1===t.length?t[0]:Qe.create(t,this._getOperator())}},{key:"_apply",value:function(e){var t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){var n,r=e,i=g(t.getFlattenedFilters());try{for(i.s();!(n=i.n()).done;){var a=n.value;Cu(r,a),r=At(r,a)}}catch(o){i.e(o)}finally{i.f()}}(e._query,t),new ko(e.firestore,e.converter,At(e._query,t)))}},{key:"_getQueryConstraints",value:function(){return this._queryConstraints}},{key:"_getOperator",value:function(){return"and"===this.type?"and":"or"}}],[{key:"_create",value:function(e,n){return new t(e,n)}}]),t}(wu);function ju(e,t,n){if("string"==typeof(n=Object(y.v)(n))){if(""===n)throw new D(A.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!It(t)&&-1!==n.indexOf("/"))throw new D(A.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(X.fromString(n));if(!ee.isDocumentKey(r))throw new D(A.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Le(e,new ee(r))}if(n instanceof bo)return Le(e,n._key);throw new D(A.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(po(n),"."))}function Tu(e,t){if(!Array.isArray(e)||0===e.length)throw new D(A.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new D(A.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function Cu(e,t){if(t.isInequality()){var n=Ct(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new D(A.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));var i=Tt(e);null!==i&&Iu(e,r,i)}var a=function(e,t){var n,r=g(e);try{for(r.s();!(n=r.n()).done;){var i,a=g(n.value.getFlattenedFilters());try{for(a.s();!(i=a.n()).done;){var o=i.value;if(t.indexOf(o.op)>=0)return o.op}}catch(u){a.e(u)}finally{a.f()}}}catch(u){r.e(u)}finally{r.f()}return null}(e.filters,function(e){switch(t.op){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}());if(null!==a)throw a===t.op?new D(A.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new D(A.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(a.toString(),"' filters."))}function Iu(e,t,n){if(!n.isEqual(t))throw new D(A.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var Nu=function(){function e(){Object(h.a)(this,e)}return Object(f.a)(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Ce(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ee(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(xe(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw I()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return ye(e.fields,function(e,i){r[e]=n.convertValue(i,t)}),r}},{key:"convertGeoPoint",value:function(e){return new Yo(Ee(e.latitude),Ee(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map(function(e){return n.convertValue(e,t)})}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=function e(t){var n=t.mapValue.fields.__previous_value__;return Se(n)?e(n):n}(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(je(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Oe(e);return new Q(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=X.fromString(e);N(_r(n));var r=new pe(n.get(1),n.get(3)),i=new ee(n.popFirst(5));return r.isEqual(t)||j("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function Ru(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var Au=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(u.a)(this,Object(s.a)(t).call(this))).firestore=e,n}return Object(c.a)(t,e),Object(f.a)(t,[{key:"convertBytes",value:function(e){return new Go(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new bo(this.firestore,null,t)}}]),t}(Nu),Du=function(){function e(t,n){Object(h.a)(this,e),this.hasPendingWrites=t,this.fromCache=n}return Object(f.a)(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),Lu=function(e){function t(e,n,r,i,a,o){var c;return Object(h.a)(this,t),(c=Object(u.a)(this,Object(s.a)(t).call(this,e,n,r,i,o)))._firestore=e,c._firestoreImpl=e,c.metadata=a,c}return Object(c.a)(t,e),Object(f.a)(t,[{key:"exists",value:function(){return Object(i.a)(Object(s.a)(t.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new Pu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(bu("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),t}(mu),Pu=function(e){function t(){return Object(h.a)(this,t),Object(u.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(f.a)(t,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i.a)(Object(s.a)(t.prototype),"data",this).call(this,e)}}]),t}(Lu),Mu=function(){function e(t,n,r,i){Object(h.a)(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new Du(i.hasPendingWrites,i.fromCache),this.query=r}return Object(f.a)(e,[{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach(function(r){e.call(t,new Pu(n._firestore,n._userDataWriter,r.key,r,new Du(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))})}},{key:"docChanges",value:function(){var e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new D(A.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map(function(t){var r=new Pu(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Du(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}})}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(function(e){return t||3!==e.type}).map(function(t){var n=new Pu(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Du(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:Fu(t.type),doc:n,oldIndex:i,newIndex:a}})}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}},{key:"docs",get:function(){var e=[];return this.forEach(function(t){return e.push(t)}),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}}]),e}();function Fu(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return I()}}var Uu=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(u.a)(this,Object(s.a)(t).call(this))).firestore=e,n}return Object(c.a)(t,e),Object(f.a)(t,[{key:"convertBytes",value:function(e){return new Go(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new bo(this.firestore,null,t)}}]),t}(Nu);function Vu(e,t){var n=vo(e.firestore,qo),r=Oo(e),i=Ru(e.converter,t);return qu(n,[ru(nu(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,an.exists(!1))]).then(function(){return r})}function zu(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,u;e=Object(y.v)(e);var s={includeMetadataChanges:!1},c=0;"object"!=typeof n[c]||zo(n[c])||(s=n[c],c++);var l,h,f,d={includeMetadataChanges:s.includeMetadataChanges};if(zo(n[c])){var p=n[c];n[c]=null===(i=p.next)||void 0===i?void 0:i.bind(p),n[c+1]=null===(a=p.error)||void 0===a?void 0:a.bind(p),n[c+2]=null===(u=p.complete)||void 0===u?void 0:u.bind(p)}if(e instanceof bo)h=vo(e.firestore,qo),f=St(e._key.path),l={next:function(t){n[c]&&n[c](Bu(h,e,t))},error:n[c+1],complete:n[c+2]};else{var v=vo(e,ko);h=vo(v.firestore,qo),f=v._query;var m=new Uu(h);l={next:function(e){n[c]&&n[c](new Mu(h,m,v,e))},error:n[c+1],complete:n[c+2]},ku(e._query)}return function(e,t,n,r){var i=new Eo(l),a=new Ta(t,i,n);return e.asyncQueue.enqueueAndForget(Object(o.a)(k().mark(function t(){return k().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Oa,t.next=3,Fo(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}},t)}))),function(){i.bc(),e.asyncQueue.enqueueAndForget(Object(o.a)(k().mark(function t(){return k().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=xa,t.next=3,Fo(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}},t)})))}}(Wo(h),f,d)}function qu(e,t){return function(e,t){var n=new L;return e.asyncQueue.enqueueAndForget(Object(o.a)(k().mark(function r(){return k().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=za,r.next=3,Po(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}},r)}))),n.promise}(Wo(e),t)}function Bu(e,t,n){var r=n.docs.get(t._key),i=new Uu(e);return new Lu(e,i,t._key,r,new Du(n.hasPendingWrites,n.fromCache),t.converter)}var Wu={maxAttempts:5};function Hu(e,t){if((e=Object(y.v)(e)).firestore!==t)throw new D(A.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var Gu=function(e){function t(e,n){var r;return Object(h.a)(this,t),(r=Object(u.a)(this,Object(s.a)(t).call(this,e,n)))._firestore=e,r}return Object(c.a)(t,e),Object(f.a)(t,[{key:"get",value:function(e){var n=this,r=Hu(e,this._firestore),a=new Uu(this._firestore);return Object(i.a)(Object(s.a)(t.prototype),"get",this).call(this,e).then(function(e){return new Lu(n._firestore,a,r._key,e._document,new Du(!1,!1),r.converter)})}}]),t}(function(){function e(t,n){Object(h.a)(this,e),this._firestore=t,this._transaction=n,this._dataReader=nu(t)}return Object(f.a)(e,[{key:"get",value:function(e){var t=this,n=Hu(e,this._firestore),r=new Au(this._firestore);return this._transaction.lookup([n._key]).then(function(e){if(!e||1!==e.length)return I();var i=e[0];if(i.isFoundDocument())return new mu(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new mu(t._firestore,r,n._key,null,n.converter);throw I()})}},{key:"set",value:function(e,t,n){var r=Hu(e,this._firestore),i=Ru(r.converter,t,n),a=ru(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=Hu(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Object(y.v)(t))||t instanceof Ko?ou(this._dataReader,"Transaction.update",i._key,t,n,o):au(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=Hu(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function Ku(e,t,n){e=vo(e,qo);var r=Object.assign(Object.assign({},Wu),n);return function(e){if(r.maxAttempts<1)throw new D(A.INVALID_ARGUMENT,"Max attempts must be at least 1")}(),function(e,t,n){var r=new L;return e.asyncQueue.enqueueAndForget(Object(o.a)(k().mark(function i(){var a;return k().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Mo(e);case 2:a=i.sent,new So(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}},i)}))),r.promise}(Wo(e),function(n){return t(new Gu(e,n))},r)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){O=e}(d.a),Object(d.c)(new p.a("firestore",function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new qo(new U(e.getProvider("auth-internal")),new B(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new D(A.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new pe(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),Object(d.g)(w,"3.8.0",void 0),Object(d.g)(w,"3.8.0","esm2017")}()}).call(this,n(25))},function(e,t,n){"use strict";(function(e){var t=n(8),r=n(2),i=n(18),a=n(10),o=n(7),u=n(9),s=n(13),c=n(1),l=n(4),h=n(14),f=n(22),d=n(5),p=n(16);function v(){v=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(C){s=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var a=t&&t.prototype instanceof f?t:f,o=Object.create(a.prototype),u=new S(i||[]);return r(o,"_invoke",{value:_(e,n,u)}),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=c;var h={};function f(){}function d(){}function p(){}var y={};s(y,a,function(){return this});var m=Object.getPrototypeOf,g=m&&m(m(j([])));g&&g!==t&&n.call(g,a)&&(y=g);var b=p.prototype=f.prototype=Object.create(y);function k(e){["next","throw","return"].forEach(function(t){s(e,t,function(e){return this._invoke(t,e)})})}function w(e,t){var i;r(this,"_invoke",{value:function(r,a){function o(){return new t(function(i,o){!function r(i,a,o,u){var s=l(e[i],e,a);if("throw"!==s.type){var c=s.arg,h=c.value;return h&&"object"==typeof h&&n.call(h,"__await")?t.resolve(h.__await).then(function(e){r("next",e,o,u)},function(e){r("throw",e,o,u)}):t.resolve(h).then(function(e){c.value=e,o(c)},function(e){return r("throw",e,o,u)})}u(s.arg)}(r,a,i,o)})}return i=i?i.then(o,o):o()}})}function _(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return T()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=O(o,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===h)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function O(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=l(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,h;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function j(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:T}}function T(){return{value:void 0,done:!0}}return d.prototype=p,r(b,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:d,configurable:!0}),d.displayName=s(p,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,u,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},k(w.prototype),s(w.prototype,o,function(){return this}),e.AsyncIterator=w,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new w(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then(function(e){return e.done?e.value:o.next()})},k(b),s(b,u,"Generator"),s(b,a,function(){return this}),s(b,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=j,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:j(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},e}function y(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var g="@firebase/database",b="0.14.0",k="";var w=function(){function e(t){Object(c.a)(this,e),this.domStorage_=t,this.prefix_="firebase:"}return Object(l.a)(e,[{key:"set",value:function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Object(d.O)(t))}},{key:"get",value:function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:Object(d.H)(t)}},{key:"remove",value:function(e){this.domStorage_.removeItem(this.prefixedName_(e))}},{key:"prefixedName_",value:function(e){return this.prefix_+e}},{key:"toString",value:function(){return this.domStorage_.toString()}}]),e}(),_=function(){function e(){Object(c.a)(this,e),this.cache_={},this.isInMemoryStorage=!0}return Object(l.a)(e,[{key:"set",value:function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}},{key:"get",value:function(e){return Object(d.k)(this.cache_,e)?this.cache_[e]:null}},{key:"remove",value:function(e){delete this.cache_[e]}}]),e}(),O=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new w(t)}}catch(n){}return new _},E=O("localStorage"),x=O("sessionStorage"),S=new p.b("@firebase/database"),j=function(){var e=1;return function(){return e++}}(),T=function(e){var t=Object(d.N)(e),n=new d.d;n.update(t);var r=n.digest();return d.g.encodeByteArray(r)},C=function e(){for(var t="",n=0;n<arguments.length;n++){var r=n<0||arguments.length<=n?void 0:arguments[n];Array.isArray(r)||r&&"object"===typeof r&&"number"===typeof r.length?t+=e.apply(null,r):t+="object"===typeof r?Object(d.O)(r):r,t+=" "}return t},I=null,N=!0,R=function(e,t){Object(d.e)(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(S.logLevel=p.a.VERBOSE,I=S.log.bind(S),t&&x.set("logging_enabled",!0)):"function"===typeof e?I=e:(I=null,x.remove("logging_enabled"))},A=function(){if(!0===N&&(N=!1,null===I&&!0===x.get("logging_enabled")&&R(!0)),I){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=C.apply(null,t);I(r)}},D=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];A.apply(void 0,[e].concat(n))}},L=function(){var e="FIREBASE INTERNAL ERROR: "+C.apply(void 0,arguments);S.error(e)},P=function(){var e="FIREBASE FATAL ERROR: ".concat(C.apply(void 0,arguments));throw S.error(e),new Error(e)},M=function(){var e="FIREBASE WARNING: "+C.apply(void 0,arguments);S.warn(e)},F=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},U="[MIN_NAME]",V="[MAX_NAME]",z=function(e,t){if(e===t)return 0;if(e===U||t===V)return-1;if(t===U||e===V)return 1;var n=Y(e),r=Y(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},q=function(e,t){return e===t?0:e<t?-1:1},B=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+Object(d.O)(t))},W=function e(t){if("object"!==typeof t||null===t)return Object(d.O)(t);var n=[];for(var r in t)n.push(r);n.sort();for(var i="{",a=0;a<n.length;a++)0!==a&&(i+=","),i+=Object(d.O)(n[a]),i+=":",i+=e(t[n[a]]);return i+="}"},H=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function G(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var K=function(e){Object(d.e)(!F(e),"Invalid JSON number");var t,n,r,i,a;0===e?(n=0,r=0,t=1/e===-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),1023))+1023,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));var o=[];for(a=52;a;a-=1)o.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;a-=1)o.push(n%2?1:0),n=Math.floor(n/2);o.push(t?1:0),o.reverse();var u=o.join(""),s="";for(a=0;a<64;a+=8){var c=parseInt(u.substr(a,8),2).toString(16);1===c.length&&(c="0"+c),s+=c}return s.toLowerCase()};var Q=new RegExp("^-?(0*)\\d{1,10}$"),Y=function(e){if(Q.test(e)){var t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},$=function(e){try{e()}catch(t){setTimeout(function(){var e=t.stack||"";throw M("Exception was thrown by user callback.",e),t},Math.floor(0))}},X=function(){return("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},J=function(e,t){var n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n},Z=function(){function e(t,n){var r=this;Object(c.a)(this,e),this.appName_=t,this.appCheckProvider=n,this.appCheck=null===n||void 0===n?void 0:n.getImmediate({optional:!0}),this.appCheck||null===n||void 0===n||n.get().then(function(e){return r.appCheck=e})}return Object(l.a)(e,[{key:"getToken",value:function(e){var t=this;return this.appCheck?this.appCheck.getToken(e):new Promise(function(n,r){setTimeout(function(){t.appCheck?t.getToken(e).then(n,r):n(null)},0)})}},{key:"addTokenChangeListener",value:function(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(function(t){return t.addTokenListener(e)})}},{key:"notifyForInvalidToken",value:function(){M('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}]),e}(),ee=function(){function e(t,n,r){var i=this;Object(c.a)(this,e),this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(function(e){return i.auth_=e})}return Object(l.a)(e,[{key:"getToken",value:function(e){var t=this;return this.auth_?this.auth_.getToken(e).catch(function(e){return e&&"auth/token-not-initialized"===e.code?(A("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)}):new Promise(function(n,r){setTimeout(function(){t.auth_?t.getToken(e).then(n,r):n(null)},0)})}},{key:"addTokenChangeListener",value:function(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(function(t){return t.addAuthTokenListener(e)})}},{key:"removeTokenChangeListener",value:function(e){this.authProvider_.get().then(function(t){return t.removeAuthTokenListener(e)})}},{key:"notifyForInvalidToken",value:function(){var e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',M(e)}}]),e}(),te=function(){function e(t){Object(c.a)(this,e),this.accessToken=t}return Object(l.a)(e,[{key:"getToken",value:function(e){return Promise.resolve({accessToken:this.accessToken})}},{key:"addTokenChangeListener",value:function(e){e(this.accessToken)}},{key:"removeTokenChangeListener",value:function(e){}},{key:"notifyForInvalidToken",value:function(){}}]),e}();te.OWNER="owner";var ne=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,re="ac",ie="websocket",ae="long_polling",oe=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",u=arguments.length>6&&void 0!==arguments[6]&&arguments[6];Object(c.a)(this,e),this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=o,this.includeNamespaceInQueryParams=u,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=E.get("host:"+t)||this._host}return Object(l.a)(e,[{key:"isCacheableHost",value:function(){return"s-"===this.internalHost.substr(0,2)}},{key:"isCustomHost",value:function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}},{key:"toString",value:function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}},{key:"toURLString",value:function(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}},{key:"host",get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&E.set("host:"+this._host,this.internalHost))}}]),e}();function ue(e,t,n){var r;if(Object(d.e)("string"===typeof t,"typeof type must == string"),Object(d.e)("object"===typeof n,"typeof params must == object"),t===ie)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==ae)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);var i=[];return G(n,function(e,t){i.push(e+"="+t)}),r+i.join("&")}var se=function(){function e(){Object(c.a)(this,e),this.counters_={}}return Object(l.a)(e,[{key:"incrementCounter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;Object(d.k)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}},{key:"get",value:function(){return Object(d.n)(this.counters_)}}]),e}(),ce={},le={};function he(e){var t=e.toString();return ce[t]||(ce[t]=new se),ce[t]}var fe=function(){function e(t){Object(c.a)(this,e),this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return Object(l.a)(e,[{key:"closeAfter",value:function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}},{key:"handleResponse",value:function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=n.pendingResponses[n.currentResponseNum];delete n.pendingResponses[n.currentResponseNum];for(var t=function(t){e[t]&&$(function(){n.onMessage_(e[t])})},r=0;r<e.length;++r)t(r);if(n.currentResponseNum===n.closeAfterResponse)return n.onClose&&(n.onClose(),n.onClose=null),"break";n.currentResponseNum++};this.pendingResponses[this.currentResponseNum];){if("break"===r())break}}}]),e}(),de="pLPCommand",pe="pRTLPCB",ve=function(){function e(t,n,r,i,a,o,u){var s=this;Object(c.a)(this,e),this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=o,this.lastSessionId=u,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=D(t),this.stats_=he(n),this.urlFn=function(e){return s.appCheckToken&&(e[re]=s.appCheckToken),ue(n,ae,e)}}return Object(l.a)(e,[{key:"open",value:function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new fe(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null},Math.floor(3e4)),function(e){if(Object(d.D)()||"complete"===document.readyState)e();else{var t=!1,n=function n(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(function(){if(!n.isClosed_){n.scriptTagHolder=new ye(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1],o=t[2];t[3],t[4];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,"start"===i)n.id=a,n.password=o;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);a?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(a,function(){n.onClosed_()})):n.onClosed_()}},function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,a)},function(){n.onClosed_()},n.urlFn);var e={start:"t"};e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v="5",n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),n.applicationId&&(e.p=n.applicationId),n.appCheckToken&&(e[re]=n.appCheckToken),"undefined"!==typeof location&&location.hostname&&ne.test(location.hostname)&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,function(){})}})}},{key:"start",value:function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}},{key:"markConnectionHealthy",value:function(){}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}},{key:"send",value:function(e){var t=Object(d.O)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=Object(d.i)(t),r=H(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}},{key:"addDisconnectPingFrame",value:function(e,t){if(!Object(d.D)()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}}},{key:"incrementIncomingBytes_",value:function(e){var t=Object(d.O)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}],[{key:"forceAllow",value:function(){e.forceAllow_=!0}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){return!Object(d.D)()&&(!!e.forceAllow_||!e.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}}]),e}(),ye=function(){function e(t,n,r,i){if(Object(c.a)(this,e),this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Object(d.D)())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=j(),window[de+this.uniqueCallbackIdentifier]=t,window[pe+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var a="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length))a='<script>document.domain="'+document.domain+'";<\/script>';var o="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(u){A("frame writing exception"),u.stack&&A(u.stack),A(u)}}}return Object(l.a)(e,[{key:"close",value:function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)},Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())}},{key:"startLongPoll",value:function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}},{key:"newRequest_",value:function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}},{key:"enqueueSegment",value:function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}},{key:"addLongPollTag_",value:function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,function(){clearTimeout(i),r()})}},{key:"addTag",value:function(e,t){var n=this;Object(d.D)()?this.doNodeLongPoll(e,t):setTimeout(function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){A("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}},Math.floor(1))}}],[{key:"createIFrame_",value:function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||A("No IE domain setting required")}catch(n){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}}]),e}(),me=null;"undefined"!==typeof MozWebSocket?me=MozWebSocket:"undefined"!==typeof WebSocket&&(me=WebSocket);var ge=function(){function t(e,n,r,i,a,o,u){Object(c.a)(this,t),this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=D(this.connId),this.stats_=he(n),this.connURL=t.connectionURL_(n,o,u,i,r),this.nodeAdmin=n.nodeAdmin}return Object(l.a)(t,[{key:"open",value:function(t,n){var r=this;this.onDisconnect=n,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,E.set("previous_websocket_failure",!0);try{var i;if(Object(d.D)()){var a=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":"Firebase/".concat("5","/").concat(k,"/").concat(e.platform,"/").concat(a),"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);var o=Object({NODE_ENV:"production",PUBLIC_URL:"/base-management"}),u=0===this.connURL.indexOf("wss://")?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;u&&(i.proxy={origin:u})}this.mySock=new me(this.connURL,[],i)}catch(c){this.log_("Error instantiating WebSocket.");var s=c.message||c.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=function(){r.log_("Websocket connected."),r.everConnected_=!0},this.mySock.onclose=function(){r.log_("Websocket connection was disconnected."),r.mySock=null,r.onClosed_()},this.mySock.onmessage=function(e){r.handleIncomingFrame(e)},this.mySock.onerror=function(e){r.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&r.log_(t),r.onClosed_()}}},{key:"start",value:function(){}},{key:"markConnectionHealthy",value:function(){E.remove("previous_websocket_failure")}},{key:"appendFrame_",value:function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=Object(d.H)(t);this.onMessage(n)}}},{key:"handleNewFrameCount_",value:function(e){this.totalFrames=e,this.frames=[]}},{key:"extractFrameCount_",value:function(e){if(Object(d.e)(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}},{key:"handleIncomingFrame",value:function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}}},{key:"send",value:function(e){this.resetKeepAlive();var t=Object(d.O)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=H(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}},{key:"resetKeepAlive",value:function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()},Math.floor(45e3))}},{key:"sendString_",value:function(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}],[{key:"connectionURL_",value:function(e,t,n,r,i){var a={v:"5"};return!Object(d.D)()&&"undefined"!==typeof location&&location.hostname&&ne.test(location.hostname)&&(a.r="f"),t&&(a.s=t),n&&(a.ls=n),r&&(a[re]=r),i&&(a.p=i),ue(e,ie,a)}},{key:"forceDisallow",value:function(){t.forceDisallow_=!0}},{key:"isAvailable",value:function(){var e=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==me&&!t.forceDisallow_}},{key:"previouslyFailed",value:function(){return E.isInMemoryStorage||!0===E.get("previous_websocket_failure")}}]),t}();ge.responsesRequiredToBeHealthy=2,ge.healthyTimeout=3e4;var be=function(){function e(t){Object(c.a)(this,e),this.initTransports_(t)}return Object(l.a)(e,[{key:"initTransports_",value:function(t){var n=ge&&ge.isAvailable(),r=n&&!ge.previouslyFailed();if(t.webSocketOnly&&(n||M("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[ge];else{var i,a=this.transports_=[],o=y(e.ALL_TRANSPORTS);try{for(o.s();!(i=o.n()).done;){var u=i.value;u&&u.isAvailable()&&a.push(u)}}catch(s){o.e(s)}finally{o.f()}e.globalTransportInitialized_=!0}}},{key:"initialTransport",value:function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}},{key:"upgradeTransport",value:function(){return this.transports_.length>1?this.transports_[1]:null}}],[{key:"ALL_TRANSPORTS",get:function(){return[ve,ge]}},{key:"IS_TRANSPORT_INITIALIZED",get:function(){return this.globalTransportInitialized_}}]),e}();be.globalTransportInitialized_=!1;var ke=function(){function e(t,n,r,i,a,o,u,s,l,h){Object(c.a)(this,e),this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=o,this.onReady_=u,this.onDisconnect_=s,this.onKill_=l,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=D("c:"+this.id+":"),this.transportManager_=new be(n),this.log_("Connection created"),this.start_()}return Object(l.a)(e,[{key:"start_",value:function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){e.conn_&&e.conn_.open(n,r)},Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=J(function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))},Math.floor(i)))}},{key:"nextTransportId_",value:function(){return"c:"+this.id+":"+this.connectionCount++}},{key:"disconnReceiver_",value:function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}}},{key:"connReceiver_",value:function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}}},{key:"sendRequest",value:function(e){var t={t:"d",d:e};this.sendData_(t)}},{key:"tryCleanupConnection",value:function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}},{key:"onSecondaryControl_",value:function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}},{key:"onSecondaryMessageReceived_",value:function(e){var t=B("t",e),n=B("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}},{key:"upgradeIfSecondaryHealthy_",value:function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}},{key:"proceedWithUpgrade_",value:function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}},{key:"onPrimaryMessageReceived_",value:function(e){var t=B("t",e),n=B("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}},{key:"onDataMessage_",value:function(e){this.onPrimaryResponse_(),this.onMessage_(e)}},{key:"onPrimaryResponse_",value:function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}},{key:"onControl_",value:function(e){var t=B("t",e);if("d"in e){var n=e.d;if("h"===t)this.onHandshake_(n);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?L("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):L("Unknown control packet command: "+t)}}},{key:"onHandshake_",value:function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==n&&M("Protocol version mismatch detected"),this.tryStartUpgrade_())}},{key:"tryStartUpgrade_",value:function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}},{key:"startUpgrade_",value:function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),J(function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())},Math.floor(6e4))}},{key:"onReset_",value:function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}},{key:"onConnectionEstablished_",value:function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):J(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}},{key:"sendPingOnPrimaryIfNecessary_",value:function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}},{key:"onSecondaryConnectionLost_",value:function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}},{key:"onConnectionLost_",value:function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(E.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}},{key:"onConnectionShutdown_",value:function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}},{key:"sendData_",value:function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}},{key:"close",value:function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}},{key:"closeConnections_",value:function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}]),e}(),we=function(){function e(){Object(c.a)(this,e)}return Object(l.a)(e,[{key:"put",value:function(e,t,n,r){}},{key:"merge",value:function(e,t,n,r){}},{key:"refreshAuthToken",value:function(e){}},{key:"refreshAppCheckToken",value:function(e){}},{key:"onDisconnectPut",value:function(e,t,n){}},{key:"onDisconnectMerge",value:function(e,t,n){}},{key:"onDisconnectCancel",value:function(e,t){}},{key:"reportStats",value:function(e){}}]),e}(),_e=function(){function e(t){Object(c.a)(this,e),this.allowedEvents_=t,this.listeners_={},Object(d.e)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return Object(l.a)(e,[{key:"trigger",value:function(e){if(Array.isArray(this.listeners_[e])){for(var t=Object(s.a)(this.listeners_[e]),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0;a<t.length;a++)t[a].callback.apply(t[a].context,r)}}},{key:"on",value:function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)}},{key:"off",value:function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}},{key:"validateEventType_",value:function(e){Object(d.e)(this.allowedEvents_.find(function(t){return t===e}),"Unknown event: "+e)}}]),e}(),Oe=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(a.a)(this,Object(o.a)(t).call(this,["online"]))).online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||Object(d.C)()||(window.addEventListener("online",function(){e.online_||(e.online_=!0,e.trigger("online",!0))},!1),window.addEventListener("offline",function(){e.online_&&(e.online_=!1,e.trigger("online",!1))},!1)),e}return Object(u.a)(t,e),Object(l.a)(t,[{key:"getInitialEvent",value:function(e){return Object(d.e)("online"===e,"Unknown event type: "+e),[this.online_]}},{key:"currentlyOnline",value:function(){return this.online_}}],[{key:"getInstance",value:function(){return new t}}]),t}(_e),Ee=32,xe=768,Se=function(){function e(t,n){if(Object(c.a)(this,e),void 0===n){this.pieces_=t.split("/");for(var r=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}return Object(l.a)(e,[{key:"toString",value:function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}]),e}();function je(){return new Se("")}function Te(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function Ce(e){return e.pieces_.length-e.pieceNum_}function Ie(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new Se(e.pieces_,t)}function Ne(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function Re(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function Ae(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new Se(t,0)}function De(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof Se)for(var i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else for(var a=t.split("/"),o=0;o<a.length;o++)a[o].length>0&&n.push(a[o]);return new Se(n,0)}function Le(e){return e.pieceNum_>=e.pieces_.length}function Pe(e,t){var n=Te(e),r=Te(t);if(null===n)return t;if(n===r)return Pe(Ie(e),Ie(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function Me(e,t){if(Ce(e)!==Ce(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function Fe(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(Ce(e)>Ce(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var Ue=function e(t,n){Object(c.a)(this,e),this.errorPrefix_=n,this.parts_=Re(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var r=0;r<this.parts_.length;r++)this.byteLength_+=Object(d.M)(this.parts_[r]);Ve(this)};function Ve(e){if(e.byteLength_>xe)throw new Error(e.errorPrefix_+"has a key path longer than "+xe+" bytes ("+e.byteLength_+").");if(e.parts_.length>Ee)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Ee+") or object contains a cycle "+ze(e))}function ze(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}var qe=function(e){function t(){var e,n,r;return Object(c.a)(this,t),e=Object(a.a)(this,Object(o.a)(t).call(this,["visible"])),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(r="visibilitychange",n="hidden"):"undefined"!==typeof document.mozHidden?(r="mozvisibilitychange",n="mozHidden"):"undefined"!==typeof document.msHidden?(r="msvisibilitychange",n="msHidden"):"undefined"!==typeof document.webkitHidden&&(r="webkitvisibilitychange",n="webkitHidden")),e.visible_=!0,r&&document.addEventListener(r,function(){var t=!document[n];t!==e.visible_&&(e.visible_=t,e.trigger("visible",t))},!1),e}return Object(u.a)(t,e),Object(l.a)(t,[{key:"getInitialEvent",value:function(e){return Object(d.e)("visible"===e,"Unknown event type: "+e),[this.visible_]}}],[{key:"getInstance",value:function(){return new t}}]),t}(_e),Be=1e3,We=3e5,He=function(e){function n(e,t,r,u,s,l,h,f){var p;if(Object(c.a)(this,n),(p=Object(a.a)(this,Object(o.a)(n).call(this))).repoInfo_=e,p.applicationId_=t,p.onDataUpdate_=r,p.onConnectStatus_=u,p.onServerInfoUpdate_=s,p.authTokenProvider_=l,p.appCheckTokenProvider_=h,p.authOverride_=f,p.id=n.nextPersistentConnectionId_++,p.log_=D("p:"+p.id+":"),p.interruptReasons_={},p.listens=new Map,p.outstandingPuts_=[],p.outstandingGets_=[],p.outstandingPutCount_=0,p.outstandingGetCount_=0,p.onDisconnectRequestQueue_=[],p.connected_=!1,p.reconnectDelay_=Be,p.maxReconnectDelay_=We,p.securityDebugCallback_=null,p.lastSessionId=null,p.establishConnectionTimer_=null,p.visible_=!1,p.requestCBHash_={},p.requestNumber_=0,p.realtime_=null,p.authToken_=null,p.appCheckToken_=null,p.forceTokenRefresh_=!1,p.invalidAuthTokenCount_=0,p.invalidAppCheckTokenCount_=0,p.firstConnection_=!0,p.lastConnectionAttemptTime_=null,p.lastConnectionEstablishedTime_=null,f&&!Object(d.D)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return qe.getInstance().on("visible",p.onVisible_,Object(i.a)(Object(i.a)(p))),-1===e.host.indexOf("fblocal")&&Oe.getInstance().on("online",p.onOnline_,Object(i.a)(Object(i.a)(p))),p}return Object(u.a)(n,e),Object(l.a)(n,[{key:"sendRequest",value:function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(Object(d.O)(i)),Object(d.e)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}},{key:"get",value:function(e){this.initConnection_();var t=new d.a,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:function(e){var n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;var r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}},{key:"listen",value:function(e,t,n,r){this.initConnection_();var i=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),Object(d.e)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Object(d.e)(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");var o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(a).set(i,o),this.connected_&&this.sendListen_(o)}},{key:"sendGet_",value:function(e){var t=this,n=this.outstandingGets_[e];this.sendRequest("g",n.request,function(r){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}},{key:"sendListen_",value:function(e){var t=this,r=e.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);var o={p:i};e.tag&&(o.q=r._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest("q",o,function(o){var u=o.d,s=o.s;n.warnOnListenWarnings_(u,r),(t.listens.get(i)&&t.listens.get(i).get(a))===e&&(t.log_("listen response",o),"ok"!==s&&t.removeListen_(i,a),e.onComplete&&e.onComplete(s,u))})}},{key:"refreshAuthToken",value:function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(e)}},{key:"reduceReconnectDelayIfAdminCredential_",value:function(e){(e&&40===e.length||Object(d.x)(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}},{key:"refreshAppCheckToken",value:function(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},function(){})}},{key:"tryAuth",value:function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=Object(d.G)(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"===typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))})}}},{key:"tryAppCheck",value:function(){var e=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},function(t){var n=t.s,r=t.d||"error";"ok"===n?e.invalidAppCheckTokenCount_=0:e.onAppCheckRevoked_(n,r)})}},{key:"unlisten",value:function(e,t){var n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),Object(d.e)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}},{key:"sendUnlisten_",value:function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}},{key:"onDisconnectPut",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}},{key:"onDisconnectMerge",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}},{key:"onDisconnectCancel",value:function(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}},{key:"sendOnDisconnect_",value:function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,function(e){r&&setTimeout(function(){r(e.s,e.d)},Math.floor(0))})}},{key:"put",value:function(e,t,n,r){this.putInternal("p",e,t,n,r)}},{key:"merge",value:function(e,t,n,r){this.putInternal("m",e,t,n,r)}},{key:"putInternal",value:function(e,t,n,r,i){this.initConnection_();var a={p:t,d:n};void 0!==i&&(a.h=i),this.outstandingPuts_.push({action:e,request:a,onComplete:r}),this.outstandingPutCount_++;var o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}},{key:"sendPut_",value:function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)})}},{key:"reportStats",value:function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}})}}},{key:"onDataMessage_",value:function(e){if("r"in e){this.log_("from server: "+Object(d.O)(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}},{key:"onDataPush_",value:function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):L("Unrecognized action received from server: "+Object(d.O)(e)+"\nAre you using the latest client?")}},{key:"onReady_",value:function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}},{key:"scheduleConnect_",value:function(e){var t=this;Object(d.e)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){t.establishConnectionTimer_=null,t.establishConnection_()},Math.floor(e))}},{key:"initConnection_",value:function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}},{key:"onVisible_",value:function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Be,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}},{key:"onOnline_",value:function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Be,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}},{key:"onRealtimeDisconnect_",value:function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Be),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}},{key:"establishConnection_",value:function(){var e=Object(r.a)(v().mark(function e(){var r,i,a,o,u,s,c,l,h,f,p,y,m,g,b=this;return v().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shouldReconnect_()){e.next=30;break}return this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,r=this.onDataMessage_.bind(this),i=this.onReady_.bind(this),a=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+n.nextConnectionId_++,u=this.lastSessionId,s=!1,c=null,l=function(){c?c.close():(s=!0,a())},h=function(e){Object(d.e)(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(e)},this.realtime_={close:l,sendRequest:h},f=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,e.prev=16,e.next=19,Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);case 19:p=e.sent,y=Object(t.a)(p,2),m=y[0],g=y[1],s?A("getToken() completed but was canceled"):(A("getToken() completed. Creating connection."),this.authToken_=m&&m.accessToken,this.appCheckToken_=g&&g.token,c=new ke(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,r,i,a,function(e){M(e+" ("+b.repoInfo_.toString()+")"),b.interrupt("server_kill")},u)),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(16),this.log_("Failed to get token: "+e.t0),s||(this.repoInfo_.nodeAdmin&&M(e.t0),l());case 30:case"end":return e.stop()}},e,this,[[16,26]])}));return function(){return e.apply(this,arguments)}}()},{key:"interrupt",value:function(e){A("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}},{key:"resume",value:function(e){A("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Object(d.z)(this.interruptReasons_)&&(this.reconnectDelay_=Be,this.realtime_||this.scheduleConnect_(0))}},{key:"handleTimestamp_",value:function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}},{key:"cancelSentTransactions_",value:function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}},{key:"onListenRevoked_",value:function(e,t){var n;n=t?t.map(function(e){return W(e)}).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}},{key:"removeListen_",value:function(e,t){var n,r=new Se(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n}},{key:"onAuthRevoked_",value:function(e,t){A("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}},{key:"onAppCheckRevoked_",value:function(e,t){A("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}},{key:"onSecurityDebugPacket_",value:function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}},{key:"restoreState_",value:function(){this.tryAuth(),this.tryAppCheck();var e,t=y(this.listens.values());try{for(t.s();!(e=t.n()).done;){var n,r=y(e.value.values());try{for(r.s();!(n=r.n()).done;){var i=n.value;this.sendListen_(i)}}catch(s){r.e(s)}finally{r.f()}}}catch(s){t.e(s)}finally{t.f()}for(var a=0;a<this.outstandingPuts_.length;a++)this.outstandingPuts_[a]&&this.sendPut_(a);for(;this.onDisconnectRequestQueue_.length;){var o=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(o.action,o.pathString,o.data,o.onComplete)}for(var u=0;u<this.outstandingGets_.length;u++)this.outstandingGets_[u]&&this.sendGet_(u)}},{key:"sendConnectStats_",value:function(){var e={},t="js";Object(d.D)()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+k.replace(/\./g,"-")]=1,Object(d.C)()?e["framework.cordova"]=1:Object(d.E)()&&(e["framework.reactnative"]=1),this.reportStats(e)}},{key:"shouldReconnect_",value:function(){var e=Oe.getInstance().currentlyOnline();return Object(d.z)(this.interruptReasons_)&&e}}],[{key:"warnOnListenWarnings_",value:function(e,t){if(e&&"object"===typeof e&&Object(d.k)(e,"w")){var n=Object(d.L)(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',i=t._path.toString();M("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(r," at ")+"".concat(i," to your security rules for better performance."))}}}}]),n}(we);He.nextPersistentConnectionId_=0,He.nextConnectionId_=0;var Ge,Ke=function(){function e(t,n){Object(c.a)(this,e),this.name=t,this.node=n}return Object(l.a)(e,null,[{key:"Wrap",value:function(t,n){return new e(t,n)}}]),e}(),Qe=function(){function e(){Object(c.a)(this,e)}return Object(l.a)(e,[{key:"getCompare",value:function(){return this.compare.bind(this)}},{key:"indexedValueChanged",value:function(e,t){var n=new Ke(U,e),r=new Ke(U,t);return 0!==this.compare(n,r)}},{key:"minPost",value:function(){return Ke.MIN}}]),e}(),Ye=function(e){function t(){return Object(c.a)(this,t),Object(a.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"compare",value:function(e,t){return z(e.name,t.name)}},{key:"isDefinedOn",value:function(e){throw Object(d.f)("KeyIndex.isDefinedOn not expected to be called.")}},{key:"indexedValueChanged",value:function(e,t){return!1}},{key:"minPost",value:function(){return Ke.MIN}},{key:"maxPost",value:function(){return new Ke(V,Ge)}},{key:"makePost",value:function(e,t){return Object(d.e)("string"===typeof e,"KeyIndex indexValue must always be a string."),new Ke(e,Ge)}},{key:"toString",value:function(){return".key"}}],[{key:"__EMPTY_NODE",get:function(){return Ge},set:function(e){Ge=e}}]),t}(Qe),$e=new Ye,Xe=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;Object(c.a)(this,e),this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=n?r(t.key,n):1,i&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return Object(l.a)(e,[{key:"getNext",value:function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}},{key:"hasNext",value:function(){return this.nodeStack_.length>0}},{key:"peek",value:function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}]),e}(),Je=function(){function e(t,n,r,i,a){Object(c.a)(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:tt.EMPTY_NODE,this.right=null!=a?a:tt.EMPTY_NODE}return Object(l.a)(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"count",value:function(){return this.left.count()+1+this.right.count()}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min_",value:function(){return this.left.isEmpty()?this:this.left.min_()}},{key:"minKey",value:function(){return this.min_().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()}},{key:"removeMin_",value:function(){if(this.left.isEmpty())return tt.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()}},{key:"remove",value:function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return tt.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}},{key:"isRed_",value:function(){return this.color}},{key:"fixUp_",value:function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}},{key:"moveRedLeft_",value:function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e}},{key:"moveRedRight_",value:function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e}},{key:"rotateLeft_",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight_",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip_",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth_",value:function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1}},{key:"check_",value:function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}]),e}();Je.RED=!0,Je.BLACK=!1;var Ze,et=function(){function e(){Object(c.a)(this,e)}return Object(l.a)(e,[{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Je(e,t,null)}},{key:"remove",value:function(e,t){return this}},{key:"count",value:function(){return 0}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"check_",value:function(){return 0}},{key:"isRed_",value:function(){return!1}}]),e}(),tt=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.EMPTY_NODE;Object(c.a)(this,e),this.comparator_=t,this.root_=n}return Object(l.a)(e,[{key:"insert",value:function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,Je.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Je.BLACK,null,null))}},{key:"get",value:function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}},{key:"getPredecessorKey",value:function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}},{key:"isEmpty",value:function(){return this.root_.isEmpty()}},{key:"count",value:function(){return this.root_.count()}},{key:"minKey",value:function(){return this.root_.minKey()}},{key:"maxKey",value:function(){return this.root_.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root_.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.root_.reverseTraversal(e)}},{key:"getIterator",value:function(e){return new Xe(this.root_,null,this.comparator_,!1,e)}},{key:"getIteratorFrom",value:function(e,t){return new Xe(this.root_,e,this.comparator_,!1,t)}},{key:"getReverseIteratorFrom",value:function(e,t){return new Xe(this.root_,e,this.comparator_,!0,t)}},{key:"getReverseIterator",value:function(e){return new Xe(this.root_,null,this.comparator_,!0,e)}}]),e}();function nt(e,t){return z(e.name,t.name)}function rt(e,t){return z(e,t)}tt.EMPTY_NODE=new et;var it,at,ot,ut=function(e){return"number"===typeof e?"number:"+K(e):"string:"+e},st=function(e){if(e.isLeafNode()){var t=e.val();Object(d.e)("string"===typeof t||"number"===typeof t||"object"===typeof t&&Object(d.k)(t,".sv"),"Priority must be a string or number.")}else Object(d.e)(e===Ze||e.isEmpty(),"priority of unexpected type.");Object(d.e)(e===Ze||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},ct=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.__childrenNodeConstructor.EMPTY_NODE;Object(c.a)(this,e),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,Object(d.e)(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),st(this.priorityNode_)}return Object(l.a)(e,[{key:"isLeafNode",value:function(){return!0}},{key:"getPriority",value:function(){return this.priorityNode_}},{key:"updatePriority",value:function(t){return new e(this.value_,t)}},{key:"getImmediateChild",value:function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"getChild",value:function(t){return Le(t)?this:".priority"===Te(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"hasChild",value:function(){return!1}},{key:"getPredecessorChildName",value:function(e,t){return null}},{key:"updateImmediateChild",value:function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}},{key:"updateChild",value:function(t,n){var r=Te(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:(Object(d.e)(".priority"!==r||1===Ce(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ie(t),n)))}},{key:"isEmpty",value:function(){return!1}},{key:"numChildren",value:function(){return 0}},{key:"forEachChild",value:function(e,t){return!1}},{key:"val",value:function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+ut(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?K(this.value_):this.value_,this.lazyHash_=T(e)}return this.lazyHash_}},{key:"getValue",value:function(){return this.value_}},{key:"compareTo",value:function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(Object(d.e)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}},{key:"compareToLeafNode_",value:function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),a=e.VALUE_TYPE_ORDER.indexOf(r);return Object(d.e)(i>=0,"Unknown leaf type: "+n),Object(d.e)(a>=0,"Unknown leaf type: "+r),i===a?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-i}},{key:"withIndex",value:function(){return this}},{key:"isIndexed",value:function(){return!0}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}],[{key:"__childrenNodeConstructor",set:function(e){it=e},get:function(){return it}}]),e}();ct.VALUE_TYPE_ORDER=["object","boolean","number","string"];var lt,ht,ft=new(function(e){function t(){return Object(c.a)(this,t),Object(a.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"compare",value:function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?z(e.name,t.name):i}},{key:"isDefinedOn",value:function(e){return!e.getPriority().isEmpty()}},{key:"indexedValueChanged",value:function(e,t){return!e.getPriority().equals(t.getPriority())}},{key:"minPost",value:function(){return Ke.MIN}},{key:"maxPost",value:function(){return new Ke(V,new ct("[PRIORITY-POST]",ot))}},{key:"makePost",value:function(e,t){var n=at(e);return new Ke(t,new ct("[PRIORITY-POST]",n))}},{key:"toString",value:function(){return".priority"}}]),t}(Qe)),dt=Math.log(2),pt=function(){function e(t){Object(c.a)(this,e);var n;this.count=(n=t+1,parseInt(Math.log(n)/dt,10)),this.current_=this.count-1;var r,i=(r=this.count,parseInt(Array(r+1).join("1"),2));this.bits_=t+1&i}return Object(l.a)(e,[{key:"nextBitIsOne",value:function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e}}]),e}(),vt=function(e,t,n,r){e.sort(t);var i=function(t){for(var r=null,i=null,a=e.length,o=function(t,r){var i=a-t,o=a;a-=t;var s=function t(r,i){var a,o,u=i-r;if(0===u)return null;if(1===u)return a=e[r],o=n?n(a):a,new Je(o,a.node,Je.BLACK,null,null);var s=parseInt(u/2,10)+r,c=t(r,s),l=t(s+1,i);return a=e[s],o=n?n(a):a,new Je(o,a.node,Je.BLACK,c,l)}(i+1,o),c=e[i],l=n?n(c):c;u(new Je(l,c.node,r,null,s))},u=function(e){r?(r.left=e,r=e):(i=e,r=e)},s=0;s<t.count;++s){var c=t.nextBitIsOne(),l=Math.pow(2,t.count-(s+1));c?o(l,Je.BLACK):(o(l,Je.BLACK),o(l,Je.RED))}return i}(new pt(e.length));return new tt(r||t,i)},yt={},mt=function(){function e(t,n){Object(c.a)(this,e),this.indexes_=t,this.indexSet_=n}return Object(l.a)(e,[{key:"get",value:function(e){var t=Object(d.L)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof tt?t:null}},{key:"hasIndex",value:function(e){return Object(d.k)(this.indexSet_,e.toString())}},{key:"addIndex",value:function(t,n){Object(d.e)(t!==$e,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],a=!1,o=n.getIterator(Ke.Wrap),u=o.getNext();u;)a=a||t.isDefinedOn(u.node),i.push(u),u=o.getNext();r=a?vt(i,t.getCompare()):yt;var s=t.toString(),c=Object.assign({},this.indexSet_);c[s]=t;var l=Object.assign({},this.indexes_);return l[s]=r,new e(l,c)}},{key:"addToIndexes",value:function(t,n){var r=this;return new e(Object(d.I)(this.indexes_,function(e,i){var a=Object(d.L)(r.indexSet_,i);if(Object(d.e)(a,"Missing index implementation for "+i),e===yt){if(a.isDefinedOn(t.node)){for(var o=[],u=n.getIterator(Ke.Wrap),s=u.getNext();s;)s.name!==t.name&&o.push(s),s=u.getNext();return o.push(t),vt(o,a.getCompare())}return yt}var c=n.get(t.name),l=e;return c&&(l=l.remove(new Ke(t.name,c))),l.insert(t,t.node)}),this.indexSet_)}},{key:"removeFromIndexes",value:function(t,n){return new e(Object(d.I)(this.indexes_,function(e){if(e===yt)return e;var r=n.get(t.name);return r?e.remove(new Ke(t.name,r)):e}),this.indexSet_)}}],[{key:"Default",get:function(){return Object(d.e)(yt&&ft,"ChildrenNode.ts has not been loaded"),lt=lt||new e({".priority":yt},{".priority":ft})}}]),e}(),gt=function(){function e(t,n,r){Object(c.a)(this,e),this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&st(this.priorityNode_),this.children_.isEmpty()&&Object(d.e)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object(l.a)(e,[{key:"isLeafNode",value:function(){return!1}},{key:"getPriority",value:function(){return this.priorityNode_||ht}},{key:"updatePriority",value:function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}},{key:"getImmediateChild",value:function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?ht:t}},{key:"getChild",value:function(e){var t=Te(e);return null===t?this:this.getImmediateChild(t).getChild(Ie(e))}},{key:"hasChild",value:function(e){return null!==this.children_.get(e)}},{key:"updateImmediateChild",value:function(t,n){if(Object(d.e)(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r,i,a=new Ke(t,n);n.isEmpty()?(r=this.children_.remove(t),i=this.indexMap_.removeFromIndexes(a,this.children_)):(r=this.children_.insert(t,n),i=this.indexMap_.addToIndexes(a,this.children_));var o=r.isEmpty()?ht:this.priorityNode_;return new e(r,o,i)}},{key:"updateChild",value:function(e,t){var n=Te(e);if(null===n)return t;Object(d.e)(".priority"!==Te(e)||1===Ce(e),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(Ie(e),t);return this.updateImmediateChild(n,r)}},{key:"isEmpty",value:function(){return this.children_.isEmpty()}},{key:"numChildren",value:function(){return this.children_.count()}},{key:"val",value:function(t){if(this.isEmpty())return null;var n={},r=0,i=0,a=!0;if(this.forEachChild(ft,function(o,u){n[o]=u.val(t),r++,a&&e.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):a=!1}),!t&&a&&i<2*r){var o=[];for(var u in n)o[u]=n[u];return o}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+ut(this.getPriority().val())+":"),this.forEachChild(ft,function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)}),this.lazyHash_=""===e?"":T(e)}return this.lazyHash_}},{key:"getPredecessorChildName",value:function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Ke(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)}},{key:"getFirstChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()}},{key:"getFirstChild",value:function(e){var t=this.getFirstChildName(e);return t?new Ke(t,this.children_.get(t)):null}},{key:"getLastChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()}},{key:"getLastChild",value:function(e){var t=this.getLastChildName(e);return t?new Ke(t,this.children_.get(t)):null}},{key:"forEachChild",value:function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal(function(e){return t(e.name,e.node)}):this.children_.inorderTraversal(t)}},{key:"getIterator",value:function(e){return this.getIteratorFrom(e.minPost(),e)}},{key:"getIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,function(e){return e});for(var r=this.children_.getIteratorFrom(e.name,Ke.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r}},{key:"getReverseIterator",value:function(e){return this.getReverseIteratorFrom(e.maxPost(),e)}},{key:"getReverseIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,function(e){return e});for(var r=this.children_.getReverseIteratorFrom(e.name,Ke.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r}},{key:"compareTo",value:function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===bt?-1:0}},{key:"withIndex",value:function(t){if(t===$e||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)}},{key:"isIndexed",value:function(e){return e===$e||this.indexMap_.hasIndex(e)}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(ft),r=t.getIterator(ft),i=n.getNext(),a=r.getNext();i&&a;){if(i.name!==a.name||!i.node.equals(a.node))return!1;i=n.getNext(),a=r.getNext()}return null===i&&null===a}return!1}return!1}},{key:"resolveIndex_",value:function(e){return e===$e?null:this.indexMap_.get(e.toString())}}],[{key:"EMPTY_NODE",get:function(){return ht||(ht=new e(new tt(rt),null,mt.Default))}}]),e}();gt.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;var bt=new(function(e){function t(){return Object(c.a)(this,t),Object(a.a)(this,Object(o.a)(t).call(this,new tt(rt),gt.EMPTY_NODE,mt.Default))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"compareTo",value:function(e){return e===this?0:1}},{key:"equals",value:function(e){return e===this}},{key:"getPriority",value:function(){return this}},{key:"getImmediateChild",value:function(e){return gt.EMPTY_NODE}},{key:"isEmpty",value:function(){return!1}}]),t}(gt));Object.defineProperties(Ke,{MIN:{value:new Ke(U,gt.EMPTY_NODE)},MAX:{value:new Ke(V,bt)}}),Ye.__EMPTY_NODE=gt.EMPTY_NODE,ct.__childrenNodeConstructor=gt,Ze=bt,function(e){ot=e}(bt);var kt=!0;function wt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return gt.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),Object(d.e)(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e)return new ct(e,wt(t));if(e instanceof Array||!kt){var n=gt.EMPTY_NODE;return G(e,function(t,r){if(Object(d.k)(e,t)&&"."!==t.substring(0,1)){var i=wt(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(t,i))}}),n.updatePriority(wt(t))}var r=[],i=!1;if(G(e,function(e,t){if("."!==e.substring(0,1)){var n=wt(t);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new Ke(e,n)))}}),0===r.length)return gt.EMPTY_NODE;var a=vt(r,nt,function(e){return e.name},rt);if(i){var o=vt(r,ft.getCompare());return new gt(a,wt(t),new mt({".priority":o},{".priority":ft}))}return new gt(a,wt(t),mt.Default)}!function(e){at=e}(wt);var _t=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(a.a)(this,Object(o.a)(t).call(this))).indexPath_=e,Object(d.e)(!Le(e)&&".priority"!==Te(e),"Can't create PathIndex with empty path or .priority key"),n}return Object(u.a)(t,e),Object(l.a)(t,[{key:"extractChild",value:function(e){return e.getChild(this.indexPath_)}},{key:"isDefinedOn",value:function(e){return!e.getChild(this.indexPath_).isEmpty()}},{key:"compare",value:function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?z(e.name,t.name):i}},{key:"makePost",value:function(e,t){var n=wt(e),r=gt.EMPTY_NODE.updateChild(this.indexPath_,n);return new Ke(t,r)}},{key:"maxPost",value:function(){var e=gt.EMPTY_NODE.updateChild(this.indexPath_,bt);return new Ke(V,e)}},{key:"toString",value:function(){return Re(this.indexPath_,0).join("/")}}]),t}(Qe),Ot=new(function(e){function t(){return Object(c.a)(this,t),Object(a.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"compare",value:function(e,t){var n=e.node.compareTo(t.node);return 0===n?z(e.name,t.name):n}},{key:"isDefinedOn",value:function(e){return!0}},{key:"indexedValueChanged",value:function(e,t){return!e.equals(t)}},{key:"minPost",value:function(){return Ke.MIN}},{key:"maxPost",value:function(){return Ke.MAX}},{key:"makePost",value:function(e,t){var n=wt(e);return new Ke(t,n)}},{key:"toString",value:function(){return".value"}}]),t}(Qe));function Et(e){return{type:"value",snapshotNode:e}}function xt(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function St(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function jt(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}var Tt=function(){function e(){Object(c.a)(this,e),this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ft}return Object(l.a)(e,[{key:"hasStart",value:function(){return this.startSet_}},{key:"isViewFromLeft",value:function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}},{key:"getIndexStartValue",value:function(){return Object(d.e)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}},{key:"getIndexStartName",value:function(){return Object(d.e)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:U}},{key:"hasEnd",value:function(){return this.endSet_}},{key:"getIndexEndValue",value:function(){return Object(d.e)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}},{key:"getIndexEndName",value:function(){return Object(d.e)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:V}},{key:"hasLimit",value:function(){return this.limitSet_}},{key:"hasAnchoredLimit",value:function(){return this.limitSet_&&""!==this.viewFrom_}},{key:"getLimit",value:function(){return Object(d.e)(this.limitSet_,"Only valid if limit has been set"),this.limit_}},{key:"getIndex",value:function(){return this.index_}},{key:"loadsAllData",value:function(){return!(this.startSet_||this.endSet_||this.limitSet_)}},{key:"isDefault",value:function(){return this.loadsAllData()&&this.index_===ft}},{key:"copy",value:function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}]),e}();function Ct(e){var t,n={};if(e.isDefault())return n;if(e.index_===ft?t="$priority":e.index_===Ot?t="$value":e.index_===$e?t="$key":(Object(d.e)(e.index_ instanceof _t,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=Object(d.O)(t),e.startSet_){var r=e.startAfterSet_?"startAfter":"startAt";n[r]=Object(d.O)(e.indexStartValue_),e.startNameSet_&&(n[r]+=","+Object(d.O)(e.indexStartName_))}if(e.endSet_){var i=e.endBeforeSet_?"endBefore":"endAt";n[i]=Object(d.O)(e.indexEndValue_),e.endNameSet_&&(n[i]+=","+Object(d.O)(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_),n}function It(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==ft&&(t.i=e.index_.toString()),t}var Nt=function(e){function n(e,t,r,i){var u;return Object(c.a)(this,n),(u=Object(a.a)(this,Object(o.a)(n).call(this))).repoInfo_=e,u.onDataUpdate_=t,u.authTokenProvider_=r,u.appCheckTokenProvider_=i,u.log_=D("p:rest:"),u.listens_={},u}return Object(u.a)(n,e),Object(l.a)(n,[{key:"reportStats",value:function(e){throw new Error("Method not implemented.")}},{key:"listen",value:function(e,t,r,i){var a=this,o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);var u=n.getListenId_(e,r),s={};this.listens_[u]=s;var c=Ct(e._queryParams);this.restRequest_(o+".json",c,function(e,t){var n=t;(404===e&&(n=null,e=null),null===e&&a.onDataUpdate_(o,n,!1,r),Object(d.L)(a.listens_,u)===s)&&i(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)})}},{key:"unlisten",value:function(e,t){var r=n.getListenId_(e,t);delete this.listens_[r]}},{key:"get",value:function(e){var t=this,n=Ct(e._queryParams),r=e._path.toString(),i=new d.a;return this.restRequest_(r+".json",n,function(e,n){var a=n;404===e&&(a=null,e=null),null===e?(t.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}},{key:"refreshAuthToken",value:function(e){}},{key:"restRequest_",value:function(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;return r.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(function(a){var o=Object(t.a)(a,2),u=o[0],s=o[1];u&&u.accessToken&&(r.auth=u.accessToken),s&&s.token&&(r.ac=s.token);var c=(n.repoInfo_.secure?"https://":"http://")+n.repoInfo_.host+e+"?ns="+n.repoInfo_.namespace+Object(d.J)(r);n.log_("Sending REST request for "+c);var l=new XMLHttpRequest;l.onreadystatechange=function(){if(i&&4===l.readyState){n.log_("REST Response for "+c+" received. status:",l.status,"response:",l.responseText);var e=null;if(l.status>=200&&l.status<300){try{e=Object(d.H)(l.responseText)}catch(t){M("Failed to parse JSON response for "+c+": "+l.responseText)}i(null,e)}else 401!==l.status&&404!==l.status&&M("Got unsuccessful REST response for "+c+" Status: "+l.status),i(l.status);i=null}},l.open("GET",c,!0),l.send()})}}],[{key:"getListenId_",value:function(e,t){return void 0!==t?"tag$"+t:(Object(d.e)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}}]),n}(we),Rt=function(){function e(){Object(c.a)(this,e),this.rootNode_=gt.EMPTY_NODE}return Object(l.a)(e,[{key:"getNode",value:function(e){return this.rootNode_.getChild(e)}},{key:"updateSnapshot",value:function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}]),e}();function At(){return{value:null,children:new Map}}function Dt(e,t,n){if(Le(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{var r=Te(t);e.children.has(r)||e.children.set(r,At()),Dt(e.children.get(r),t=Ie(t),n)}}function Lt(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach(function(e,n){t(n,e)})}(e,function(e,r){Lt(r,new Se(t.toString()+"/"+e),n)})}var Pt,Mt=function(){function e(t){Object(c.a)(this,e),this.collection_=t,this.last_=null}return Object(l.a)(e,[{key:"get",value:function(){var e=this.collection_.get(),t=Object.assign({},e);return this.last_&&G(this.last_,function(e,n){t[e]=t[e]-n}),this.last_=e,t}}]),e}(),Ft=1e4,Ut=3e4,Vt=function(){function e(t,n){Object(c.a)(this,e),this.server_=n,this.statsToReport_={},this.statsListener_=new Mt(t);var r=Ft+(Ut-Ft)*Math.random();J(this.reportStats_.bind(this),Math.floor(r))}return Object(l.a)(e,[{key:"reportStats_",value:function(){var e=this,t=this.statsListener_.get(),n={},r=!1;G(t,function(t,i){i>0&&Object(d.k)(e.statsToReport_,t)&&(n[t]=i,r=!0)}),r&&this.server_.reportStats(n),J(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}]),e}();function zt(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Pt||(Pt={}));var qt,Bt=function(){function e(t,n,r){Object(c.a)(this,e),this.path=t,this.affectedTree=n,this.revert=r,this.type=Pt.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return Object(l.a)(e,[{key:"operationForChild",value:function(t){if(Le(this.path)){if(null!=this.affectedTree.value)return Object(d.e)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new Se(t));return new e(je(),n,this.revert)}return Object(d.e)(Te(this.path)===t,"operationForChild called for unrelated child."),new e(Ie(this.path),this.affectedTree,this.revert)}}]),e}(),Wt=function(){function e(t,n,r){Object(c.a)(this,e),this.source=t,this.path=n,this.snap=r,this.type=Pt.OVERWRITE}return Object(l.a)(e,[{key:"operationForChild",value:function(t){return Le(this.path)?new e(this.source,je(),this.snap.getImmediateChild(t)):new e(this.source,Ie(this.path),this.snap)}}]),e}(),Ht=function(){function e(t,n,r){Object(c.a)(this,e),this.source=t,this.path=n,this.children=r,this.type=Pt.MERGE}return Object(l.a)(e,[{key:"operationForChild",value:function(t){if(Le(this.path)){var n=this.children.subtree(new Se(t));return n.isEmpty()?null:n.value?new Wt(this.source,je(),n.value):new e(this.source,je(),n)}return Object(d.e)(Te(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,Ie(this.path),this.children)}},{key:"toString",value:function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}]),e}(),Gt=function(){function e(t,n,r){Object(c.a)(this,e),this.node_=t,this.fullyInitialized_=n,this.filtered_=r}return Object(l.a)(e,[{key:"isFullyInitialized",value:function(){return this.fullyInitialized_}},{key:"isFiltered",value:function(){return this.filtered_}},{key:"isCompleteForPath",value:function(e){if(Le(e))return this.isFullyInitialized()&&!this.filtered_;var t=Te(e);return this.isCompleteForChild(t)}},{key:"isCompleteForChild",value:function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}},{key:"getNode",value:function(){return this.node_}}]),e}();function Kt(e,t,n,r,i,a){var o=r.filter(function(e){return e.type===n});o.sort(function(t,n){return function(e,t,n){if(null==t.childName||null==n.childName)throw Object(d.f)("Should only compare child_ events.");var r=new Ke(t.childName,t.snapshotNode),i=new Ke(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n)}),o.forEach(function(n){var r=function(e,t,n){return"value"===t.type||"child_removed"===t.type?t:(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_),t)}(e,n,a);i.forEach(function(i){i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))})})}function Qt(e,t){return{eventCache:e,serverCache:t}}function Yt(e,t,n,r){return Qt(new Gt(t,n,r),e.serverCache)}function $t(e,t,n,r){return Qt(e.eventCache,new Gt(t,n,r))}function Xt(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Jt(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var Zt=function(){return qt||(qt=new tt(q)),qt},en=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Zt();Object(c.a)(this,e),this.value=t,this.children=n}return Object(l.a)(e,[{key:"isEmpty",value:function(){return null===this.value&&this.children.isEmpty()}},{key:"findRootMostMatchingPathAndValue",value:function(e,t){if(null!=this.value&&t(this.value))return{path:je(),value:this.value};if(Le(e))return null;var n=Te(e),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(Ie(e),t);return null!=i?{path:De(new Se(n),i.path),value:i.value}:null}return null}},{key:"findRootMostValueAndPath",value:function(e){return this.findRootMostMatchingPathAndValue(e,function(){return!0})}},{key:"subtree",value:function(t){if(Le(t))return this;var n=Te(t),r=this.children.get(n);return null!==r?r.subtree(Ie(t)):new e(null)}},{key:"set",value:function(t,n){if(Le(t))return new e(n,this.children);var r=Te(t),i=(this.children.get(r)||new e(null)).set(Ie(t),n),a=this.children.insert(r,i);return new e(this.value,a)}},{key:"remove",value:function(t){if(Le(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=Te(t),r=this.children.get(n);if(r){var i,a=r.remove(Ie(t));return i=a.isEmpty()?this.children.remove(n):this.children.insert(n,a),null===this.value&&i.isEmpty()?new e(null):new e(this.value,i)}return this}},{key:"get",value:function(e){if(Le(e))return this.value;var t=Te(e),n=this.children.get(t);return n?n.get(Ie(e)):null}},{key:"setTree",value:function(t,n){if(Le(t))return n;var r,i=Te(t),a=(this.children.get(i)||new e(null)).setTree(Ie(t),n);return r=a.isEmpty()?this.children.remove(i):this.children.insert(i,a),new e(this.value,r)}},{key:"fold",value:function(e){return this.fold_(je(),e)}},{key:"fold_",value:function(e,t){var n={};return this.children.inorderTraversal(function(r,i){n[r]=i.fold_(De(e,r),t)}),t(e,this.value,n)}},{key:"findOnPath",value:function(e,t){return this.findOnPath_(e,je(),t)}},{key:"findOnPath_",value:function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(Le(e))return null;var i=Te(e),a=this.children.get(i);return a?a.findOnPath_(Ie(e),De(t,i),n):null}},{key:"foreachOnPath",value:function(e,t){return this.foreachOnPath_(e,je(),t)}},{key:"foreachOnPath_",value:function(t,n,r){if(Le(t))return this;this.value&&r(n,this.value);var i=Te(t),a=this.children.get(i);return a?a.foreachOnPath_(Ie(t),De(n,i),r):new e(null)}},{key:"foreach",value:function(e){this.foreach_(je(),e)}},{key:"foreach_",value:function(e,t){this.children.inorderTraversal(function(n,r){r.foreach_(De(e,n),t)}),this.value&&t(e,this.value)}},{key:"foreachChild",value:function(e){this.children.inorderTraversal(function(t,n){n.value&&e(t,n.value)})}}],[{key:"fromObject",value:function(t){var n=new e(null);return G(t,function(e,t){n=n.set(new Se(e),t)}),n}}]),e}(),tn=function(){function e(t){Object(c.a)(this,e),this.writeTree_=t}return Object(l.a)(e,null,[{key:"empty",value:function(){return new e(new en(null))}}]),e}();function nn(e,t,n){if(Le(t))return new tn(new en(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,a=r.value,o=Pe(i,t);return a=a.updateChild(o,n),new tn(e.writeTree_.set(i,a))}var u=new en(n),s=e.writeTree_.setTree(t,u);return new tn(s)}function rn(e,t,n){var r=e;return G(n,function(e,n){r=nn(r,De(t,e),n)}),r}function an(e,t){if(Le(t))return tn.empty();var n=e.writeTree_.setTree(t,new en(null));return new tn(n)}function on(e,t){return null!=un(e,t)}function un(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(Pe(n.path,t)):null}function sn(e){var t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(ft,function(e,n){t.push(new Ke(e,n))}):e.writeTree_.children.inorderTraversal(function(e,n){null!=n.value&&t.push(new Ke(e,n.value))}),t}function cn(e,t){if(Le(t))return e;var n=un(e,t);return new tn(null!=n?new en(n):e.writeTree_.subtree(t))}function ln(e){return e.writeTree_.isEmpty()}function hn(e,t){return function e(t,n,r){if(null!=n.value)return r.updateChild(t,n.value);var i=null;return n.children.inorderTraversal(function(n,a){".priority"===n?(Object(d.e)(null!==a.value,"Priority writes must always be leaf nodes"),i=a.value):r=e(De(t,n),a,r)}),r.getChild(t).isEmpty()||null===i||(r=r.updateChild(De(t,".priority"),i)),r}(je(),e.writeTree_,t)}function fn(e,t){return xn(t,e)}function dn(e,t){var n=e.allWrites.findIndex(function(e){return e.writeId===t});Object(d.e)(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var i=r.visible,a=!1,o=e.allWrites.length-1;i&&o>=0;){var u=e.allWrites[o];u.visible&&(o>=n&&pn(u,r.path)?i=!1:Fe(r.path,u.path)&&(a=!0)),o--}if(i){if(a)return function(e){e.visibleWrites=yn(e.allWrites,vn,je()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;r.snap?e.visibleWrites=an(e.visibleWrites,r.path):G(r.children,function(t){e.visibleWrites=an(e.visibleWrites,De(r.path,t))});return!0}return!1}function pn(e,t){if(e.snap)return Fe(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&Fe(De(e.path,n),t))return!0;return!1}function vn(e){return e.visible}function yn(e,t,n){for(var r=tn.empty(),i=0;i<e.length;++i){var a=e[i];if(t(a)){var o=a.path,u=void 0;if(a.snap)Fe(n,o)?r=nn(r,u=Pe(n,o),a.snap):Fe(o,n)&&(u=Pe(o,n),r=nn(r,je(),a.snap.getChild(u)));else{if(!a.children)throw Object(d.f)("WriteRecord should have .snap or .children");if(Fe(n,o))r=rn(r,u=Pe(n,o),a.children);else if(Fe(o,n))if(Le(u=Pe(o,n)))r=rn(r,je(),a.children);else{var s=Object(d.L)(a.children,Te(u));if(s){var c=s.getChild(Ie(u));r=nn(r,je(),c)}}}}}return r}function mn(e,t,n,r,i){if(r||i){var a=cn(e.visibleWrites,t);if(!i&&ln(a))return n;if(i||null!=n||on(a,je())){return hn(yn(e.allWrites,function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(Fe(e.path,t)||Fe(t,e.path))},t),n||gt.EMPTY_NODE)}return null}var o=un(e.visibleWrites,t);if(null!=o)return o;var u=cn(e.visibleWrites,t);return ln(u)?n:null!=n||on(u,je())?hn(u,n||gt.EMPTY_NODE):null}function gn(e,t,n,r){return mn(e.writeTree,e.treePath,t,n,r)}function bn(e,t){return function(e,t,n){var r=gt.EMPTY_NODE,i=un(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(ft,function(e,t){r=r.updateImmediateChild(e,t)}),r;if(n){var a=cn(e.visibleWrites,t);return n.forEachChild(ft,function(e,t){var n=hn(cn(a,new Se(e)),t);r=r.updateImmediateChild(e,n)}),sn(a).forEach(function(e){r=r.updateImmediateChild(e.name,e.node)}),r}return sn(cn(e.visibleWrites,t)).forEach(function(e){r=r.updateImmediateChild(e.name,e.node)}),r}(e.writeTree,e.treePath,t)}function kn(e,t,n,r){return function(e,t,n,r,i){Object(d.e)(r||i,"Either existingEventSnap or existingServerSnap must exist");var a=De(t,n);if(on(e.visibleWrites,a))return null;var o=cn(e.visibleWrites,a);return ln(o)?i.getChild(n):hn(o,i.getChild(n))}(e.writeTree,e.treePath,t,n,r)}function wn(e,t){return function(e,t){return un(e.visibleWrites,t)}(e.writeTree,De(e.treePath,t))}function _n(e,t,n,r,i,a){return function(e,t,n,r,i,a,o){var u,s=cn(e.visibleWrites,t),c=un(s,je());if(null!=c)u=c;else{if(null==n)return[];u=hn(s,n)}if((u=u.withIndex(o)).isEmpty()||u.isLeafNode())return[];for(var l=[],h=o.getCompare(),f=a?u.getReverseIteratorFrom(r,o):u.getIteratorFrom(r,o),d=f.getNext();d&&l.length<i;)0!==h(d,r)&&l.push(d),d=f.getNext();return l}(e.writeTree,e.treePath,t,n,r,i,a)}function On(e,t,n){return function(e,t,n,r){var i=De(t,n),a=un(e.visibleWrites,i);return null!=a?a:r.isCompleteForChild(n)?hn(cn(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function En(e,t){return xn(De(e.treePath,t),e.writeTree)}function xn(e,t){return{treePath:e,writeTree:t}}var Sn=function(){function e(){Object(c.a)(this,e),this.changeMap=new Map}return Object(l.a)(e,[{key:"trackChildChange",value:function(e){var t=e.type,n=e.childName;Object(d.e)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),Object(d.e)(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,jt(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,St(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,xt(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw Object(d.f)("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,jt(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}},{key:"getChanges",value:function(){return Array.from(this.changeMap.values())}}]),e}(),jn=new(function(){function e(){Object(c.a)(this,e)}return Object(l.a)(e,[{key:"getCompleteChild",value:function(e){return null}},{key:"getChildAfterChild",value:function(e,t,n){return null}}]),e}()),Tn=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Object(c.a)(this,e),this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}return Object(l.a)(e,[{key:"getCompleteChild",value:function(e){var t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new Gt(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return On(this.writes_,e,n)}},{key:"getChildAfterChild",value:function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Jt(this.viewCache_),i=_n(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}]),e}();function Cn(e,t,n,r,i){var a,o,u=new Sn;if(n.type===Pt.OVERWRITE){var s=n;s.source.fromUser?a=Rn(e,t,s.path,s.snap,r,i,u):(Object(d.e)(s.source.fromServer,"Unknown source."),o=s.source.tagged||t.serverCache.isFiltered()&&!Le(s.path),a=Nn(e,t,s.path,s.snap,r,i,o,u))}else if(n.type===Pt.MERGE){var c=n;c.source.fromUser?a=function(e,t,n,r,i,a,o){var u=t;return r.foreach(function(r,s){var c=De(n,r);An(t,Te(c))&&(u=Rn(e,u,c,s,i,a,o))}),r.foreach(function(r,s){var c=De(n,r);An(t,Te(c))||(u=Rn(e,u,c,s,i,a,o))}),u}(e,t,c.path,c.children,r,i,u):(Object(d.e)(c.source.fromServer,"Unknown source."),o=c.source.tagged||t.serverCache.isFiltered(),a=Ln(e,t,c.path,c.children,r,i,o,u))}else if(n.type===Pt.ACK_USER_WRITE){var l=n;a=l.revert?function(e,t,n,r,i,a){var o;if(null!=wn(r,n))return t;var u,s=new Tn(r,t,i),c=t.eventCache.getNode();if(Le(n)||".priority"===Te(n)){var l;if(t.serverCache.isFullyInitialized())l=gn(r,Jt(t));else{var h=t.serverCache.getNode();Object(d.e)(h instanceof gt,"serverChildren would be complete if leaf node"),l=bn(r,h)}l=l,u=e.filter.updateFullNode(c,l,a)}else{var f=Te(n),p=On(r,f,t.serverCache);null==p&&t.serverCache.isCompleteForChild(f)&&(p=c.getImmediateChild(f)),(u=null!=p?e.filter.updateChild(c,f,p,Ie(n),s,a):t.eventCache.getNode().hasChild(f)?e.filter.updateChild(c,f,gt.EMPTY_NODE,Ie(n),s,a):c).isEmpty()&&t.serverCache.isFullyInitialized()&&(o=gn(r,Jt(t))).isLeafNode()&&(u=e.filter.updateFullNode(u,o,a))}return o=t.serverCache.isFullyInitialized()||null!=wn(r,je()),Yt(t,u,o,e.filter.filtersNodes())}(e,t,l.path,r,i,u):function(e,t,n,r,i,a,o){if(null!=wn(i,n))return t;var u=t.serverCache.isFiltered(),s=t.serverCache;if(null!=r.value){if(Le(n)&&s.isFullyInitialized()||s.isCompleteForPath(n))return Nn(e,t,n,s.getNode().getChild(n),i,a,u,o);if(Le(n)){var c=new en(null);return s.getNode().forEachChild($e,function(e,t){c=c.set(new Se(e),t)}),Ln(e,t,n,c,i,a,u,o)}return t}var l=new en(null);return r.foreach(function(e,t){var r=De(n,e);s.isCompleteForPath(r)&&(l=l.set(e,s.getNode().getChild(r)))}),Ln(e,t,n,l,i,a,u,o)}(e,t,l.path,l.affectedTree,r,i,u)}else{if(n.type!==Pt.LISTEN_COMPLETE)throw Object(d.f)("Unknown operation type: "+n.type);a=function(e,t,n,r,i){var a=t.serverCache,o=$t(t,a.getNode(),a.isFullyInitialized()||Le(n),a.isFiltered());return In(e,o,n,r,jn,i)}(e,t,n.path,r,u)}var h=u.getChanges();return function(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=Xt(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&n.push(Et(Xt(t)))}}(t,a,h),{viewCache:a,changes:h}}function In(e,t,n,r,i,a){var o,u,s=t.eventCache;if(null!=wn(r,n))return t;if(Le(n))if(Object(d.e)(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var c=Jt(t),l=bn(r,c instanceof gt?c:gt.EMPTY_NODE);o=e.filter.updateFullNode(t.eventCache.getNode(),l,a)}else{var h=gn(r,Jt(t));o=e.filter.updateFullNode(t.eventCache.getNode(),h,a)}else{var f=Te(n);if(".priority"===f){Object(d.e)(1===Ce(n),"Can't have a priority with additional path components");var p=s.getNode(),v=kn(r,n,p,u=t.serverCache.getNode());o=null!=v?e.filter.updatePriority(p,v):s.getNode()}else{var y,m=Ie(n);if(s.isCompleteForChild(f)){u=t.serverCache.getNode();var g=kn(r,n,s.getNode(),u);y=null!=g?s.getNode().getImmediateChild(f).updateChild(m,g):s.getNode().getImmediateChild(f)}else y=On(r,f,t.serverCache);o=null!=y?e.filter.updateChild(s.getNode(),f,y,m,i,a):s.getNode()}}return Yt(t,o,s.isFullyInitialized()||Le(n),e.filter.filtersNodes())}function Nn(e,t,n,r,i,a,o,u){var s,c=t.serverCache,l=o?e.filter:e.filter.getIndexedFilter();if(Le(n))s=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(n,r);s=l.updateFullNode(c.getNode(),h,null)}else{var f=Te(n);if(!c.isCompleteForPath(n)&&Ce(n)>1)return t;var d=Ie(n),p=c.getNode().getImmediateChild(f).updateChild(d,r);s=".priority"===f?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),f,p,d,jn,null)}var v=$t(t,s,c.isFullyInitialized()||Le(n),l.filtersNodes());return In(e,v,n,i,new Tn(i,v,a),u)}function Rn(e,t,n,r,i,a,o){var u,s,c=t.eventCache,l=new Tn(i,t,a);if(Le(n))s=e.filter.updateFullNode(t.eventCache.getNode(),r,o),u=Yt(t,s,!0,e.filter.filtersNodes());else{var h=Te(n);if(".priority"===h)s=e.filter.updatePriority(t.eventCache.getNode(),r),u=Yt(t,s,c.isFullyInitialized(),c.isFiltered());else{var f,d=Ie(n),p=c.getNode().getImmediateChild(h);if(Le(d))f=r;else{var v=l.getCompleteChild(h);f=null!=v?".priority"===Ne(d)&&v.getChild(Ae(d)).isEmpty()?v:v.updateChild(d,r):gt.EMPTY_NODE}if(p.equals(f))u=t;else u=Yt(t,e.filter.updateChild(c.getNode(),h,f,d,l,o),c.isFullyInitialized(),e.filter.filtersNodes())}}return u}function An(e,t){return e.eventCache.isCompleteForChild(t)}function Dn(e,t,n){return n.foreach(function(e,n){t=t.updateChild(e,n)}),t}function Ln(e,t,n,r,i,a,o,u){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var s,c=t;s=Le(n)?r:new en(null).setTree(n,r);var l=t.serverCache.getNode();return s.children.inorderTraversal(function(n,r){if(l.hasChild(n)){var s=Dn(0,t.serverCache.getNode().getImmediateChild(n),r);c=Nn(e,c,new Se(n),s,i,a,o,u)}}),s.children.inorderTraversal(function(n,r){var s=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!l.hasChild(n)&&!s){var h=Dn(0,t.serverCache.getNode().getImmediateChild(n),r);c=Nn(e,c,new Se(n),h,i,a,o,u)}}),c}var Pn;function Mn(e,t){var n=Jt(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!Le(t)&&!n.getImmediateChild(Te(t)).isEmpty())?n.getChild(t):null}function Fn(e,t,n,r){t.type===Pt.MERGE&&null!==t.source.queryId&&(Object(d.e)(Jt(e.viewCache_),"We should always have a full cache before handling merges"),Object(d.e)(Xt(e.viewCache_),"Missing event cache, even though we have a server cache"));var i,a,o=e.viewCache_,u=Cn(e.processor_,o,t,n,r);return i=e.processor_,a=u.viewCache,Object(d.e)(a.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),Object(d.e)(a.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),Object(d.e)(u.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=u.viewCache,Un(e,u.changes,u.viewCache.eventCache.getNode(),null)}function Un(e,t,n,r){var i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){var i=[],a=[];return t.forEach(function(t){var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&a.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))}),Kt(e,i,"child_removed",t,r,n),Kt(e,i,"child_added",t,r,n),Kt(e,i,"child_moved",a,r,n),Kt(e,i,"child_changed",t,r,n),Kt(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}var Vn;function zn(e,t,n,r){var i=t.source.queryId;if(null!==i){var a=e.views.get(i);return Object(d.e)(null!=a,"SyncTree gave us an op for an invalid query."),Fn(a,t,n,r)}var o,u=[],s=y(e.views.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u=u.concat(Fn(c,t,n,r))}}catch(l){s.e(l)}finally{s.f()}return u}function qn(e,t){var n,r=null,i=y(e.views.values());try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r||Mn(a,t)}}catch(o){i.e(o)}finally{i.f()}return r}var Bn=function e(t){Object(c.a)(this,e),this.listenProvider_=t,this.syncPointTree_=new en(null),this.pendingWriteTree_={visibleWrites:tn.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map};function Wn(e,t,n,r,i){return function(e,t,n,r,i){Object(d.e)(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=nn(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?Yn(e,new Wt({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function Hn(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=function(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(dn(e.pendingWriteTree_,t)){var i=new en(null);return null!=r.snap?i=i.set(je(),!0):G(r.children,function(e){i=i.set(new Se(e),!0)}),Yn(e,new Bt(r.path,i,n))}return[]}function Gn(e,t,n){return Yn(e,new Wt({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function Kn(e,t,n,r){var i=$n(e,r);if(null!=i){var a=Xn(i),o=a.path,u=a.queryId,s=Pe(o,t);return Jn(e,o,new Wt(zt(u),s,n))}return[]}function Qn(e,t,n){var r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,function(e,n){var r=qn(n,Pe(e,t));if(r)return r});return mn(r,t,i,n,!0)}function Yn(e,t){return function e(t,n,r,i){if(Le(t.path))return function e(t,n,r,i){var a=n.get(je());null==r&&null!=a&&(r=qn(a,je()));var o=[];n.children.inorderTraversal(function(n,a){var u=r?r.getImmediateChild(n):null,s=En(i,n),c=t.operationForChild(n);c&&(o=o.concat(e(c,a,u,s)))});a&&(o=o.concat(zn(a,t,i,r)));return o}(t,n,r,i);var a=n.get(je());null==r&&null!=a&&(r=qn(a,je()));var o=[],u=Te(t.path),s=t.operationForChild(u),c=n.children.get(u);if(c&&s){var l=r?r.getImmediateChild(u):null,h=En(i,u);o=o.concat(e(s,c,l,h))}return a&&(o=o.concat(zn(a,t,i,r))),o}(t,e.syncPointTree_,null,fn(e.pendingWriteTree_,je()))}function $n(e,t){return e.tagToQueryMap.get(t)}function Xn(e){var t=e.indexOf("$");return Object(d.e)(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new Se(e.substr(0,t))}}function Jn(e,t,n){var r=e.syncPointTree_.get(t);return Object(d.e)(r,"Missing sync point for query tag that we're tracking"),zn(r,n,fn(e.pendingWriteTree_,t),null)}var Zn=function(){function e(t){Object(c.a)(this,e),this.node_=t}return Object(l.a)(e,[{key:"getImmediateChild",value:function(t){return new e(this.node_.getImmediateChild(t))}},{key:"node",value:function(){return this.node_}}]),e}(),er=function(){function e(t,n){Object(c.a)(this,e),this.syncTree_=t,this.path_=n}return Object(l.a)(e,[{key:"getImmediateChild",value:function(t){var n=De(this.path_,t);return new e(this.syncTree_,n)}},{key:"node",value:function(){return Qn(this.syncTree_,this.path_)}}]),e}(),tr=function(e){return(e=e||{}).timestamp=e.timestamp||(new Date).getTime(),e},nr=function(e,t,n){return e&&"object"===typeof e?(Object(d.e)(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?rr(e[".sv"],t,n):"object"===typeof e[".sv"]?ir(e[".sv"],t):void Object(d.e)(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},rr=function(e,t,n){switch(e){case"timestamp":return n.timestamp;default:Object(d.e)(!1,"Unexpected server value: "+e)}},ir=function(e,t,n){e.hasOwnProperty("increment")||Object(d.e)(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;"number"!==typeof r&&Object(d.e)(!1,"Unexpected increment value: "+r);var i=t.node();if(Object(d.e)(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var a=i.getValue();return"number"!==typeof a?r:a+r},ar=function(e,t,n,r){return ur(t,new er(n,e),r)},or=function(e,t,n){return ur(e,new Zn(t),n)};function ur(e,t,n){var r,i=e.getPriority().val(),a=nr(i,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var o=e,u=nr(o.getValue(),t,n);return u!==o.getValue()||a!==o.getPriority().val()?new ct(u,wt(a)):e}var s=e;return r=s,a!==s.getPriority().val()&&(r=r.updatePriority(new ct(a))),s.forEachChild(ft,function(e,i){var a=ur(i,t.getImmediateChild(e),n);a!==i&&(r=r.updateImmediateChild(e,a))}),r}var sr=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};Object(c.a)(this,e),this.name=t,this.parent=n,this.node=r};function cr(e,t){for(var n=t instanceof Se?t:new Se(t),r=e,i=Te(n);null!==i;){var a=Object(d.L)(r.node.children,i)||{children:{},childCount:0};r=new sr(i,r,a),i=Te(n=Ie(n))}return r}function lr(e){return e.node.value}function hr(e,t){e.node.value=t,vr(e)}function fr(e){return e.node.childCount>0}function dr(e,t){G(e.node.children,function(n,r){t(new sr(n,e,r))})}function pr(e){return new Se(null===e.parent?e.name:pr(e.parent)+"/"+e.name)}function vr(e){null!==e.parent&&function(e,t,n){var r=function(e){return void 0===lr(e)&&!fr(e)}(n),i=Object(d.k)(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,vr(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,vr(e))}(e.parent,e.name,e)}var yr=/[\[\].#$\/\u0000-\u001F\u007F]/,mr=/[\[\].#$\u0000-\u001F\u007F]/,gr=function(e){return"string"===typeof e&&0!==e.length&&!yr.test(e)},br=function(e){return"string"===typeof e&&0!==e.length&&!mr.test(e)},kr=function e(t,n,r){var i=r instanceof Se?new Ue(r,t):r;if(void 0===n)throw new Error(t+"contains undefined "+ze(i));if("function"===typeof n)throw new Error(t+"contains a function "+ze(i)+" with contents = "+n.toString());if(F(n))throw new Error(t+"contains "+n.toString()+" "+ze(i));if("string"===typeof n&&n.length>10485760/3&&Object(d.M)(n)>10485760)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+ze(i)+" ('"+n.substring(0,50)+"...')");if(n&&"object"===typeof n){var a=!1,o=!1;if(G(n,function(n,r){if(".value"===n)a=!0;else if(".priority"!==n&&".sv"!==n&&(o=!0,!gr(n)))throw new Error(t+" contains an invalid key ("+n+") "+ze(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var u,s;s=n,(u=i).parts_.length>0&&(u.byteLength_+=1),u.parts_.push(s),u.byteLength_+=Object(d.M)(s),Ve(u),e(t,r,i),function(e){var t=e.parts_.pop();e.byteLength_-=Object(d.M)(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)}),a&&o)throw new Error(t+' contains ".value" child '+ze(i)+" in addition to actual children.")}},wr=function(e,t){var n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!gr(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),br(e)}(n))throw new Error(Object(d.p)(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},_r=function e(){Object(c.a)(this,e),this.eventLists_=[],this.recursionDepth_=0};function Or(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],a=i.getPath();null===n||Me(a,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:a}),n.events.push(i)}n&&e.eventLists_.push(n)}function Er(e,t,n){Or(e,n),xr(e,function(e){return Fe(e,t)||Fe(t,e)})}function xr(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];if(i)t(i.path)?(Sr(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}n&&(e.eventLists_=[]),e.recursionDepth_--}function Sr(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(null!==n){e.events[t]=null;var r=n.getEventRunner();I&&A("event: "+n.toString()),$(r)}}}var jr="repo_interrupt",Tr=25,Cr=function(){function e(t,n,r,i){Object(c.a)(this,e),this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new _r,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=At(),this.transactionQueueTree_=new sr,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return Object(l.a)(e,[{key:"toString",value:function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}]),e}();function Ir(e,t,n){if(e.stats_=he(e.repoInfo_),e.forceRestClient_||X())e.server_=new Nt(e.repoInfo_,function(t,n,r,i){Ar(e,t,n,r,i)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(function(){return Dr(e,!0)},0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Object(d.O)(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new He(e.repoInfo_,t,function(t,n,r,i){Ar(e,t,n,r,i)},function(t){Dr(e,t)},function(t){!function(e,t){G(t,function(t,n){Lr(e,t,n)})}(e,t)},e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(function(t){e.server_.refreshAuthToken(t)}),e.appCheckProvider_.addTokenChangeListener(function(t){e.server_.refreshAppCheckToken(t.token)}),e.statsReporter_=function(e,t){var n=e.toString();return le[n]||(le[n]=t()),le[n]}(e.repoInfo_,function(){return new Vt(e.stats_,e.server_)}),e.infoData_=new Rt,e.infoSyncTree_=new Bn({startListening:function(t,n,r,i){var a=[],o=e.infoData_.getNode(t._path);return o.isEmpty()||(a=Gn(e.infoSyncTree_,t._path,o),setTimeout(function(){i("ok")},0)),a},stopListening:function(){}}),Lr(e,"connected",!1),e.serverSyncTree_=new Bn({startListening:function(t,n,r,i){return e.server_.listen(t,r,n,function(n,r){var a=i(n,r);Er(e.eventQueue_,t._path,a)}),[]},stopListening:function(t,n){e.server_.unlisten(t,n)}})}function Nr(e){var t=e.infoData_.getNode(new Se(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Rr(e){return tr({timestamp:Nr(e)})}function Ar(e,t,n,r,i){e.dataUpdateCount++;var a=new Se(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var o=[];if(i)if(r){var u=Object(d.I)(n,function(e){return wt(e)});o=function(e,t,n,r){var i=$n(e,r);if(i){var a=Xn(i),o=a.path,u=a.queryId,s=Pe(o,t),c=en.fromObject(n);return Jn(e,o,new Ht(zt(u),s,c))}return[]}(e.serverSyncTree_,a,u,i)}else{var s=wt(n);o=Kn(e.serverSyncTree_,a,s,i)}else if(r){var c=Object(d.I)(n,function(e){return wt(e)});o=function(e,t,n){var r=en.fromObject(n);return Yn(e,new Ht({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,a,c)}else{var l=wt(n);o=Gn(e.serverSyncTree_,a,l)}var h=a;o.length>0&&(h=zr(e,a)),Er(e.eventQueue_,h,o)}function Dr(e,t){Lr(e,"connected",t),!1===t&&function(e){Fr(e,"onDisconnectEvents");var t=Rr(e),n=At();Lt(e.onDisconnect_,je(),function(r,i){var a=ar(r,i,e.serverSyncTree_,t);Dt(n,r,a)});var r=[];Lt(n,je(),function(t,n){r=r.concat(Gn(e.serverSyncTree_,t,n));var i=Hr(e,t);zr(e,i)}),e.onDisconnect_=At(),Er(e.eventQueue_,je(),r)}(e)}function Lr(e,t,n){var r=new Se("/.info/"+t),i=wt(n);e.infoData_.updateSnapshot(r,i);var a=Gn(e.infoSyncTree_,r,i);Er(e.eventQueue_,r,a)}function Pr(e){return e.nextWriteId_++}function Mr(e){e.persistentConnection_&&e.persistentConnection_.interrupt(jr)}function Fr(e){var t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];A.apply(void 0,[t].concat(r))}function Ur(e,t,n){return Qn(e.serverSyncTree_,t,n)||gt.EMPTY_NODE}function Vr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||Wr(e,t),lr(t)){var n=Br(e,t);Object(d.e)(n.length>0,"Sending zero length transaction queue"),n.every(function(e){return 0===e.status})&&function(e,t,n){for(var r=n.map(function(e){return e.currentWriteId}),i=Ur(e,t,r),a=i,o=i.hash(),u=0;u<n.length;u++){var s=n[u];Object(d.e)(0===s.status,"tryToSendTransactionQueue_: items in queue should all be run."),s.status=1,s.retryCount++;var c=Pe(t,s.path);a=a.updateChild(c,s.currentOutputSnapshotRaw)}var l=a.val(!0),h=t;e.server_.put(h.toString(),l,function(r){Fr(e,"transaction put response",{path:h.toString(),status:r});var i=[];if("ok"===r){for(var a=[],o=function(t){n[t].status=2,i=i.concat(Hn(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&a.push(function(){return n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)}),n[t].unwatcher()},u=0;u<n.length;u++)o(u);Wr(e,cr(e.transactionQueueTree_,t)),Vr(e,e.transactionQueueTree_),Er(e.eventQueue_,t,i);for(var s=0;s<a.length;s++)$(a[s])}else{if("datastale"===r)for(var c=0;c<n.length;c++)3===n[c].status?n[c].status=4:n[c].status=0;else{M("transaction at "+h.toString()+" failed: "+r);for(var l=0;l<n.length;l++)n[l].status=4,n[l].abortReason=r}zr(e,t)}},o)}(e,pr(t),n)}else fr(t)&&dr(t,function(t){Vr(e,t)})}function zr(e,t){var n=qr(e,t),r=pr(n);return function(e,t,n){if(0===t.length)return;for(var r=[],i=[],a=t.filter(function(e){return 0===e.status}).map(function(e){return e.currentWriteId}),o=function(o){var u,s=t[o],c=Pe(n,s.path),l=!1,h=void 0;if(Object(d.e)(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===s.status)l=!0,h=s.abortReason,i=i.concat(Hn(e.serverSyncTree_,s.currentWriteId,!0));else if(0===s.status)if(s.retryCount>=Tr)l=!0,h="maxretry",i=i.concat(Hn(e.serverSyncTree_,s.currentWriteId,!0));else{var f=Ur(e,s.path,a);s.currentInputSnapshot=f;var p=t[o].update(f.val());if(void 0!==p){kr("transaction failed: Data returned ",p,s.path);var v=wt(p),y="object"===typeof p&&null!=p&&Object(d.k)(p,".priority");y||(v=v.updatePriority(f.getPriority()));var m=s.currentWriteId,g=Rr(e),b=or(v,f,g);s.currentOutputSnapshotRaw=v,s.currentOutputSnapshotResolved=b,s.currentWriteId=Pr(e),a.splice(a.indexOf(m),1),i=(i=i.concat(Wn(e.serverSyncTree_,s.path,b,s.currentWriteId,s.applyLocally))).concat(Hn(e.serverSyncTree_,m,!0))}else l=!0,h="nodata",i=i.concat(Hn(e.serverSyncTree_,s.currentWriteId,!0))}Er(e.eventQueue_,n,i),i=[],l&&(t[o].status=2,u=t[o].unwatcher,setTimeout(u,Math.floor(0)),t[o].onComplete&&("nodata"===h?r.push(function(){return t[o].onComplete(null,!1,t[o].currentInputSnapshot)}):r.push(function(){return t[o].onComplete(new Error(h),!1,null)})))},u=0;u<t.length;u++)o(u);Wr(e,e.transactionQueueTree_);for(var s=0;s<r.length;s++)$(r[s]);Vr(e,e.transactionQueueTree_)}(e,Br(e,n),r),r}function qr(e,t){var n,r=e.transactionQueueTree_;for(n=Te(t);null!==n&&void 0===lr(r);)r=cr(r,n),n=Te(t=Ie(t));return r}function Br(e,t){var n=[];return function e(t,n,r){var i=lr(n);if(i)for(var a=0;a<i.length;a++)r.push(i[a]);dr(n,function(n){e(t,n,r)})}(e,t,n),n.sort(function(e,t){return e.order-t.order}),n}function Wr(e,t){var n=lr(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,hr(t,n.length>0?n:void 0)}dr(t,function(t){Wr(e,t)})}function Hr(e,t){var n=pr(qr(e,t)),r=cr(e.transactionQueueTree_,t);return function(e,t,n){for(var r=n?e:e.parent;null!==r;){if(t(r))return!0;r=r.parent}}(r,function(t){Gr(e,t)}),Gr(e,r),function e(t,n,r,i){r&&!i&&n(t),dr(t,function(t){e(t,n,!0,i)}),r&&i&&n(t)}(r,function(t){Gr(e,t)}),n}function Gr(e,t){var n=lr(t);if(n){for(var r=[],i=[],a=-1,o=0;o<n.length;o++)3===n[o].status||(1===n[o].status?(Object(d.e)(a===o-1,"All SENT items should be at beginning of queue."),a=o,n[o].status=3,n[o].abortReason="set"):(Object(d.e)(0===n[o].status,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(Hn(e.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));-1===a?hr(t,void 0):n.length=a+1,Er(e.eventQueue_,pr(t),i);for(var u=0;u<r.length;u++)$(r[u])}}var Kr=function(e,t){var n=Qr(e),r=n.namespace;"firebase.com"===n.domain&&P(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||P("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&M("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new oe(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new Se(n.pathString)}},Qr=function(e){var t="",n="",r="",i="",a="",o=!0,u="https",s=443;if("string"===typeof e){var c=e.indexOf("//");c>=0&&(u=e.substring(0,c-1),e=e.substring(c+2));var l=e.indexOf("/");-1===l&&(l=e.length);var h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(l,h)),l<h&&(i=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}t+="/"+i}return t}(e.substring(l,h)));var f=function(e){var t={};"?"===e.charAt(0)&&(e=e.substring(1));var n,r=y(e.split("&"));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(0!==i.length){var a=i.split("=");2===a.length?t[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):M("Invalid query segment '".concat(i,"' in query '").concat(e,"'"))}}}catch(o){r.e(o)}finally{r.f()}return t}(e.substring(Math.min(e.length,h)));(c=t.indexOf(":"))>=0?(o="https"===u||"wss"===u,s=parseInt(t.substring(c+1),10)):c=t.length;var d=t.slice(0,c);if("localhost"===d.toLowerCase())n="localhost";else if(d.split(".").length<=2)n=d;else{var p=t.indexOf(".");r=t.substring(0,p).toLowerCase(),n=t.substring(p+1),a=r}"ns"in f&&(a=f.ns)}return{host:t,port:s,domain:n,subdomain:r,secure:o,scheme:u,pathString:i,namespace:a}},Yr="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",$r=(function(){var e=0,t=[]}(),function(){function e(t,n,r,i){Object(c.a)(this,e),this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}return Object(l.a)(e,[{key:"isEqual",value:function(t){if(!((t=Object(d.v)(t))instanceof e))return!1;var n=this._repo===t._repo,r=Me(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}},{key:"toJSON",value:function(){return this.toString()}},{key:"toString",value:function(){return this._repo.toString()+function(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}},{key:"key",get:function(){return Le(this._path)?null:Ne(this._path)}},{key:"ref",get:function(){return new Xr(this._repo,this._path)}},{key:"_queryIdentifier",get:function(){var e=It(this._queryParams),t=W(e);return"{}"===t?"default":t}},{key:"_queryObject",get:function(){return It(this._queryParams)}}]),e}());var Xr=function(e){function t(e,n){return Object(c.a)(this,t),Object(a.a)(this,Object(o.a)(t).call(this,e,n,new Tt,!1))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"parent",get:function(){var e=Ae(this._path);return null===e?null:new t(this._repo,e)}},{key:"root",get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}}]),t}($r);!function(e){Object(d.e)(!Pn,"__referenceConstructor has already been defined"),Pn=e}(Xr),function(e){Object(d.e)(!Vn,"__referenceConstructor has already been defined"),Vn=e}(Xr);var Jr="FIREBASE_DATABASE_EMULATOR_HOST",Zr={},ei=!1;function ti(t,n,r,i,a){var o=i||t.options.databaseURL;void 0===o&&(t.options.projectId||P("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),A("Using default host for project ",t.options.projectId),o="".concat(t.options.projectId,"-default-rtdb.firebaseio.com"));var u,s=Kr(o,a),c=s.repoInfo,l=void 0;"undefined"!==typeof e&&Object({NODE_ENV:"production",PUBLIC_URL:"/base-management"})&&(l=Object({NODE_ENV:"production",PUBLIC_URL:"/base-management"})[Jr]),l?(u=!0,o="http://".concat(l,"?ns=").concat(c.namespace),c=(s=Kr(o,a)).repoInfo):u=!s.repoInfo.secure;var h=a&&u?new te(te.OWNER):new ee(t.name,t.options,n);wr("Invalid Firebase Database URL",s),Le(s.path)||P("Database URL must point to the root of a Firebase Database (not including a child path).");var f=function(e,t,n,r){var i=Zr[t.name];i||(i={},Zr[t.name]=i);var a=i[e.toURLString()];a&&P("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return a=new Cr(e,ei,n,r),i[e.toURLString()]=a,a}(c,t,h,new Z(t.name,r));return new ni(f,t)}var ni=function(){function e(t,n){Object(c.a)(this,e),this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}return Object(l.a)(e,[{key:"_delete",value:function(){return null!==this._rootInternal&&(!function(e,t){var n=Zr[t];n&&n[e.key]===e||P("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),Mr(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}},{key:"_checkNotDeleted",value:function(e){null===this._rootInternal&&P("Cannot call "+e+" on a deleted database.")}},{key:"_repo",get:function(){return this._instanceStarted||(Ir(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}},{key:"_root",get:function(){return this._rootInternal||(this._rootInternal=new Xr(this._repo,je())),this._rootInternal}}]),e}();He.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},He.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};var ri;!function(e){k=e}(h.a),Object(h.c)(new f.a("database",function(e,t){var n=t.instanceIdentifier;return ti(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)},"PUBLIC").setMultipleInstances(!0)),Object(h.g)(g,b,ri),Object(h.g)(g,b,"esm2017")}).call(this,n(25))},function(e,t,n){"use strict";var r=n(39);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},function(e,t,n){"use strict";var r=n(14);n.d(t,"a",function(){return r.f});Object(r.g)("firebase","9.15.0","app")},,,function(e,t,n){"use strict";var r=Symbol.for("react.element"),i=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),c=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.iterator;var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,m={};function g(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||v}function b(){}function k(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||v}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=g.prototype;var w=k.prototype=new b;w.constructor=k,y(w,g.prototype),w.isPureReactComponent=!0;var _=Array.isArray,O=Object.prototype.hasOwnProperty,E={current:null},x={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,n){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)O.call(t,i)&&!x.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=n;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:r,type:e,key:o,ref:u,props:a,_owner:E.current}}function j(e){return"object"===typeof e&&null!==e&&e.$$typeof===r}var T=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function I(e,t,n,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case r:case i:s=!0}}if(s)return o=o(s=e),e=""===a?"."+C(s,0):a,_(o)?(n="",null!=e&&(n=e.replace(T,"$&/")+"/"),I(o,t,n,"",function(e){return e})):null!=o&&(j(o)&&(o=function(e,t){return{$$typeof:r,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,n+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",_(e))for(var c=0;c<e.length;c++){var l=a+C(u=e[c],c);s+=I(u,t,n,l,o)}else if("function"===typeof(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e)))for(e=l.call(e),c=0;!(u=e.next()).done;)s+=I(u=u.value,t,n,l=a+C(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function N(e,t,n){if(null==e)return e;var r=[],i=0;return I(e,r,"","",function(e){return t.call(n,e,i++)}),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var A={current:null},D={transition:null},L={ReactCurrentDispatcher:A,ReactCurrentBatchConfig:D,ReactCurrentOwner:E};t.Children={map:N,forEach:function(e,t,n){N(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return N(e,function(){t++}),t},toArray:function(e){return N(e,function(e){return e})||[]},only:function(e){if(!j(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=g,t.Fragment=a,t.Profiler=u,t.PureComponent=k,t.StrictMode=o,t.Suspense=h,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=y({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=E.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)O.call(t,c)&&!x.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=n;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:r,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:c,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=j,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return A.current.useCallback(e,t)},t.useContext=function(e){return A.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return A.current.useDeferredValue(e)},t.useEffect=function(e,t){return A.current.useEffect(e,t)},t.useId=function(){return A.current.useId()},t.useImperativeHandle=function(e,t,n){return A.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return A.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return A.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return A.current.useMemo(e,t)},t.useReducer=function(e,t,n){return A.current.useReducer(e,t,n)},t.useRef=function(e){return A.current.useRef(e)},t.useState=function(e){return A.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return A.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return A.current.useTransition()},t.version="18.2.0"},function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(40)},function(e,t,n){"use strict";var r=n(3),i=n(41);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){y[e]=new v(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];y[t]=new v(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){y[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){y[e]=new v(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){y[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){y[e]=new v(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){y[e]=new v(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){y[e]=new v(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){y[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)});var m=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(d,e)&&(f.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)}),y.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)});var k=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),_=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),j=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var A=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var P,M=Object.assign;function F(e){if(void 0===P)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);P=t&&t[1]||""}return"\n"+P+e}var U=!1;function V(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function z(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return function e(t){if(null==t)return null;if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t;switch(t){case O:return"Fragment";case _:return"Portal";case x:return"Profiler";case E:return"StrictMode";case C:return"Suspense";case I:return"SuspenseList"}if("object"===typeof t)switch(t.$$typeof){case j:return(t.displayName||"Context")+".Consumer";case S:return(t._context.displayName||"Context")+".Provider";case T:var n=t.render;return(t=t.displayName)||(t=""!==(t=n.displayName||n.name||"")?"ForwardRef("+t+")":"ForwardRef"),t;case N:return null!==(n=t.displayName||null)?n:e(t.type)||"Memo";case R:n=t._payload,t=t._init;try{return e(t(n))}catch(r){}}return null}(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function B(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function K(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=B(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function X(e,t){$(e,t);var n=B(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?Z(e,t.type,n):t.hasOwnProperty("defaultValue")&&Z(e,t.type,B(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function J(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function Z(e,t,n){"number"===t&&K(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var ee=Array.isArray;function te(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+B(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function ne(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function re(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(ee(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:B(n)}}function ie(e,t){var n=B(t.value),r=B(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ue(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var se,ce,le=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((se=se||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=se.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ce(e,t)})}:ce);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},de=["Webkit","ms","Moz","O"];function pe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ve(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=pe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach(function(e){de.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]})});var ye=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function me(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ge(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function ke(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,_e=null,Oe=null;function Ee(e){if(e=fi(e)){if("function"!==typeof we)throw Error(a(280));var t=e.stateNode;t&&(t=pi(t),we(e.stateNode,e.type,t))}}function xe(e){_e?Oe?Oe.push(e):Oe=[e]:_e=e}function Se(){if(_e){var e=_e,t=Oe;if(Oe=_e=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function je(e,t){return e(t)}function Te(){}var Ce=!1;function Ie(e,t,n){if(Ce)return e(t,n);Ce=!0;try{return je(e,t,n)}finally{Ce=!1,(null!==_e||null!==Oe)&&(Te(),Se())}}function Ne(e,t){var n=e.stateNode;if(null===n)return null;var r=pi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Re=!1;if(l)try{var Ae={};Object.defineProperty(Ae,"passive",{get:function(){Re=!0}}),window.addEventListener("test",Ae,Ae),window.removeEventListener("test",Ae,Ae)}catch(ce){Re=!1}var De=!1,Le=null,Pe=!1,Me=null,Fe={onError:function(e){De=!0,Le=e}};function Ue(e,t,n,r,i,a,o,u,s){De=!1,Le=null,function(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}.apply(Fe,arguments)}function Ve(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function ze(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function qe(e){if(Ve(e)!==e)throw Error(a(188))}function Be(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ve(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return qe(i),e;if(o===r)return qe(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?function e(t){if(5===t.tag||6===t.tag)return t;for(t=t.child;null!==t;){var n=e(t);if(null!==n)return n;t=t.sibling}return null}(e):null}var We=i.unstable_scheduleCallback,He=i.unstable_cancelCallback,Ge=i.unstable_shouldYield,Ke=i.unstable_requestPaint,Qe=i.unstable_now,Ye=i.unstable_getCurrentPriorityLevel,$e=i.unstable_ImmediatePriority,Xe=i.unstable_UserBlockingPriority,Je=i.unstable_NormalPriority,Ze=i.unstable_LowPriority,et=i.unstable_IdlePriority,tt=null,nt=null;var rt=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(it(e)/at|0)|0},it=Math.log,at=Math.LN2;var ot=64,ut=4194304;function st(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ct(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=st(u):0!==(a&=o)&&(r=st(a))}else 0!==(o=n&~i)?r=st(o):0!==a&&(r=st(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-rt(t)),r|=e[n],t&=~i;return r}function lt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:default:return-1}}function ht(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function ft(){var e=ot;return 0===(4194240&(ot<<=1))&&(ot=64),e}function dt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function pt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-rt(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-rt(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var yt=0;function mt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var gt,bt,kt,wt,_t,Ot=!1,Et=[],xt=null,St=null,jt=null,Tt=new Map,Ct=new Map,It=[],Nt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Rt(e,t){switch(e){case"focusin":case"focusout":xt=null;break;case"dragenter":case"dragleave":St=null;break;case"mouseover":case"mouseout":jt=null;break;case"pointerover":case"pointerout":Tt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ct.delete(t.pointerId)}}function At(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=fi(t))&&bt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Dt(e){var t=hi(e.target);if(null!==t){var n=Ve(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=ze(n)))return e.blockedOn=t,void _t(e.priority,function(){kt(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Lt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Gt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=fi(n))&&bt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Pt(e,t,n){Lt(e)&&n.delete(t)}function Mt(){Ot=!1,null!==xt&&Lt(xt)&&(xt=null),null!==St&&Lt(St)&&(St=null),null!==jt&&Lt(jt)&&(jt=null),Tt.forEach(Pt),Ct.forEach(Pt)}function Ft(e,t){e.blockedOn===t&&(e.blockedOn=null,Ot||(Ot=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Mt)))}function Ut(e){function t(t){return Ft(t,e)}if(0<Et.length){Ft(Et[0],e);for(var n=1;n<Et.length;n++){var r=Et[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==xt&&Ft(xt,e),null!==St&&Ft(St,e),null!==jt&&Ft(jt,e),Tt.forEach(t),Ct.forEach(t),n=0;n<It.length;n++)(r=It[n]).blockedOn===e&&(r.blockedOn=null);for(;0<It.length&&null===(n=It[0]).blockedOn;)Dt(n),null===n.blockedOn&&It.shift()}var Vt=k.ReactCurrentBatchConfig,zt=!0;function qt(e,t,n,r){var i=yt,a=Vt.transition;Vt.transition=null;try{yt=1,Wt(e,t,n,r)}finally{yt=i,Vt.transition=a}}function Bt(e,t,n,r){var i=yt,a=Vt.transition;Vt.transition=null;try{yt=4,Wt(e,t,n,r)}finally{yt=i,Vt.transition=a}}function Wt(e,t,n,r){if(zt){var i=Gt(e,t,n,r);if(null===i)Mr(e,t,r,Ht,n),Rt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return xt=At(xt,e,t,n,r,i),!0;case"dragenter":return St=At(St,e,t,n,r,i),!0;case"mouseover":return jt=At(jt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Tt.set(a,At(Tt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Ct.set(a,At(Ct.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Rt(e,r),4&t&&-1<Nt.indexOf(e)){for(;null!==i;){var a=fi(i);if(null!==a&&gt(a),null===(a=Gt(e,t,n,r))&&Mr(e,t,r,Ht,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Mr(e,t,r,null,n)}}var Ht=null;function Gt(e,t,n,r){if(Ht=null,null!==(e=hi(e=ke(r))))if(null===(t=Ve(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=ze(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ht=e,null}function Kt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ye()){case $e:return 1;case Xe:return 4;case Je:case Ze:return 16;case et:return 536870912;default:return 16}default:return 16}}var Qt=null,Yt=null,$t=null;function Xt(){if($t)return $t;var e,t,n=Yt,r=n.length,i="value"in Qt?Qt.value:Qt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return $t=i.slice(e,1<t?1-t:void 0)}function Jt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Zt(){return!0}function en(){return!1}function tn(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?Zt:en,this.isPropagationStopped=en,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Zt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Zt)},persist:function(){},isPersistent:Zt}),t}var nn,rn,an,on={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=tn(on),sn=M({},on,{view:0,detail:0}),cn=tn(sn),ln=M({},sn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==an&&(an&&"mousemove"===e.type?(nn=e.screenX-an.screenX,rn=e.screenY-an.screenY):rn=nn=0,an=e),nn)},movementY:function(e){return"movementY"in e?e.movementY:rn}}),hn=tn(ln),fn=tn(M({},ln,{dataTransfer:0})),dn=tn(M({},sn,{relatedTarget:0})),pn=tn(M({},on,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=tn(M({},on,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),yn=tn(M({},on,{data:0})),mn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=bn[e])&&!!t[e]}function wn(){return kn}var _n=tn(M({},sn,{key:function(e){if(e.key){var t=mn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Jt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?gn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wn,charCode:function(e){return"keypress"===e.type?Jt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Jt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),On=tn(M({},ln,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),En=tn(M({},sn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wn})),xn=tn(M({},on,{propertyName:0,elapsedTime:0,pseudoElement:0})),Sn=tn(M({},ln,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),jn=[9,13,27,32],Tn=l&&"CompositionEvent"in window,Cn=null;l&&"documentMode"in document&&(Cn=document.documentMode);var In=l&&"TextEvent"in window&&!Cn,Nn=l&&(!Tn||Cn&&8<Cn&&11>=Cn),Rn=String.fromCharCode(32),An=!1;function Dn(e,t){switch(e){case"keyup":return-1!==jn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ln(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Pn=!1;var Mn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Mn[e.type]:"textarea"===t}function Un(e,t,n,r){xe(r),0<(t=Ur(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Vn=null,zn=null;function qn(e){Nr(e,0)}function Bn(e){if(G(di(e)))return e}function Wn(e,t){if("change"===e)return t}var Hn=!1;if(l){var Gn;if(l){var Kn="oninput"in document;if(!Kn){var Qn=document.createElement("div");Qn.setAttribute("oninput","return;"),Kn="function"===typeof Qn.oninput}Gn=Kn}else Gn=!1;Hn=Gn&&(!document.documentMode||9<document.documentMode)}function Yn(){Vn&&(Vn.detachEvent("onpropertychange",$n),zn=Vn=null)}function $n(e){if("value"===e.propertyName&&Bn(zn)){var t=[];Un(t,zn,e,ke(e)),Ie(qn,t)}}function Xn(e,t,n){"focusin"===e?(Yn(),zn=n,(Vn=t).attachEvent("onpropertychange",$n)):"focusout"===e&&Yn()}function Jn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Bn(zn)}function Zn(e,t){if("click"===e)return Bn(t)}function er(e,t){if("input"===e||"change"===e)return Bn(t)}var tr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function nr(e,t){if(tr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!tr(e[i],t[i]))return!1}return!0}function rr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ir(e,t){var n,r=rr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=rr(r)}}function ar(){for(var e=window,t=K();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=K((e=t.contentWindow).document)}return t}function or(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function ur(e){var t=ar(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&function e(t,n){return!(!t||!n)&&(t===n||(!t||3!==t.nodeType)&&(n&&3===n.nodeType?e(t,n.parentNode):"contains"in t?t.contains(n):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(n))))}(n.ownerDocument.documentElement,n)){if(null!==r&&or(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=ir(n,a);var o=ir(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var sr=l&&"documentMode"in document&&11>=document.documentMode,cr=null,lr=null,hr=null,fr=!1;function dr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;fr||null==cr||cr!==K(r)||("selectionStart"in(r=cr)&&or(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},hr&&nr(hr,r)||(hr=r,0<(r=Ur(lr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=cr)))}function pr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var vr={animationend:pr("Animation","AnimationEnd"),animationiteration:pr("Animation","AnimationIteration"),animationstart:pr("Animation","AnimationStart"),transitionend:pr("Transition","TransitionEnd")},yr={},mr={};function gr(e){if(yr[e])return yr[e];if(!vr[e])return e;var t,n=vr[e];for(t in n)if(n.hasOwnProperty(t)&&t in mr)return yr[e]=n[t];return e}l&&(mr=document.createElement("div").style,"AnimationEvent"in window||(delete vr.animationend.animation,delete vr.animationiteration.animation,delete vr.animationstart.animation),"TransitionEvent"in window||delete vr.transitionend.transition);var br=gr("animationend"),kr=gr("animationiteration"),wr=gr("animationstart"),_r=gr("transitionend"),Or=new Map,Er="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xr(e,t){Or.set(e,t),s(t,[e])}for(var Sr=0;Sr<Er.length;Sr++){var jr=Er[Sr];xr(jr.toLowerCase(),"on"+(jr[0].toUpperCase()+jr.slice(1)))}xr(br,"onAnimationEnd"),xr(kr,"onAnimationIteration"),xr(wr,"onAnimationStart"),xr("dblclick","onDoubleClick"),xr("focusin","onFocus"),xr("focusout","onBlur"),xr(_r,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Cr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Tr));function Ir(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(Ue.apply(this,arguments),De){if(!De)throw Error(a(198));var l=Le;De=!1,Le=null,Pe||(Pe=!0,Me=l)}}(r,t,void 0,e),e.currentTarget=null}function Nr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Ir(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Ir(i,u,c),a=s}}}if(Pe)throw e=Me,Pe=!1,Me=null,e}function Rr(e,t){var n=t[si];void 0===n&&(n=t[si]=new Set);var r=e+"__bubble";n.has(r)||(Pr(t,e,2,!1),n.add(r))}function Ar(e,t,n){var r=0;t&&(r|=4),Pr(n,e,r,t)}var Dr="_reactListening"+Math.random().toString(36).slice(2);function Lr(e){if(!e[Dr]){e[Dr]=!0,o.forEach(function(t){"selectionchange"!==t&&(Cr.has(t)||Ar(t,!1,e),Ar(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Dr]||(t[Dr]=!0,Ar("selectionchange",!1,t))}}function Pr(e,t,n,r){switch(Kt(t)){case 1:var i=qt;break;case 4:i=Bt;break;default:i=Wt}n=i.bind(null,t,n,e),i=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Mr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=hi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}Ie(function(){var r=a,i=ke(n),o=[];e:{var u=Or.get(e);if(void 0!==u){var s=un,c=e;switch(e){case"keypress":if(0===Jt(n))break e;case"keydown":case"keyup":s=_n;break;case"focusin":c="focus",s=dn;break;case"focusout":c="blur",s=dn;break;case"beforeblur":case"afterblur":s=dn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=hn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=fn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=En;break;case br:case kr:case wr:s=pn;break;case _r:s=xn;break;case"scroll":s=cn;break;case"wheel":s=Sn;break;case"copy":case"cut":case"paste":s=vn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=On}var l=0!==(4&t),h=!l&&"scroll"===e,f=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==f&&(null!=(v=Ne(p,f))&&l.push(Fr(p,v,d)))),h)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!hi(c)&&!c[ui])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?hi(c):null)&&(c!==(h=Ve(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=hn,v="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=On,v="onPointerLeave",f="onPointerEnter",p="pointer"),h=null==s?u:di(s),d=null==c?u:di(c),(u=new l(v,p+"leave",s,n,i)).target=h,u.relatedTarget=d,v=null,hi(i)===r&&((l=new l(f,p+"enter",c,n,i)).target=d,l.relatedTarget=h,v=l),h=v,s&&c)e:{for(f=c,p=0,d=l=s;d;d=Vr(d))p++;for(d=0,v=f;v;v=Vr(v))d++;for(;0<p-d;)l=Vr(l),p--;for(;0<d-p;)f=Vr(f),d--;for(;p--;){if(l===f||null!==f&&l===f.alternate)break e;l=Vr(l),f=Vr(f)}l=null}else l=null;null!==s&&zr(o,u,s,l,!1),null!==c&&null!==h&&zr(o,h,c,l,!0)}if("select"===(s=(u=r?di(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var y=Wn;else if(Fn(u))if(Hn)y=er;else{y=Jn;var m=Xn}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(y=Zn);switch(y&&(y=y(e,r))?Un(o,y,n,i):(m&&m(e,u,r),"focusout"===e&&(m=u._wrapperState)&&m.controlled&&"number"===u.type&&Z(u,"number",u.value)),m=r?di(r):window,e){case"focusin":(Fn(m)||"true"===m.contentEditable)&&(cr=m,lr=r,hr=null);break;case"focusout":hr=lr=cr=null;break;case"mousedown":fr=!0;break;case"contextmenu":case"mouseup":case"dragend":fr=!1,dr(o,n,i);break;case"selectionchange":if(sr)break;case"keydown":case"keyup":dr(o,n,i)}var g;if(Tn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Pn?Dn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Nn&&"ko"!==n.locale&&(Pn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Pn&&(g=Xt()):(Yt="value"in(Qt=i)?Qt.value:Qt.textContent,Pn=!0)),0<(m=Ur(r,b)).length&&(b=new yn(b,e,null,n,i),o.push({event:b,listeners:m}),g?b.data=g:null!==(g=Ln(n))&&(b.data=g))),(g=In?function(e,t){switch(e){case"compositionend":return Ln(t);case"keypress":return 32!==t.which?null:(An=!0,Rn);case"textInput":return(e=t.data)===Rn&&An?null:e;default:return null}}(e,n):function(e,t){if(Pn)return"compositionend"===e||!Tn&&Dn(e,t)?(e=Xt(),$t=Yt=Qt=null,Pn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Nn&&"ko"!==t.locale?null:t.data;default:return null}}(e,n))&&(0<(r=Ur(r,"onBeforeInput")).length&&(i=new yn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Nr(o,t)})}function Fr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ur(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Ne(e,n))&&r.unshift(Fr(e,a,i)),null!=(a=Ne(e,t))&&r.push(Fr(e,a,i))),e=e.return}return r}function Vr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function zr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Ne(n,a))&&o.unshift(Fr(n,s,u)):i||null!=(s=Ne(n,a))&&o.push(Fr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var qr=/\r\n?/g,Br=/\u0000|\uFFFD/g;function Wr(e){return("string"===typeof e?e:""+e).replace(qr,"\n").replace(Br,"")}function Hr(e,t,n){if(t=Wr(t),Wr(e)!==t&&n)throw Error(a(425))}function Gr(){}var Kr=null,Qr=null;function Yr(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var $r="function"===typeof setTimeout?setTimeout:void 0,Xr="function"===typeof clearTimeout?clearTimeout:void 0,Jr="function"===typeof Promise?Promise:void 0,Zr="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof Jr?function(e){return Jr.resolve(null).then(e).catch(ei)}:$r;function ei(e){setTimeout(function(){throw e})}function ti(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Ut(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Ut(t)}function ni(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ri(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var ii=Math.random().toString(36).slice(2),ai="__reactFiber$"+ii,oi="__reactProps$"+ii,ui="__reactContainer$"+ii,si="__reactEvents$"+ii,ci="__reactListeners$"+ii,li="__reactHandles$"+ii;function hi(e){var t=e[ai];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ui]||n[ai]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ri(e);null!==e;){if(n=e[ai])return n;e=ri(e)}return t}n=(e=n).parentNode}return null}function fi(e){return!(e=e[ai]||e[ui])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function di(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function pi(e){return e[oi]||null}var vi=[],yi=-1;function mi(e){return{current:e}}function gi(e){0>yi||(e.current=vi[yi],vi[yi]=null,yi--)}function bi(e,t){vi[++yi]=e.current,e.current=t}var ki={},wi=mi(ki),_i=mi(!1),Oi=ki;function Ei(e,t){var n=e.type.contextTypes;if(!n)return ki;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function xi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Si(){gi(_i),gi(wi)}function ji(e,t,n){if(wi.current!==ki)throw Error(a(168));bi(wi,t),bi(_i,n)}function Ti(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,q(e)||"Unknown",i));return M({},n,r)}function Ci(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ki,Oi=wi.current,bi(wi,e),bi(_i,_i.current),!0}function Ii(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Ti(e,t,Oi),r.__reactInternalMemoizedMergedChildContext=e,gi(_i),gi(wi),bi(wi,e)):gi(_i),bi(_i,n)}var Ni=null,Ri=!1,Ai=!1;function Di(e){null===Ni?Ni=[e]:Ni.push(e)}function Li(){if(!Ai&&null!==Ni){Ai=!0;var e=0,t=yt;try{var n=Ni;for(yt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ni=null,Ri=!1}catch(i){throw null!==Ni&&(Ni=Ni.slice(e+1)),We($e,Li),i}finally{yt=t,Ai=!1}}return null}var Pi=[],Mi=0,Fi=null,Ui=0,Vi=[],zi=0,qi=null,Bi=1,Wi="";function Hi(e,t){Pi[Mi++]=Ui,Pi[Mi++]=Fi,Fi=e,Ui=t}function Gi(e,t,n){Vi[zi++]=Bi,Vi[zi++]=Wi,Vi[zi++]=qi,qi=e;var r=Bi;e=Wi;var i=32-rt(r)-1;r&=~(1<<i),n+=1;var a=32-rt(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Bi=1<<32-rt(t)+i|n<<i|r,Wi=a+e}else Bi=1<<a|n<<i|r,Wi=e}function Ki(e){null!==e.return&&(Hi(e,1),Gi(e,1,0))}function Qi(e){for(;e===Fi;)Fi=Pi[--Mi],Pi[Mi]=null,Ui=Pi[--Mi],Pi[Mi]=null;for(;e===qi;)qi=Vi[--zi],Vi[zi]=null,Wi=Vi[--zi],Vi[zi]=null,Bi=Vi[--zi],Vi[zi]=null}var Yi=null,$i=null,Xi=!1,Ji=null;function Zi(e,t){var n=vc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ea(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,Yi=e,$i=ni(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,Yi=e,$i=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==qi?{id:Bi,overflow:Wi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=vc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,Yi=e,$i=null,!0);default:return!1}}function ta(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function na(e){if(Xi){var t=$i;if(t){var n=t;if(!ea(e,t)){if(ta(e))throw Error(a(418));t=ni(n.nextSibling);var r=Yi;t&&ea(e,t)?Zi(r,n):(e.flags=-4097&e.flags|2,Xi=!1,Yi=e)}}else{if(ta(e))throw Error(a(418));e.flags=-4097&e.flags|2,Xi=!1,Yi=e}}}function ra(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Yi=e}function ia(e){if(e!==Yi)return!1;if(!Xi)return ra(e),Xi=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!Yr(e.type,e.memoizedProps)),t&&(t=$i)){if(ta(e))throw aa(),Error(a(418));for(;t;)Zi(e,t),t=ni(t.nextSibling)}if(ra(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){$i=ni(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}$i=null}}else $i=Yi?ni(e.stateNode.nextSibling):null;return!0}function aa(){for(var e=$i;e;)e=ni(e.nextSibling)}function oa(){$i=Yi=null,Xi=!1}function ua(e){null===Ji?Ji=[e]:Ji.push(e)}var sa=k.ReactCurrentBatchConfig;function ca(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var la=mi(null),ha=null,fa=null,da=null;function pa(){da=fa=ha=null}function va(e){var t=la.current;gi(la),e._currentValue=t}function ya(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ma(e,t){ha=e,da=fa=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(lu=!0),e.firstContext=null)}function ga(e){var t=e._currentValue;if(da!==e)if(e={context:e,memoizedValue:t,next:null},null===fa){if(null===ha)throw Error(a(308));fa=e,ha.dependencies={lanes:0,firstContext:e}}else fa=fa.next=e;return t}var ba=null;function ka(e){null===ba?ba=[e]:ba.push(e)}function wa(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,ka(t)):(n.next=i.next,i.next=n),t.interleaved=n,_a(e,r)}function _a(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Oa=!1;function Ea(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Sa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ja(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&ys)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,_a(e,n)}return null===(i=r.interleaved)?(t.next=t,ka(r)):(t.next=i.next,i.next=t),r.interleaved=t,_a(e,n)}function Ta(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Ca(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ia(e,t,n,r){var i=e.updateQueue;Oa=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var h=i.baseState;for(o=0,l=c=s=null,u=a;;){var f=u.lane,d=u.eventTime;if((r&f)===f){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var p=e,v=u;switch(f=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){h=p.call(d,h,f);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(f="function"===typeof(p=v.payload)?p.call(d,h,f):p)||void 0===f)break e;h=M({},h,f);break e;case 2:Oa=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(f=i.effects)?i.effects=[u]:f.push(u))}else d={eventTime:d,lane:f,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=h):l=l.next=d,o|=f;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(f=u).next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}if(null===l&&(s=h),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Es|=o,e.lanes=o,e.memoizedState=h}}function Na(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Ra=(new r.Component).refs;function Aa(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Da={isMounted:function(e){return!!(e=e._reactInternals)&&Ve(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=qs(),i=Bs(e),a=Sa(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=ja(e,a,i))&&(Ws(t,e,i,r),Ta(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=qs(),i=Bs(e),a=Sa(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=ja(e,a,i))&&(Ws(t,e,i,r),Ta(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=qs(),r=Bs(e),i=Sa(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=ja(e,i,r))&&(Ws(t,e,r,n),Ta(t,e,r))}};function La(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!nr(n,r)||!nr(i,a))}function Pa(e,t,n){var r=!1,i=ki,a=t.contextType;return"object"===typeof a&&null!==a?a=ga(a):(i=xi(t)?Oi:wi.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ei(e,i):ki),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Da,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ma(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Da.enqueueReplaceState(t,t.state,null)}function Fa(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Ra,Ea(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=ga(a):(a=xi(t)?Oi:wi.current,i.context=Ei(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Aa(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Da.enqueueReplaceState(i,i.state,null),Ia(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ua(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:((t=function(e){var t=i.refs;t===Ra&&(t=i.refs={}),null===e?delete t[o]:t[o]=e})._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Va(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function za(e){return(0,e._init)(e._payload)}function qa(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=mc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=wc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===O?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===R&&za(a)===t.type)?((r=i(t,n.props)).ref=Ua(e,t,n),r.return=e,r):((r=gc(n.type,n.key,n.props,null,e.mode,r)).ref=Ua(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=_c(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,a){return null===t||7!==t.tag?((t=bc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=wc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=gc(t.type,t.key,t.props,null,e.mode,n)).ref=Ua(e,null,t),n.return=e,n;case _:return(t=_c(t,e.mode,n)).return=e,t;case R:return f(e,(0,t._init)(t._payload),n)}if(ee(t)||L(t))return(t=bc(t,e.mode,n,null)).return=e,t;Va(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case _:return n.key===i?l(e,t,n,r):null;case R:return d(e,t,(i=n._init)(n._payload),r)}if(ee(n)||L(n))return null!==i?null:h(e,t,n,r,null);Va(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case R:return p(e,t,n,(0,r._init)(r._payload),i)}if(ee(r)||L(r))return h(t,e=e.get(n)||null,r,i,null);Va(t,r)}return null}function v(i,a,u,s){for(var c=null,l=null,h=a,v=a=0,y=null;null!==h&&v<u.length;v++){h.index>v?(y=h,h=null):y=h.sibling;var m=d(i,h,u[v],s);if(null===m){null===h&&(h=y);break}e&&h&&null===m.alternate&&t(i,h),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m,h=y}if(v===u.length)return n(i,h),Xi&&Hi(i,v),c;if(null===h){for(;v<u.length;v++)null!==(h=f(i,u[v],s))&&(a=o(h,a,v),null===l?c=h:l.sibling=h,l=h);return Xi&&Hi(i,v),c}for(h=r(i,h);v<u.length;v++)null!==(y=p(h,i,v,u[v],s))&&(e&&null!==y.alternate&&h.delete(null===y.key?v:y.key),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y);return e&&h.forEach(function(e){return t(i,e)}),Xi&&Hi(i,v),c}function y(i,u,s,c){var l=L(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var h=l=null,v=u,y=u=0,m=null,g=s.next();null!==v&&!g.done;y++,g=s.next()){v.index>y?(m=v,v=null):m=v.sibling;var b=d(i,v,g.value,c);if(null===b){null===v&&(v=m);break}e&&v&&null===b.alternate&&t(i,v),u=o(b,u,y),null===h?l=b:h.sibling=b,h=b,v=m}if(g.done)return n(i,v),Xi&&Hi(i,y),l;if(null===v){for(;!g.done;y++,g=s.next())null!==(g=f(i,g.value,c))&&(u=o(g,u,y),null===h?l=g:h.sibling=g,h=g);return Xi&&Hi(i,y),l}for(v=r(i,v);!g.done;y++,g=s.next())null!==(g=p(v,i,y,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?y:g.key),u=o(g,u,y),null===h?l=g:h.sibling=g,h=g);return e&&v.forEach(function(e){return t(i,e)}),Xi&&Hi(i,y),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===O&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===O){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&za(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Ua(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===O?((a=bc(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=gc(o.type,o.key,o.props,null,r.mode,s)).ref=Ua(r,a,o),s.return=r,r=s)}return u(r);case _:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=_c(o,r.mode,s)).return=r,r=a}return u(r);case R:return e(r,a,(l=o._init)(o._payload),s)}if(ee(o))return v(r,a,o,s);if(L(o))return y(r,a,o,s);Va(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=wc(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var Ba=qa(!0),Wa=qa(!1),Ha={},Ga=mi(Ha),Ka=mi(Ha),Qa=mi(Ha);function Ya(e){if(e===Ha)throw Error(a(174));return e}function $a(e,t){switch(bi(Qa,t),bi(Ka,e),bi(Ga,Ha),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ue(null,"");break;default:t=ue(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}gi(Ga),bi(Ga,t)}function Xa(){gi(Ga),gi(Ka),gi(Qa)}function Ja(e){Ya(Qa.current);var t=Ya(Ga.current),n=ue(t,e.type);t!==n&&(bi(Ka,e),bi(Ga,n))}function Za(e){Ka.current===e&&(gi(Ga),gi(Ka))}var eo=mi(0);function to(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var no=[];function ro(){for(var e=0;e<no.length;e++)no[e]._workInProgressVersionPrimary=null;no.length=0}var io=k.ReactCurrentDispatcher,ao=k.ReactCurrentBatchConfig,oo=0,uo=null,so=null,co=null,lo=!1,ho=!1,fo=0,po=0;function vo(){throw Error(a(321))}function yo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!tr(e[n],t[n]))return!1;return!0}function mo(e,t,n,r,i,o){if(oo=o,uo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,io.current=null===e||null===e.memoizedState?Xo:Jo,e=n(r,i),ho){o=0;do{if(ho=!1,fo=0,25<=o)throw Error(a(301));o+=1,co=so=null,t.updateQueue=null,io.current=Zo,e=n(r,i)}while(ho)}if(io.current=$o,t=null!==so&&null!==so.next,oo=0,co=so=uo=null,lo=!1,t)throw Error(a(300));return e}function go(){var e=0!==fo;return fo=0,e}function bo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===co?uo.memoizedState=co=e:co=co.next=e,co}function ko(){if(null===so){var e=uo.alternate;e=null!==e?e.memoizedState:null}else e=so.next;var t=null===co?uo.memoizedState:co.next;if(null!==t)co=t,so=e;else{if(null===e)throw Error(a(310));e={memoizedState:(so=e).memoizedState,baseState:so.baseState,baseQueue:so.baseQueue,queue:so.queue,next:null},null===co?uo.memoizedState=co=e:co=co.next=e}return co}function wo(e,t){return"function"===typeof t?t(e):t}function _o(e){var t=ko(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=so,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var h=l.lane;if((oo&h)===h)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var f={lane:h,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=f,u=r):c=c.next=f,uo.lanes|=h,Es|=h}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,tr(r,t.memoizedState)||(lu=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,uo.lanes|=o,Es|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Oo(e){var t=ko(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);tr(o,t.memoizedState)||(lu=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Eo(){}function xo(e,t){var n=uo,r=ko(),i=t(),o=!tr(r.memoizedState,i);if(o&&(r.memoizedState=i,lu=!0),r=r.queue,Mo(To.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==co&&1&co.memoizedState.tag){if(n.flags|=2048,Ro(9,jo.bind(null,n,r,i,t),void 0,null),null===ms)throw Error(a(349));0!==(30&oo)||So(n,t,i)}return i}function So(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=uo.updateQueue)?(t={lastEffect:null,stores:null},uo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function jo(e,t,n,r){t.value=n,t.getSnapshot=r,Co(t)&&Io(e)}function To(e,t,n){return n(function(){Co(t)&&Io(e)})}function Co(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!tr(e,n)}catch(r){return!0}}function Io(e){var t=_a(e,1);null!==t&&Ws(t,e,1,-1)}function No(e){var t=bo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wo,lastRenderedState:e},t.queue=e,e=e.dispatch=function(e,t,n){var r=Bs(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ko(e))Qo(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,tr(u,o)){var s=t.interleaved;return null===s?(i.next=i,ka(t)):(i.next=s.next,s.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=wa(e,t,i,r))&&(i=qs(),Ws(n,e,r,i),Yo(n,t,r))}}.bind(null,uo,e),[t.memoizedState,e]}function Ro(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=uo.updateQueue)?(t={lastEffect:null,stores:null},uo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ao(){return ko().memoizedState}function Do(e,t,n,r){var i=bo();uo.flags|=e,i.memoizedState=Ro(1|t,n,void 0,void 0===r?null:r)}function Lo(e,t,n,r){var i=ko();r=void 0===r?null:r;var a=void 0;if(null!==so){var o=so.memoizedState;if(a=o.destroy,null!==r&&yo(r,o.deps))return void(i.memoizedState=Ro(t,n,a,r))}uo.flags|=e,i.memoizedState=Ro(1|t,n,a,r)}function Po(e,t){return Do(8390656,8,e,t)}function Mo(e,t){return Lo(2048,8,e,t)}function Fo(e,t){return Lo(4,2,e,t)}function Uo(e,t){return Lo(4,4,e,t)}function Vo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function zo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Lo(4,4,Vo.bind(null,t,e),n)}function qo(){}function Bo(e,t){var n=ko();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&yo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Wo(e,t){var n=ko();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&yo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ho(e,t,n){return 0===(21&oo)?(e.baseState&&(e.baseState=!1,lu=!0),e.memoizedState=n):(tr(n,t)||(n=ft(),uo.lanes|=n,Es|=n,e.baseState=!0),t)}function Go(){return ko().memoizedState}function Ko(e){var t=e.alternate;return e===uo||null!==t&&t===uo}function Qo(e,t){ho=lo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Yo(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var $o={readContext:ga,useCallback:vo,useContext:vo,useEffect:vo,useImperativeHandle:vo,useInsertionEffect:vo,useLayoutEffect:vo,useMemo:vo,useReducer:vo,useRef:vo,useState:vo,useDebugValue:vo,useDeferredValue:vo,useTransition:vo,useMutableSource:vo,useSyncExternalStore:vo,useId:vo,unstable_isNewReconciler:!1},Xo={readContext:ga,useCallback:function(e,t){return bo().memoizedState=[e,void 0===t?null:t],e},useContext:ga,useEffect:Po,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Do(4194308,4,Vo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Do(4194308,4,e,t)},useInsertionEffect:function(e,t){return Do(4,2,e,t)},useMemo:function(e,t){var n=bo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=bo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=function(e,t,n){var r=Bs(e);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ko(e)?Qo(t,n):null!==(n=wa(e,t,n,r))&&(Ws(n,e,r,qs()),Yo(n,t,r))}.bind(null,uo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},bo().memoizedState=e},useState:No,useDebugValue:qo,useDeferredValue:function(e){return bo().memoizedState=e},useTransition:function(){var e=No(!1),t=e[0];return e=function(e,t){var n=yt;yt=0!==n&&4>n?n:4,e(!0);var r=ao.transition;ao.transition={};try{e(!1),t()}finally{yt=n,ao.transition=r}}.bind(null,e[1]),bo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=uo,i=bo();if(Xi){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===ms)throw Error(a(349));0!==(30&oo)||So(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Po(To.bind(null,r,o,e),[e]),r.flags|=2048,Ro(9,jo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=bo(),t=ms.identifierPrefix;if(Xi){var n=Wi;t=":"+t+"R"+(n=(Bi&~(1<<32-rt(Bi)-1)).toString(32)+n),0<(n=fo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=po++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Jo={readContext:ga,useCallback:Bo,useContext:ga,useEffect:Mo,useImperativeHandle:zo,useInsertionEffect:Fo,useLayoutEffect:Uo,useMemo:Wo,useReducer:_o,useRef:Ao,useState:function(){return _o(wo)},useDebugValue:qo,useDeferredValue:function(e){return Ho(ko(),so.memoizedState,e)},useTransition:function(){return[_o(wo)[0],ko().memoizedState]},useMutableSource:Eo,useSyncExternalStore:xo,useId:Go,unstable_isNewReconciler:!1},Zo={readContext:ga,useCallback:Bo,useContext:ga,useEffect:Mo,useImperativeHandle:zo,useInsertionEffect:Fo,useLayoutEffect:Uo,useMemo:Wo,useReducer:Oo,useRef:Ao,useState:function(){return Oo(wo)},useDebugValue:qo,useDeferredValue:function(e){var t=ko();return null===so?t.memoizedState=e:Ho(t,so.memoizedState,e)},useTransition:function(){return[Oo(wo)[0],ko().memoizedState]},useMutableSource:Eo,useSyncExternalStore:xo,useId:Go,unstable_isNewReconciler:!1};function eu(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function tu(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function nu(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ru="function"===typeof WeakMap?WeakMap:Map;function iu(e,t,n){(n=Sa(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Rs||(Rs=!0,As=r),nu(0,t)},n}function au(e,t,n){(n=Sa(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){nu(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){nu(0,t),"function"!==typeof r&&(null===Ds?Ds=new Set([this]):Ds.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ou(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ru;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=function(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=qs(),e.pingedLanes|=e.suspendedLanes&n,ms===e&&(bs&n)===n&&(4===_s||3===_s&&(130023424&bs)===bs&&500>Qe()-Cs?Zs(e,0):Ss|=n),Hs(e,t)}.bind(null,e,t,n),t.then(e,e))}function uu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function su(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Sa(-1,1)).tag=2,ja(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var cu=k.ReactCurrentOwner,lu=!1;function hu(e,t,n,r){t.child=null===e?Wa(t,null,n,r):Ba(t,e.child,n,r)}function fu(e,t,n,r,i){n=n.render;var a=t.ref;return ma(t,i),r=mo(e,t,n,r,a,i),n=go(),null===e||lu?(Xi&&n&&Ki(t),t.flags|=1,hu(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Lu(e,t,i))}function du(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||yc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=gc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,pu(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:nr)(o,r)&&e.ref===t.ref)return Lu(e,t,i)}return t.flags|=1,(e=mc(a,r)).ref=t.ref,e.return=t,t.child=e}function pu(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(nr(a,r)&&e.ref===t.ref){if(lu=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Lu(e,t,i);0!==(131072&e.flags)&&(lu=!0)}}return mu(e,t,n,r,i)}function vu(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},bi(ws,ks),ks|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,bi(ws,ks),ks|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,bi(ws,ks),ks|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,bi(ws,ks),ks|=r;return hu(e,t,i,n),t.child}function yu(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function mu(e,t,n,r,i){var a=xi(n)?Oi:wi.current;return a=Ei(t,a),ma(t,i),n=mo(e,t,n,r,a,i),r=go(),null===e||lu?(Xi&&r&&Ki(t),t.flags|=1,hu(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Lu(e,t,i))}function gu(e,t,n,r,i){if(xi(n)){var a=!0;Ci(t)}else a=!1;if(ma(t,i),null===t.stateNode)Du(e,t),Pa(t,n,r),Fa(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=ga(c):c=Ei(t,c=xi(n)?Oi:wi.current);var l=n.getDerivedStateFromProps,h="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&Ma(t,o,r,c),Oa=!1;var f=t.memoizedState;o.state=f,Ia(t,r,o,i),s=t.memoizedState,u!==r||f!==s||_i.current||Oa?("function"===typeof l&&(Aa(t,n,l,r),s=t.memoizedState),(u=Oa||La(t,n,u,r,f,s,c))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,xa(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:ca(t.type,u),o.props=c,h=t.pendingProps,f=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=ga(s):s=Ei(t,s=xi(n)?Oi:wi.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==h||f!==s)&&Ma(t,o,r,s),Oa=!1,f=t.memoizedState,o.state=f,Ia(t,r,o,i);var p=t.memoizedState;u!==h||f!==p||_i.current||Oa?("function"===typeof d&&(Aa(t,n,d,r),p=t.memoizedState),(c=Oa||La(t,n,c,r,f,p,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return bu(e,t,n,r,a,i)}function bu(e,t,n,r,i,a){yu(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Ii(t,n,!1),Lu(e,t,a);r=t.stateNode,cu.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ba(t,e.child,null,a),t.child=Ba(t,null,u,a)):hu(e,t,u,a),t.memoizedState=r.state,i&&Ii(t,n,!0),t.child}function ku(e){var t=e.stateNode;t.pendingContext?ji(0,t.pendingContext,t.pendingContext!==t.context):t.context&&ji(0,t.context,!1),$a(e,t.containerInfo)}function wu(e,t,n,r,i){return oa(),ua(i),t.flags|=256,hu(e,t,n,r),t.child}var _u,Ou,Eu,xu,Su={dehydrated:null,treeContext:null,retryLane:0};function ju(e){return{baseLanes:e,cachePool:null,transitions:null}}function Tu(e,t,n){var r,i=t.pendingProps,o=eo.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),bi(eo,1&o),null===e)return na(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(s=i.children,e=i.fallback,u?(i=t.mode,u=t.child,s={mode:"hidden",children:s},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=s):u=kc(s,i,0,null),e=bc(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=ju(n),t.memoizedState=Su,e):Cu(t,s));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,u){if(n)return 256&t.flags?(t.flags&=-257,r=tu(Error(a(422))),Iu(e,t,u,r)):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=kc({mode:"visible",children:r.children},i,0,null),(o=bc(o,i,u,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Ba(t,e.child,null,u),t.child.memoizedState=ju(u),t.memoizedState=Su,o);if(0===(1&t.mode))return Iu(e,t,u,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var s=r.dgst;return r=s,o=Error(a(419)),r=tu(o,r,void 0),Iu(e,t,u,r)}if(s=0!==(u&e.childLanes),lu||s){if(null!==(r=ms)){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|u))?0:i)&&i!==o.retryLane&&(o.retryLane=i,_a(e,i),Ws(r,e,i,-1))}return nc(),r=tu(Error(a(421))),Iu(e,t,u,r)}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=function(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),fc(e,n)}.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,$i=ni(i.nextSibling),Yi=t,Xi=!0,Ji=null,null!==e&&(Vi[zi++]=Bi,Vi[zi++]=Wi,Vi[zi++]=qi,Bi=e.id,Wi=e.overflow,qi=t),(t=Cu(t,r.children)).flags|=4096,t)}(e,t,s,i,r,o,n);if(u){u=i.fallback,s=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&s)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=mc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?u=mc(r,u):(u=bc(u,s,n,null)).flags|=2,u.return=t,i.return=t,i.sibling=u,t.child=i,i=u,u=t.child,s=null===(s=e.child.memoizedState)?ju(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},u.memoizedState=s,u.childLanes=e.childLanes&~n,t.memoizedState=Su,i}return e=(u=e.child).sibling,i=mc(u,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Cu(e,t){return(t=kc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Iu(e,t,n,r){return null!==r&&ua(r),Ba(t,e.child,null,n),(e=Cu(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Nu(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),ya(e.return,t,n)}function Ru(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function Au(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(hu(e,t,r.children,n),0!==(2&(r=eo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Nu(e,n,t);else if(19===e.tag)Nu(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(bi(eo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===to(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ru(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===to(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ru(t,!0,n,null,a);break;case"together":Ru(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Du(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Lu(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Es|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=mc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=mc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Pu(e,t){if(!Xi)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Mu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Fu(e,t,n){var r=t.pendingProps;switch(Qi(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mu(t),null;case 1:return xi(t.type)&&Si(),Mu(t),null;case 3:return r=t.stateNode,Xa(),gi(_i),gi(wi),ro(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ia(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==Ji&&(Ks(Ji),Ji=null))),Ou(e,t),Mu(t),null;case 5:Za(t);var i=Ya(Qa.current);if(n=t.type,null!==e&&null!=t.stateNode)Eu(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Mu(t),null}if(e=Ya(Ga.current),ia(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[ai]=t,r[oi]=o,e=0!==(1&t.mode),n){case"dialog":Rr("cancel",r),Rr("close",r);break;case"iframe":case"object":case"embed":Rr("load",r);break;case"video":case"audio":for(i=0;i<Tr.length;i++)Rr(Tr[i],r);break;case"source":Rr("error",r);break;case"img":case"image":case"link":Rr("error",r),Rr("load",r);break;case"details":Rr("toggle",r);break;case"input":Y(r,o),Rr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Rr("invalid",r);break;case"textarea":re(r,o),Rr("invalid",r)}for(var s in me(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Hr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Hr(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&Rr("scroll",r)}switch(n){case"input":H(r),J(r,o,!0);break;case"textarea":H(r),ae(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Gr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[ai]=t,e[oi]=r,_u(e,t,!1,!1),t.stateNode=e;e:{switch(s=ge(n,r),n){case"dialog":Rr("cancel",e),Rr("close",e),i=r;break;case"iframe":case"object":case"embed":Rr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Tr.length;i++)Rr(Tr[i],e);i=r;break;case"source":Rr("error",e),i=r;break;case"img":case"image":case"link":Rr("error",e),Rr("load",e),i=r;break;case"details":Rr("toggle",e),i=r;break;case"input":Y(e,r),i=Q(e,r),Rr("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=M({},r,{value:void 0}),Rr("invalid",e);break;case"textarea":re(e,r),i=ne(e,r),Rr("invalid",e);break;default:i=r}for(o in me(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?ve(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&le(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Rr("scroll",e):null!=l&&b(e,o,l,s))}switch(n){case"input":H(e),J(e,r,!1);break;case"textarea":H(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+B(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?te(e,!!r.multiple,o,!1):null!=r.defaultValue&&te(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Gr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Mu(t),null;case 6:if(e&&null!=t.stateNode)xu(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=Ya(Qa.current),Ya(Ga.current),ia(t)){if(r=t.stateNode,n=t.memoizedProps,r[ai]=t,(o=r.nodeValue!==n)&&null!==(e=Yi))switch(e.tag){case 3:Hr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Hr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[ai]=t,t.stateNode=r}return Mu(t),null;case 13:if(gi(eo),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(Xi&&null!==$i&&0!==(1&t.mode)&&0===(128&t.flags))aa(),oa(),t.flags|=98560,o=!1;else if(o=ia(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[ai]=t}else oa(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Mu(t),o=!1}else null!==Ji&&(Ks(Ji),Ji=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&eo.current)?0===_s&&(_s=3):nc())),null!==t.updateQueue&&(t.flags|=4),Mu(t),null);case 4:return Xa(),Ou(e,t),null===e&&Lr(t.stateNode.containerInfo),Mu(t),null;case 10:return va(t.type._context),Mu(t),null;case 17:return xi(t.type)&&Si(),Mu(t),null;case 19:if(gi(eo),null===(o=t.memoizedState))return Mu(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)Pu(o,!1);else{if(0!==_s||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=to(e))){for(t.flags|=128,Pu(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return bi(eo,1&eo.current|2),t.child}e=e.sibling}null!==o.tail&&Qe()>Is&&(t.flags|=128,r=!0,Pu(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=to(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Pu(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!Xi)return Mu(t),null}else 2*Qe()-o.renderingStartTime>Is&&1073741824!==n&&(t.flags|=128,r=!0,Pu(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Qe(),t.sibling=null,n=eo.current,bi(eo,r?1&n|2:1&n),t):(Mu(t),null);case 22:case 23:return Js(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&ks)&&(Mu(t),6&t.subtreeFlags&&(t.flags|=8192)):Mu(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Uu(e,t){switch(Qi(t),t.tag){case 1:return xi(t.type)&&Si(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Xa(),gi(_i),gi(wi),ro(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Za(t),null;case 13:if(gi(eo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));oa()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return gi(eo),null;case 4:return Xa(),null;case 10:return va(t.type._context),null;case 22:case 23:return Js(),null;case 24:default:return null}}_u=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ou=function(){},Eu=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Ya(Ga.current);var a,o=null;switch(n){case"input":i=Q(e,i),r=Q(e,r),o=[];break;case"select":i=M({},i,{value:void 0}),r=M({},r,{value:void 0}),o=[];break;case"textarea":i=ne(e,i),r=ne(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Gr)}for(l in me(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Rr("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},xu=function(e,t,n,r){n!==r&&(t.flags|=4)};var Vu=!1,zu=!1,qu="function"===typeof WeakSet?WeakSet:Set,Bu=null;function Wu(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){hc(e,t,r)}else n.current=null}function Hu(e,t,n){try{n()}catch(r){hc(e,t,r)}}var Gu=!1;function Ku(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&Hu(t,n,a)}i=i.next}while(i!==r)}}function Qu(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Yu(e){var t=e.ref;if(null!==t){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}"function"===typeof t?t(e):t.current=e}}function $u(e){var t=e.alternate;null!==t&&(e.alternate=null,$u(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ai],delete t[oi],delete t[si],delete t[ci],delete t[li])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Xu(e){return 5===e.tag||3===e.tag||4===e.tag}function Ju(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||Xu(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}var Zu=null,es=!1;function ts(e,t,n){for(n=n.child;null!==n;)ns(e,t,n),n=n.sibling}function ns(e,t,n){if(nt&&"function"===typeof nt.onCommitFiberUnmount)try{nt.onCommitFiberUnmount(tt,n)}catch(u){}switch(n.tag){case 5:zu||Wu(n,t);case 6:var r=Zu,i=es;Zu=null,ts(e,t,n),es=i,null!==(Zu=r)&&(es?(e=Zu,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):Zu.removeChild(n.stateNode));break;case 18:null!==Zu&&(es?(e=Zu,n=n.stateNode,8===e.nodeType?ti(e.parentNode,n):1===e.nodeType&&ti(e,n),Ut(e)):ti(Zu,n.stateNode));break;case 4:r=Zu,i=es,Zu=n.stateNode.containerInfo,es=!0,ts(e,t,n),Zu=r,es=i;break;case 0:case 11:case 14:case 15:if(!zu&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)?Hu(n,t,o):0!==(4&a)&&Hu(n,t,o)),i=i.next}while(i!==r)}ts(e,t,n);break;case 1:if(!zu&&(Wu(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){hc(n,t,u)}ts(e,t,n);break;case 21:ts(e,t,n);break;case 22:1&n.mode?(zu=(r=zu)||null!==n.memoizedState,ts(e,t,n),zu=r):ts(e,t,n);break;default:ts(e,t,n)}}function rs(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new qu),t.forEach(function(t){var r=function(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),fc(e,n)}.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function is(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,u=t,s=u;e:for(;null!==s;){switch(s.tag){case 5:Zu=s.stateNode,es=!1;break e;case 3:case 4:Zu=s.stateNode.containerInfo,es=!0;break e}s=s.return}if(null===Zu)throw Error(a(160));ns(o,u,i),Zu=null,es=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){hc(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)as(t,e),t=t.sibling}function as(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(is(t,e),os(e),4&r){try{Ku(3,e,e.return),Qu(3,e)}catch(y){hc(e,e.return,y)}try{Ku(5,e,e.return)}catch(y){hc(e,e.return,y)}}break;case 1:is(t,e),os(e),512&r&&null!==n&&Wu(n,n.return);break;case 5:if(is(t,e),os(e),512&r&&null!==n&&Wu(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(y){hc(e,e.return,y)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,u=null!==n?n.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===o.type&&null!=o.name&&$(i,o),ge(s,u);var l=ge(s,o);for(u=0;u<c.length;u+=2){var h=c[u],f=c[u+1];"style"===h?ve(i,f):"dangerouslySetInnerHTML"===h?le(i,f):"children"===h?he(i,f):b(i,h,f,l)}switch(s){case"input":X(i,o);break;case"textarea":ie(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?te(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?te(i,!!o.multiple,o.defaultValue,!0):te(i,!!o.multiple,o.multiple?[]:"",!1))}i[oi]=o}catch(y){hc(e,e.return,y)}}break;case 6:if(is(t,e),os(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(y){hc(e,e.return,y)}}break;case 3:if(is(t,e),os(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Ut(t.containerInfo)}catch(y){hc(e,e.return,y)}break;case 4:is(t,e),os(e);break;case 13:is(t,e),os(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Cs=Qe())),4&r&&rs(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(zu=(l=zu)||h,is(t,e),zu=l):is(t,e),os(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!h&&0!==(1&e.mode))for(Bu=e,h=e.child;null!==h;){for(f=Bu=h;null!==Bu;){switch(p=(d=Bu).child,d.tag){case 0:case 11:case 14:case 15:Ku(4,d,d.return);break;case 1:Wu(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(y){hc(r,n,y)}}break;case 5:Wu(d,d.return);break;case 22:if(null!==d.memoizedState){cs(f);continue}}null!==p?(p.return=d,Bu=p):cs(f)}h=h.sibling}e:for(h=null,f=e;;){if(5===f.tag){if(null===h){h=f;try{i=f.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=f.stateNode,u=void 0!==(c=f.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=pe("display",u))}catch(y){hc(e,e.return,y)}}}else if(6===f.tag){if(null===h)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(y){hc(e,e.return,y)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===e)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;null===f.sibling;){if(null===f.return||f.return===e)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:is(t,e),os(e),4&r&&rs(e);break;case 21:break;default:is(t,e),os(e)}}function os(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(Xu(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),function e(t,n,r){var i=t.tag;if(5===i||6===i)t=t.stateNode,n?r.insertBefore(t,n):r.appendChild(t);else if(4!==i&&null!==(t=t.child))for(e(t,n,r),t=t.sibling;null!==t;)e(t,n,r),t=t.sibling}(e,Ju(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;!function e(t,n,r){var i=t.tag;if(5===i||6===i)t=t.stateNode,n?8===r.nodeType?r.parentNode.insertBefore(t,n):r.insertBefore(t,n):(8===r.nodeType?(n=r.parentNode).insertBefore(t,r):(n=r).appendChild(t),null!==(r=r._reactRootContainer)&&void 0!==r||null!==n.onclick||(n.onclick=Gr));else if(4!==i&&null!==(t=t.child))for(e(t,n,r),t=t.sibling;null!==t;)e(t,n,r),t=t.sibling}(e,Ju(e),o);break;default:throw Error(a(161))}}catch(u){hc(e,e.return,u)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function us(e,t,n){Bu=e,function e(t,n,r){for(var i=0!==(1&t.mode);null!==Bu;){var a=Bu,o=a.child;if(22===a.tag&&i){var u=null!==a.memoizedState||Vu;if(!u){var s=a.alternate,c=null!==s&&null!==s.memoizedState||zu;s=Vu;var l=zu;if(Vu=u,(zu=c)&&!l)for(Bu=a;null!==Bu;)c=(u=Bu).child,22===u.tag&&null!==u.memoizedState?ls(a):null!==c?(c.return=u,Bu=c):ls(a);for(;null!==o;)Bu=o,e(o,n,r),o=o.sibling;Bu=a,Vu=s,zu=l}ss(t)}else 0!==(8772&a.subtreeFlags)&&null!==o?(o.return=a,Bu=o):ss(t)}}(e,t,n)}function ss(e){for(;null!==Bu;){var t=Bu;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:zu||Qu(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!zu)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ca(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Na(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Na(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var h=l.memoizedState;if(null!==h){var f=h.dehydrated;null!==f&&Ut(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(a(163))}zu||512&t.flags&&Yu(t)}catch(d){hc(t,t.return,d)}}if(t===e){Bu=null;break}if(null!==(n=t.sibling)){n.return=t.return,Bu=n;break}Bu=t.return}}function cs(e){for(;null!==Bu;){var t=Bu;if(t===e){Bu=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Bu=n;break}Bu=t.return}}function ls(e){for(;null!==Bu;){var t=Bu;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Qu(4,t)}catch(s){hc(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){hc(t,i,s)}}var a=t.return;try{Yu(t)}catch(s){hc(t,a,s)}break;case 5:var o=t.return;try{Yu(t)}catch(s){hc(t,o,s)}}}catch(s){hc(t,t.return,s)}if(t===e){Bu=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Bu=u;break}Bu=t.return}}var hs,fs=Math.ceil,ds=k.ReactCurrentDispatcher,ps=k.ReactCurrentOwner,vs=k.ReactCurrentBatchConfig,ys=0,ms=null,gs=null,bs=0,ks=0,ws=mi(0),_s=0,Os=null,Es=0,xs=0,Ss=0,js=null,Ts=null,Cs=0,Is=1/0,Ns=null,Rs=!1,As=null,Ds=null,Ls=!1,Ps=null,Ms=0,Fs=0,Us=null,Vs=-1,zs=0;function qs(){return 0!==(6&ys)?Qe():-1!==Vs?Vs:Vs=Qe()}function Bs(e){return 0===(1&e.mode)?1:0!==(2&ys)&&0!==bs?bs&-bs:null!==sa.transition?(0===zs&&(zs=ft()),zs):0!==(e=yt)?e:e=void 0===(e=window.event)?16:Kt(e.type)}function Ws(e,t,n,r){if(50<Fs)throw Fs=0,Us=null,Error(a(185));pt(e,n,r),0!==(2&ys)&&e===ms||(e===ms&&(0===(2&ys)&&(xs|=n),4===_s&&Qs(e,bs)),Hs(e,r),1===n&&0===ys&&0===(1&t.mode)&&(Is=Qe()+500,Ri&&Li()))}function Hs(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-rt(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=lt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ct(e,e===ms?bs:0);if(0===r)null!==n&&He(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&He(n),1===t)0===e.tag?function(e){Ri=!0,Di(e)}(Ys.bind(null,e)):Di(Ys.bind(null,e)),Zr(function(){0===(6&ys)&&Li()}),n=null;else{switch(mt(r)){case 1:n=$e;break;case 4:n=Xe;break;case 16:n=Je;break;case 536870912:n=et;break;default:n=Je}n=dc(n,function e(t,n){Vs=-1;zs=0;if(0!==(6&ys))throw Error(a(327));var r=t.callbackNode;if(cc()&&t.callbackNode!==r)return null;var i=ct(t,t===ms?bs:0);if(0===i)return null;if(0!==(30&i)||0!==(i&t.expiredLanes)||n)n=rc(t,i);else{n=i;var o=ys;ys|=2;var u=tc();for(ms===t&&bs===n||(Ns=null,Is=Qe()+500,Zs(t,n));;)try{ac();break}catch(c){ec(t,c)}pa(),ds.current=u,ys=o,null!==gs?n=0:(ms=null,bs=0,n=_s)}if(0!==n){if(2===n&&(0!==(o=ht(t))&&(i=o,n=Gs(t,o))),1===n)throw r=Os,Zs(t,0),Qs(t,i),Hs(t,Qe()),r;if(6===n)Qs(t,i);else{if(o=t.current.alternate,0===(30&i)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!tr(a(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(o)&&(2===(n=rc(t,i))&&(0!==(u=ht(t))&&(i=u,n=Gs(t,u))),1===n))throw r=Os,Zs(t,0),Qs(t,i),Hs(t,Qe()),r;switch(t.finishedWork=o,t.finishedLanes=i,n){case 0:case 1:throw Error(a(345));case 2:sc(t,Ts,Ns);break;case 3:if(Qs(t,i),(130023424&i)===i&&10<(n=Cs+500-Qe())){if(0!==ct(t,0))break;if(((o=t.suspendedLanes)&i)!==i){qs(),t.pingedLanes|=t.suspendedLanes&o;break}t.timeoutHandle=$r(sc.bind(null,t,Ts,Ns),n);break}sc(t,Ts,Ns);break;case 4:if(Qs(t,i),(4194240&i)===i)break;for(n=t.eventTimes,o=-1;0<i;){var s=31-rt(i);u=1<<s,(s=n[s])>o&&(o=s),i&=~u}if(i=o,10<(i=(120>(i=Qe()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*fs(i/1960))-i)){t.timeoutHandle=$r(sc.bind(null,t,Ts,Ns),i);break}sc(t,Ts,Ns);break;case 5:sc(t,Ts,Ns);break;default:throw Error(a(329))}}}Hs(t,Qe());return t.callbackNode===r?e.bind(null,t):null}.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Gs(e,t){var n=js;return e.current.memoizedState.isDehydrated&&(Zs(e,t).flags|=256),2!==(e=rc(e,t))&&(t=Ts,Ts=n,null!==t&&Ks(t)),e}function Ks(e){null===Ts?Ts=e:Ts.push.apply(Ts,e)}function Qs(e,t){for(t&=~Ss,t&=~xs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-rt(t),r=1<<n;e[n]=-1,t&=~r}}function Ys(e){if(0!==(6&ys))throw Error(a(327));cc();var t=ct(e,0);if(0===(1&t))return Hs(e,Qe()),null;var n=rc(e,t);if(0!==e.tag&&2===n){var r=ht(e);0!==r&&(t=r,n=Gs(e,r))}if(1===n)throw n=Os,Zs(e,0),Qs(e,t),Hs(e,Qe()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,sc(e,Ts,Ns),Hs(e,Qe()),null}function $s(e,t){var n=ys;ys|=1;try{return e(t)}finally{0===(ys=n)&&(Is=Qe()+500,Ri&&Li())}}function Xs(e){null!==Ps&&0===Ps.tag&&0===(6&ys)&&cc();var t=ys;ys|=1;var n=vs.transition,r=yt;try{if(vs.transition=null,yt=1,e)return e()}finally{yt=r,vs.transition=n,0===(6&(ys=t))&&Li()}}function Js(){ks=ws.current,gi(ws)}function Zs(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Xr(n)),null!==gs)for(n=gs.return;null!==n;){var r=n;switch(Qi(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Si();break;case 3:Xa(),gi(_i),gi(wi),ro();break;case 5:Za(r);break;case 4:Xa();break;case 13:case 19:gi(eo);break;case 10:va(r.type._context);break;case 22:case 23:Js()}n=n.return}if(ms=e,gs=e=mc(e.current,null),bs=ks=t,_s=0,Os=null,Ss=xs=Es=0,Ts=js=null,null!==ba){for(t=0;t<ba.length;t++)if(null!==(r=(n=ba[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}ba=null}return e}function ec(e,t){for(;;){var n=gs;try{if(pa(),io.current=$o,lo){for(var r=uo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}lo=!1}if(oo=0,co=so=uo=null,ho=!1,fo=0,ps.current=null,null===n||null===n.return){_s=1,Os=t,gs=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=bs,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,h=s,f=h.tag;if(0===(1&h.mode)&&(0===f||11===f||15===f)){var d=h.alternate;d?(h.updateQueue=d.updateQueue,h.memoizedState=d.memoizedState,h.lanes=d.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=uu(u);if(null!==p){p.flags&=-257,su(p,u,s,0,t),1&p.mode&&ou(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var y=new Set;y.add(c),t.updateQueue=y}else v.add(c);break e}if(0===(1&t)){ou(o,l,t),nc();break e}c=Error(a(426))}else if(Xi&&1&s.mode){var m=uu(u);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),su(m,u,s,0,t),ua(eu(c,s));break e}}o=c=eu(c,s),4!==_s&&(_s=2),null===js?js=[o]:js.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ca(o,iu(0,c,t));break e;case 1:s=c;var g=o.type,b=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Ds||!Ds.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t,Ca(o,au(o,s,t));break e}}o=o.return}while(null!==o)}uc(n)}catch(k){t=k,gs===n&&null!==n&&(gs=n=n.return);continue}break}}function tc(){var e=ds.current;return ds.current=$o,null===e?$o:e}function nc(){0!==_s&&3!==_s&&2!==_s||(_s=4),null===ms||0===(268435455&Es)&&0===(268435455&xs)||Qs(ms,bs)}function rc(e,t){var n=ys;ys|=2;var r=tc();for(ms===e&&bs===t||(Ns=null,Zs(e,t));;)try{ic();break}catch(i){ec(e,i)}if(pa(),ys=n,ds.current=r,null!==gs)throw Error(a(261));return ms=null,bs=0,_s}function ic(){for(;null!==gs;)oc(gs)}function ac(){for(;null!==gs&&!Ge();)oc(gs)}function oc(e){var t=hs(e.alternate,e,ks);e.memoizedProps=e.pendingProps,null===t?uc(e):gs=t,ps.current=null}function uc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Fu(n,t,ks)))return void(gs=n)}else{if(null!==(n=Uu(n,t)))return n.flags&=32767,void(gs=n);if(null===e)return _s=6,void(gs=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(gs=t);gs=t=e}while(null!==t);0===_s&&(_s=5)}function sc(e,t,n){var r=yt,i=vs.transition;try{vs.transition=null,yt=1,function(e,t,n,r){do{cc()}while(null!==Ps);if(0!==(6&ys))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-rt(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===ms&&(gs=ms=null,bs=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Ls||(Ls=!0,dc(Je,function(){return cc(),null})),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=vs.transition,vs.transition=null;var u=yt;yt=1;var s=ys;ys|=4,ps.current=null,function(e,t){if(Kr=zt,or(e=ar())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var u=0,s=-1,c=-1,l=0,h=0,f=e,d=null;t:for(;;){for(var p;f!==n||0!==i&&3!==f.nodeType||(s=u+i),f!==o||0!==r&&3!==f.nodeType||(c=u+r),3===f.nodeType&&(u+=f.nodeValue.length),null!==(p=f.firstChild);)d=f,f=p;for(;;){if(f===e)break t;if(d===n&&++l===i&&(s=u),d===o&&++h===r&&(c=u),null!==(p=f.nextSibling))break;d=(f=d).parentNode}f=p}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Qr={focusedElem:e,selectionRange:n},zt=!1,Bu=t;null!==Bu;)if(e=(t=Bu).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Bu=e;else for(;null!==Bu;){t=Bu;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:break;case 1:if(null!==v){var y=v.memoizedProps,m=v.memoizedState,g=t.stateNode,b=g.getSnapshotBeforeUpdate(t.elementType===t.type?y:ca(t.type,y),m);g.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var k=t.stateNode.containerInfo;1===k.nodeType?k.textContent="":9===k.nodeType&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(a(163))}}catch(w){hc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Bu=e;break}Bu=t.return}v=Gu,Gu=!1}(e,n),as(n,e),ur(Qr),zt=!!Kr,Qr=Kr=null,e.current=n,us(n,e,i),Ke(),ys=s,yt=u,vs.transition=o}else e.current=n;if(Ls&&(Ls=!1,Ps=e,Ms=i),0===(o=e.pendingLanes)&&(Ds=null),function(e){if(nt&&"function"===typeof nt.onCommitFiberRoot)try{nt.onCommitFiberRoot(tt,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),Hs(e,Qe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Rs)throw Rs=!1,e=As,As=null,e;0!==(1&Ms)&&0!==e.tag&&cc(),0!==(1&(o=e.pendingLanes))?e===Us?Fs++:(Fs=0,Us=e):Fs=0,Li()}(e,t,n,r)}finally{vs.transition=i,yt=r}return null}function cc(){if(null!==Ps){var e=mt(Ms),t=vs.transition,n=yt;try{if(vs.transition=null,yt=16>e?16:e,null===Ps)var r=!1;else{if(e=Ps,Ps=null,Ms=0,0!==(6&ys))throw Error(a(331));var i=ys;for(ys|=4,Bu=e.current;null!==Bu;){var o=Bu,u=o.child;if(0!==(16&Bu.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for(Bu=l;null!==Bu;){var h=Bu;switch(h.tag){case 0:case 11:case 15:Ku(8,h,o)}var f=h.child;if(null!==f)f.return=h,Bu=f;else for(;null!==Bu;){var d=(h=Bu).sibling,p=h.return;if($u(h),h===l){Bu=null;break}if(null!==d){d.return=p,Bu=d;break}Bu=p}}}var v=o.alternate;if(null!==v){var y=v.child;if(null!==y){v.child=null;do{var m=y.sibling;y.sibling=null,y=m}while(null!==y)}}Bu=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,Bu=u;else e:for(;null!==Bu;){if(0!==(2048&(o=Bu).flags))switch(o.tag){case 0:case 11:case 15:Ku(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Bu=g;break e}Bu=o.return}}var b=e.current;for(Bu=b;null!==Bu;){var k=(u=Bu).child;if(0!==(2064&u.subtreeFlags)&&null!==k)k.return=u,Bu=k;else e:for(u=b;null!==Bu;){if(0!==(2048&(s=Bu).flags))try{switch(s.tag){case 0:case 11:case 15:Qu(9,s)}}catch(_){hc(s,s.return,_)}if(s===u){Bu=null;break e}var w=s.sibling;if(null!==w){w.return=s.return,Bu=w;break e}Bu=s.return}}if(ys=i,Li(),nt&&"function"===typeof nt.onPostCommitFiberRoot)try{nt.onPostCommitFiberRoot(tt,e)}catch(_){}r=!0}return r}finally{yt=n,vs.transition=t}}return!1}function lc(e,t,n){e=ja(e,t=iu(0,t=eu(n,t),1),1),t=qs(),null!==e&&(pt(e,1,t),Hs(e,t))}function hc(e,t,n){if(3===e.tag)lc(e,e,n);else for(;null!==t;){if(3===t.tag){lc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ds||!Ds.has(r))){t=ja(t,e=au(t,e=eu(n,e),1),1),e=qs(),null!==t&&(pt(t,1,e),Hs(t,e));break}}t=t.return}}function fc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=qs();null!==(e=_a(e,t))&&(pt(e,t,n),Hs(e,n))}function dc(e,t){return We(e,t)}function pc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vc(e,t,n,r){return new pc(e,t,n,r)}function yc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function mc(e,t){var n=e.alternate;return null===n?((n=vc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function gc(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)yc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case O:return bc(n.children,i,o,t);case E:u=8,i|=8;break;case x:return(e=vc(12,n,t,2|i)).elementType=x,e.lanes=o,e;case C:return(e=vc(13,n,t,i)).elementType=C,e.lanes=o,e;case I:return(e=vc(19,n,t,i)).elementType=I,e.lanes=o,e;case A:return kc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:u=10;break e;case j:u=9;break e;case T:u=11;break e;case N:u=14;break e;case R:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=vc(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function bc(e,t,n,r){return(e=vc(7,e,r,t)).lanes=n,e}function kc(e,t,n,r){return(e=vc(22,e,r,t)).elementType=A,e.lanes=n,e.stateNode={isHidden:!1},e}function wc(e,t,n){return(e=vc(6,e,null,t)).lanes=n,e}function _c(e,t,n){return(t=vc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Oc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=dt(0),this.expirationTimes=dt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=dt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Ec(e,t,n,r,i,a,o,u,s){return e=new Oc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=vc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ea(a),e}function xc(e){if(!e)return ki;e:{if(Ve(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(xi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(xi(n))return Ti(e,n,t)}return t}function Sc(e,t,n,r,i,a,o,u,s){return(e=Ec(n,r,!0,e,0,a,0,u,s)).context=xc(null),n=e.current,(a=Sa(r=qs(),i=Bs(n))).callback=void 0!==t&&null!==t?t:null,ja(n,a,i),e.current.lanes=i,pt(e,i,r),Hs(e,r),e}function jc(e,t,n,r){var i=t.current,a=qs(),o=Bs(i);return n=xc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Sa(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=ja(i,t,o))&&(Ws(e,i,o,a),Ta(e,i,o)),o}function Tc(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function Cc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Ic(e,t){Cc(e,t),(e=e.alternate)&&Cc(e,t)}hs=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||_i.current)lu=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return lu=!1,function(e,t,n){switch(t.tag){case 3:ku(t),oa();break;case 5:Ja(t);break;case 1:xi(t.type)&&Ci(t);break;case 4:$a(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;bi(la,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(bi(eo,1&eo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Tu(e,t,n):(bi(eo,1&eo.current),null!==(e=Lu(e,t,n))?e.sibling:null);bi(eo,1&eo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Au(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),bi(eo,eo.current),r)break;return null;case 22:case 23:return t.lanes=0,vu(e,t,n)}return Lu(e,t,n)}(e,t,n);lu=0!==(131072&e.flags)}else lu=!1,Xi&&0!==(1048576&t.flags)&&Gi(t,Ui,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Du(e,t),e=t.pendingProps;var i=Ei(t,wi.current);ma(t,n),i=mo(null,t,r,e,i,n);var o=go();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,xi(r)?(o=!0,Ci(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ea(t),i.updater=Da,t.stateNode=i,i._reactInternals=t,Fa(t,r,e,n),t=bu(null,t,r,!0,o,n)):(t.tag=0,Xi&&o&&Ki(t),hu(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Du(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return yc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===T)return 11;if(e===N)return 14}return 2}(r),e=ca(r,e),i){case 0:t=mu(null,t,r,e,n);break e;case 1:t=gu(null,t,r,e,n);break e;case 11:t=fu(null,t,r,e,n);break e;case 14:t=du(null,t,r,ca(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,mu(e,t,r,i=t.elementType===r?i:ca(r,i),n);case 1:return r=t.type,i=t.pendingProps,gu(e,t,r,i=t.elementType===r?i:ca(r,i),n);case 3:e:{if(ku(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,xa(e,t),Ia(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=wu(e,t,r,n,i=eu(Error(a(423)),t));break e}if(r!==i){t=wu(e,t,r,n,i=eu(Error(a(424)),t));break e}for($i=ni(t.stateNode.containerInfo.firstChild),Yi=t,Xi=!0,Ji=null,n=Wa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(oa(),r===i){t=Lu(e,t,n);break e}hu(e,t,r,n)}t=t.child}return t;case 5:return Ja(t),null===e&&na(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,Yr(r,i)?u=null:null!==o&&Yr(r,o)&&(t.flags|=32),yu(e,t),hu(e,t,u,n),t.child;case 6:return null===e&&na(t),null;case 13:return Tu(e,t,n);case 4:return $a(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ba(t,null,r,n):hu(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,fu(e,t,r,i=t.elementType===r?i:ca(r,i),n);case 7:return hu(e,t,t.pendingProps,n),t.child;case 8:case 12:return hu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,bi(la,r._currentValue),r._currentValue=u,null!==o)if(tr(o.value,u)){if(o.children===i.children&&!_i.current){t=Lu(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Sa(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var h=(l=l.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),ya(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),ya(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}hu(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,ma(t,n),r=r(i=ga(i)),t.flags|=1,hu(e,t,r,n),t.child;case 14:return i=ca(r=t.type,t.pendingProps),du(e,t,r,i=ca(r.type,i),n);case 15:return pu(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ca(r,i),Du(e,t),t.tag=1,xi(r)?(e=!0,Ci(t)):e=!1,ma(t,n),Pa(t,r,i),Fa(t,r,i,n),bu(null,t,r,!0,e,n);case 19:return Au(e,t,n);case 22:return vu(e,t,n)}throw Error(a(156,t.tag))};var Nc="function"===typeof reportError?reportError:function(e){console.error(e)};function Rc(e){this._internalRoot=e}function Ac(e){this._internalRoot=e}function Dc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Lc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Pc(){}function Mc(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Tc(o);u.call(e)}}jc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Tc(o);a.call(e)}}var o=Sc(t,r,e,0,null,!1,0,"",Pc);return e._reactRootContainer=o,e[ui]=o.current,Lr(8===e.nodeType?e.parentNode:e),Xs(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Tc(s);u.call(e)}}var s=Ec(e,0,!1,null,0,!1,0,"",Pc);return e._reactRootContainer=s,e[ui]=s.current,Lr(8===e.nodeType?e.parentNode:e),Xs(function(){jc(t,s,n,r)}),s}(n,t,e,i,r);return Tc(o)}Ac.prototype.render=Rc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));jc(e,t,null,null)},Ac.prototype.unmount=Rc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;Xs(function(){jc(null,e,null,null)}),t[ui]=null}},Ac.prototype.unstable_scheduleHydration=function(e){if(e){var t=wt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<It.length&&0!==t&&t<It[n].priority;n++);It.splice(n,0,e),0===n&&Dt(e)}},gt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=st(t.pendingLanes);0!==n&&(vt(t,1|n),Hs(t,Qe()),0===(6&ys)&&(Is=Qe()+500,Li()))}break;case 13:Xs(function(){var t=_a(e,1);if(null!==t){var n=qs();Ws(t,e,1,n)}}),Ic(e,1)}},bt=function(e){if(13===e.tag){var t=_a(e,134217728);if(null!==t)Ws(t,e,134217728,qs());Ic(e,134217728)}},kt=function(e){if(13===e.tag){var t=Bs(e),n=_a(e,t);if(null!==n)Ws(n,e,t,qs());Ic(e,t)}},wt=function(){return yt},_t=function(e,t){var n=yt;try{return yt=e,t()}finally{yt=n}},we=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=pi(r);if(!i)throw Error(a(90));G(r),X(r,i)}}}break;case"textarea":ie(e,n);break;case"select":null!=(t=n.value)&&te(e,!!n.multiple,t,!1)}},je=$s,Te=Xs;var Fc={usingClientEntryPoint:!1,Events:[fi,di,pi,xe,Se,$s]},Uc={findFiberByHostInstance:hi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Vc={bundleType:Uc.bundleType,version:Uc.version,rendererPackageName:Uc.rendererPackageName,rendererConfig:Uc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:k.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Be(e))?null:e.stateNode},findFiberByHostInstance:Uc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var zc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zc.isDisabled&&zc.supportsFiber)try{tt=zc.inject(Vc),nt=zc}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Fc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Dc(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Dc(e))throw Error(a(299));var n=!1,r="",i=Nc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Ec(e,1,!1,null,0,n,0,r,i),e[ui]=t.current,Lr(8===e.nodeType?e.parentNode:e),new Rc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Be(t))?null:e.stateNode},t.flushSync=function(e){return Xs(e)},t.hydrate=function(e,t,n){if(!Lc(t))throw Error(a(200));return Mc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Dc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Nc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=Sc(t,null,e,1,null!=n?n:null,i,0,o,u),e[ui]=t.current,Lr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Ac(t)},t.render=function(e,t,n){if(!Lc(t))throw Error(a(200));return Mc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Lc(e))throw Error(a(40));return!!e._reactRootContainer&&(Xs(function(){Mc(null,null,e,!1,function(){e._reactRootContainer=null,e[ui]=null})}),!0)},t.unstable_batchedUpdates=$s,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Lc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return Mc(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},function(e,t,n){"use strict";e.exports=n(42)},function(e,t,n){"use strict";(function(e){function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],h=1,f=null,d=3,p=!1,v=!1,y=!1,m="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof e?e:null;function k(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(y=!1,k(e),!v)if(null!==r(c))v=!0,A(_);else{var t=r(l);null!==t&&D(w,t.startTime-e)}}function _(e,n){v=!1,y&&(y=!1,g(S),S=-1),p=!0;var a=d;try{for(k(n),f=r(c);null!==f&&(!(f.expirationTime>n)||e&&!C());){var o=f.callback;if("function"===typeof o){f.callback=null,d=f.priorityLevel;var u=o(f.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?f.callback=u:f===r(c)&&i(c),k(n)}else i(c);f=r(c)}if(null!==f)var s=!0;else{var h=r(l);null!==h&&D(w,h.startTime-n),s=!1}return s}finally{f=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var O,E=!1,x=null,S=-1,j=5,T=-1;function C(){return!(t.unstable_now()-T<j)}function I(){if(null!==x){var e=t.unstable_now();T=e;var n=!0;try{n=x(!0,e)}finally{n?O():(E=!1,x=null)}}else E=!1}if("function"===typeof b)O=function(){b(I)};else if("undefined"!==typeof MessageChannel){var N=new MessageChannel,R=N.port2;N.port1.onmessage=I,O=function(){R.postMessage(null)}}else O=function(){m(I,0)};function A(e){x=e,E||(E=!0,O())}function D(e,n){S=m(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,A(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(y?(g(S),S=-1):y=!0,D(w,a-o))):(e.sortIndex=u,n(c,e),v||p||(v=!0,A(_))),e},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}}).call(this,n(43).setImmediate)},function(e,t,n){(function(e){var r="undefined"!==typeof e&&e||"undefined"!==typeof self&&self||window,i=Function.prototype.apply;function a(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new a(i.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new a(i.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(44),t.setImmediate="undefined"!==typeof self&&self.setImmediate||"undefined"!==typeof e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!==typeof self&&self.clearImmediate||"undefined"!==typeof e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(24))},function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var r,i=1,a={},o=!1,u=e.document,s=Object.getPrototypeOf&&Object.getPrototypeOf(e);s=s&&s.setTimeout?s:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick(function(){l(e)})}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"===typeof n.data&&0===n.data.indexOf(t)&&l(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),r=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){l(e.data)},r=function(t){e.port2.postMessage(t)}}():u&&"onreadystatechange"in u.createElement("script")?function(){var e=u.documentElement;r=function(t){var n=u.createElement("script");n.onreadystatechange=function(){l(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():r=function(e){setTimeout(l,0,e)},s.setImmediate=function(e){"function"!==typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var o={callback:e,args:t};return a[i]=o,r(i),i++},s.clearImmediate=c}function c(e){delete a[e]}function l(e){if(o)setTimeout(l,0,e);else{var t=a[e];if(t){o=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}(t)}finally{c(e),o=!1}}}}}("undefined"===typeof self?"undefined"===typeof e?this:e:self)}).call(this,n(24),n(25))},,,,,function(e,t,n){"use strict";n(33)}]]);
//# sourceMappingURL=2.2a96b3ef.chunk.js.map